(function(t){function e(e){for(var n,s,l=e[0],o=e[1],c=e[2],d=0,p=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},10:function(t,e){},"1cef":function(t,e,a){},"1ddb":function(t,e,a){"use strict";a("402e")},2:function(t,e){},"262c":function(t,e,a){"use strict";a("7cef")},"2b3d2":function(t,e,a){"use strict";a("b7c4")},3:function(t,e){},"35dc":function(t,e,a){"use strict";a("1cef")},"3b8f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"inputArea"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("币种")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.crossPro.currencys,callback:function(e){t.$set(t.crossPro,"currencys",e)},expression:"crossPro.currencys"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("周期")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.crossPro.period,callback:function(e){t.$set(t.crossPro,"period",e)},expression:"crossPro.period"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("数量")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.crossPro.size,callback:function(e){t.$set(t.crossPro,"size",e)},expression:"crossPro.size"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("范围")]),a("el-date-picker",{attrs:{type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","00:00:00"],"picker-options":t.pickerOptions},on:{change:t.getData3},model:{value:t.crossPro.dates,callback:function(e){t.$set(t.crossPro,"dates",e)},expression:"crossPro.dates"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("ws间隙")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.crossPro.timeGap,callback:function(e){t.$set(t.crossPro,"timeGap",e)},expression:"crossPro.timeGap"}})],1),t._l(t.riseShowData,(function(e,n){return a("div",{key:n+Math.random(),staticClass:"item"},[a("div",[t._v(t._s(e.period))]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.currency0+"-"+e.currency1)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.tick0.close+"-"+e.tick1.close)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.rise0+"-"+e.rise1)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.rise)+" ")])])}))],2),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.daydayday(1)}}},[t._v("上一天")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.getData3()}}},[t._v("获取数据")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.daydayday(2)}}},[t._v("下一天")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.klineData=[]}}},[t._v("删除网络数据")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.calculateDouble1(t.klineData)}}},[t._v("计算")])],1),a("el-divider"),a("div",{staticClass:"data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"currency",label:"currency"}}),a("el-table-column",{attrs:{prop:"length",label:"length"}}),a("el-table-column",{attrs:{prop:"fc",label:"fc"}}),a("el-table-column",{attrs:{prop:"start",label:"start",width:"165"}}),a("el-table-column",{attrs:{prop:"end",label:"end",width:"165"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.klineData.splice(e.$index,1)}}},[t._v("删除")])]}}])})],1)],1),a("el-divider"),a("div",{staticStyle:{height:"500px"},attrs:{id:"main"}}),a("el-divider"),t._l(t.ccData,(function(t,e){return a("div",{key:e},[a("div",{staticStyle:{height:"500px"},attrs:{id:"main"+e}}),a("el-divider")],1)}))],2)},i=[],r=a("1da1"),s=a("5530"),l=(a("96cf"),a("4de4"),a("ac1f"),a("1276"),a("d81d"),a("a15b"),a("99af"),a("d3b7"),a("caad"),a("2532"),a("159b"),a("fb6a"),a("fdab")),o=a("2f62"),c=(a("8429"),a("313e")),u=(a("bc3a"),{components:{HelloWorld:l["a"]},data:function(){return{input:"",loading:!1,loading2:!1,loading3:!1,disabled3:!0,ws:null,riseData:{},riseShowData:[],myChart:null,klineData:[],pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){var e=864e5,a=(new Date).getTime(),n=a-a%e-288e5,i=n+e;t.$emit("pick",[n,i])}}]},temKlineData:[],loadingTag:""}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])({crossPro:function(t){return t.crossPro},urls:function(t){return t.urls},calculateData:function(t){return t.calculateData},spotData:function(t){return t.accounts.filter((function(t){return"spot"==t.type}))[0]||{}}})),{},{currencys:function(){return this.crossPro.currencys.split(",")},periods:function(){return this.crossPro.period.split(",")},tableData:function(){return this.klineData.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{length:t.list.length,start:t.list.length?d(1e3*t.list[0].id):"-",end:t.list.length?d(1e3*t.list[t.list.length-1].id):"-",fc:g(t.list.map((function(e){return t.list.length?(e.close-t.list[0].open)/t.list[0].open:0})))})}))},ccData:function(){return this.klineData.map((function(t){var e=t.list,a=e.map((function(t,a){return Object(s["a"])(Object(s["a"])({},t),{},{time:d(1e3*t.id),rise:e.length?(t.close-e[0].open)/e[0].open:0})}));return{currency:t.currency,arr:a}}))},option:function(){this.ccData[0];return{roam:!1,title:{text:this.ccData.map((function(t){return t.currency})).join(",")},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:this.ccData.map((function(t){return{type:"category",boundaryGap:!1,data:t.arr.map((function(t){return t.time}))}})),yAxis:[{type:"value"}],series:this.ccData.map((function(t){return{name:t.currency,type:"line",areaStyle:{},emphasis:{focus:"series"},data:t.arr.map((function(t){return t.rise}))}})),dataZoom:[{show:!0,type:"inside",realtime:!0,start:0,end:100},{show:!0,type:"slider",realtime:!0,start:0,end:100}]}}}),created:function(){this.initWS()},mounted:function(){},destroyed:function(){this.ws.close()},methods:{getWSData1:function(t){var e=this;t&&"ok"==t.status&&(t=t.data,f("data.length",t.length,d(this.loadingTag.from),d(this.loadingTag.to)),t.length?(this.temKlineData=this.temKlineData.concat(t),setTimeout((function(){e.queryKLineNext()}),this.crossPro.timeGap)):this.loadingTag=null)},queryKLineNext:function(){var t=this.loadingTag.currency,e=this.loadingTag.period,a=this.loadingTag.size,n=this.loadingTag.to.getTime()+this.getTimeGap(e,a);this.queryKLine3(t,e,n)},queryKLineFromWS:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.crossPro.dates[0];return this.temKlineData=[],this.queryKLine3(t,e,a)},queryKLine3:function(t,e,a){var n=this,i=new Date(Math.min(new Date(a).getTime()+this.getTimeGap(e)*this.crossPro.size-6e4,new Date(this.crossPro.dates[1])));if(new Date(a)<new Date(i)){var r={currency:t,period:e,from:a,to:i,size:this.crossPro.size,tag:(new Date).getTime()};this.loadingTag=r,this.queryKLine4(r)}else this.loadingTag=null;return new Promise((function(t,e){n.superRunLoop(t)}))},queryKLine4:function(t){var e=t.currency,a=t.period,n=t.to,i=t.from,r=t.tag,s={req:"market.".concat(e,"usdt.kline.").concat(a),to:p(new Date(n)/1e3),from:p(new Date(i)/1e3),id:r};this.ws.send(JSON.stringify(s))},superRunLoop:function(t){var e=this;this.loadingTag?setTimeout((function(){e.superRunLoop(t)}),10):t(this.temKlineData)},daydayday:function(t){var e=864e5*(1==t?-1:1),a=this.crossPro.dates;this.crossPro.dates=[new Date(new Date(a[0]).getTime()+e),new Date(new Date(a[1]).getTime()+e)],this.getData3()},getData4:function(){},getData3:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading3=!0,t.klineData=[],a=t.currencys,n=[],i=0;case 5:if(!(i<a.length)){e.next=14;break}return r=a[i],e.next=9,t.queryKLineFromWS(r,t.crossPro.period);case 9:s=e.sent,n.push({currency:r,list:s});case 11:i++,e.next=5;break;case 14:return t.klineData=n,t.loading3=!1,t.calculateDouble1(),e.abrupt("return",n);case 18:case"end":return e.stop()}}),e)})))()},getTimeGap:function(t){var e=1;t.includes("hour")?e=60:t.includes("day")?e=1440:t.includes("mon")&&(e=43200);var a=parseInt(t)*e,n=60*a*1e3;return n},calculateDouble1:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f("计算完成"),t.loading2=!1,a=c["a"](document.getElementById("main")),t.myChart=a,t.myChart.setOption(t.option),setTimeout((function(){t.renderCharts()}),100);case 6:case"end":return e.stop()}}),e)})))()},renderCharts:function(){var t=this;this.ccData.forEach((function(e,a){var n=c["a"](document.getElementById("main"+a)),i=[e.arr.map((function(t){return t.time}))],r=[e.arr.map((function(t){return t.time}))],s=[e.arr.map((function(t){return t.rise}))],l=t.getOption(e.currency,i,r,s);n.setOption(l)}))},getOption:function(t,e,a,n){return{title:{text:t},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:e.map((function(t){return{type:"category",boundaryGap:!1,data:t.map((function(t){return t}))}})),yAxis:[{type:"value"}],series:n.map((function(t,e){return{name:a[e],type:"line",areaStyle:{},emphasis:{focus:"series"},data:t.map((function(t){return t}))}})),dataZoom:[{show:!0,type:"inside",realtime:!0,start:0,end:100},{show:!0,type:"slider",realtime:!0,start:0,end:100}]}},initWS:function(){var t=this,e=new WebSocket("wss://api.huobi.pro/ws");this.ws=e,e.onopen=function(e){f("Connection open ..."),t.disabled3=!1},e.onmessage=function(n){var i=n.data,r=new FileReader;r.readAsArrayBuffer(i);r.onload=function(){i=r.result;var n=a("d7ac"),s=n.inflate(i),l=h(s),o=JSON.parse(l);if(o.ping){var c=JSON.stringify({pong:o.ping});e.send(c)}else(o.id=t.loadingTag)?t.getWSData1(o):f("ext data",o);"error"==o.status&&(t.$message.error(o["err-msg"]),t.loading3=!1)}},e.onclose=function(e){f("Connection closed."),t.disabled3=!0,t.loadingTag=null,setTimeout((function(){t.initWS()}),1e3)}}}});function d(t){return a("5a0c")(t).format("YYYY-MM-DD HH:mm:ss")}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}function f(){var t;(t=console).log.apply(t,[d()].concat(Array.prototype.slice.call(arguments)))}function h(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(t[a]);return e}function g(t){for(var e=0,a=0,n=0;n<t.length;n++)e+=t[n];for(var i=e/t.length,r=0;r<t.length;r++)a+=Math.pow(i-t[r],2);return Math.sqrt(a/t.length,2)}var m=u,v=(a("6ca5"),a("2877")),b=Object(v["a"])(m,n,i,!1,null,null,null);e["default"]=b.exports},"3f71":function(t,e,a){},4:function(t,e){},"402e":function(t,e,a){},5:function(t,e){},"532a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"inputArea"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("币种")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.hedgePro.currencys,callback:function(e){t.$set(t.hedgePro,"currencys",e)},expression:"hedgePro.currencys"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("周期")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.hedgePro.period,callback:function(e){t.$set(t.hedgePro,"period",e)},expression:"hedgePro.period"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("数量")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.hedgePro.size,callback:function(e){t.$set(t.hedgePro,"size",e)},expression:"hedgePro.size"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("范围")]),a("el-date-picker",{attrs:{type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","00:00:00"],"picker-options":t.pickerOptions},on:{change:t.getData3},model:{value:t.hedgePro.dates,callback:function(e){t.$set(t.hedgePro,"dates",e)},expression:"hedgePro.dates"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("ws间隙")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.hedgePro.timeGap,callback:function(e){t.$set(t.hedgePro,"timeGap",e)},expression:"hedgePro.timeGap"}})],1),t._l(t.riseShowData,(function(e,n){return a("div",{key:n+Math.random(),staticClass:"item"},[a("div",[t._v(t._s(e.period))]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.currency0+"-"+e.currency1)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.tick0.close+"-"+e.tick1.close)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.rise0+"-"+e.rise1)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.rise)+" ")])])}))],2),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.daydayday(1)}}},[t._v("上一天")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.getData3()}}},[t._v("获取数据")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.daydayday(2)}}},[t._v("下一天")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.klineData=[]}}},[t._v("删除网络数据")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.calculateDouble1(t.klineData)}}},[t._v("计算")])],1),a("el-divider"),a("div",{staticClass:"data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"currency",label:"currency"}}),a("el-table-column",{attrs:{prop:"length",label:"length"}}),a("el-table-column",{attrs:{prop:"start",label:"start",width:"165"}}),a("el-table-column",{attrs:{prop:"end",label:"end",width:"165"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.klineData.splice(e.$index,1)}}},[t._v("删除")])]}}])})],1)],1),a("el-divider"),a("div",{staticStyle:{height:"500px"},attrs:{id:"main"}}),a("el-divider"),t._l(t.ccData,(function(t,e){return a("div",{key:e},[a("div",{staticStyle:{height:"500px"},attrs:{id:"main"+e}}),a("el-divider")],1)}))],2)},i=[],r=a("1da1"),s=a("5530"),l=(a("96cf"),a("4de4"),a("ac1f"),a("1276"),a("d81d"),a("99af"),a("d3b7"),a("caad"),a("2532"),a("159b"),a("fb6a"),a("fdab")),o=a("2f62"),c=(a("8429"),a("313e")),u=(a("bc3a"),{components:{HelloWorld:l["a"]},data:function(){return{input:"",loading:!1,loading2:!1,loading3:!1,disabled3:!0,ws:null,ccData:[],riseData:{},riseShowData:[],myChart:null,klineData:[],pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){var e=864e5,a=(new Date).getTime(),n=a-a%e+576e5,i=n+e;t.$emit("pick",[n,i])}}]},temKlineData:[],loadingTag:""}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])({hedgePro:function(t){return t.hedgePro},urls:function(t){return t.urls},calculateData:function(t){return t.calculateData},spotData:function(t){return t.accounts.filter((function(t){return"spot"==t.type}))[0]||{}}})),{},{currencys:function(){return this.hedgePro.currencys.split(",")},periods:function(){return this.hedgePro.period.split(",")},tableData:function(){return this.klineData.map((function(t){return{currency:t.currency0+","+t.currency1,length:t.list0.length,start:d(t.list0.length?1e3*t.list0[0].id:0),end:d(t.list1.length?1e3*t.list1[t.list1.length-1].id:0),time:d()}}))},option:function(){this.ccData[0];return{roam:!1,title:{text:"堆叠区域图"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.ccData.map((function(t){return t.currency0+"-"+t.currency1}))},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:this.ccData.map((function(t){return{type:"category",boundaryGap:!1,data:t.rises.map((function(t){return t.time}))}})),yAxis:[{type:"value"}],series:this.ccData.map((function(t){return{name:t.currency0+"-"+t.currency1,type:"line",areaStyle:{},emphasis:{focus:"series"},data:t.rises.map((function(t){return t.rise}))}})),dataZoom:[{show:!0,type:"inside",realtime:!0,start:0,end:100},{show:!0,type:"slider",realtime:!0,start:0,end:100}]}}}),created:function(){this.initWS()},mounted:function(){},destroyed:function(){this.ws.close()},methods:{getWSData1:function(t){var e=this;t&&"ok"==t.status&&(t=t.data,f("data.length",t.length,d(this.loadingTag.from),d(this.loadingTag.to)),t.length?(this.temKlineData=this.temKlineData.concat(t),setTimeout((function(){e.queryKLineNext()}),this.hedgePro.timeGap)):this.loadingTag=null)},queryKLineNext:function(){var t=this.loadingTag.currency,e=this.loadingTag.period,a=this.loadingTag.size,n=this.loadingTag.to.getTime()+this.getTimeGap(e,a);this.queryKLine3(t,e,n)},queryKLineFromWS:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hedgePro.dates[0];return this.temKlineData=[],this.queryKLine3(t,e,a)},queryKLine3:function(t,e,a){var n=this,i=new Date(Math.min(new Date(a).getTime()+this.getTimeGap(e)*this.hedgePro.size-6e4,new Date(this.hedgePro.dates[1])));if(new Date(a)<new Date(i)){var r={currency:t,period:e,from:a,to:i,size:this.hedgePro.size,tag:(new Date).getTime()};this.loadingTag=r,this.queryKLine4(r)}else this.loadingTag=null;return new Promise((function(t,e){n.superRunLoop(t)}))},queryKLine4:function(t){var e=t.currency,a=t.period,n=t.to,i=t.from,r=t.tag,s={req:"market.".concat(e,"usdt.kline.").concat(a),to:p(new Date(n)/1e3),from:p(new Date(i)/1e3),id:r};this.ws.send(JSON.stringify(s))},superRunLoop:function(t){var e=this;this.loadingTag?setTimeout((function(){e.superRunLoop(t)}),10):t(this.temKlineData)},daydayday:function(t){var e=864e5*(1==t?-1:1),a=this.hedgePro.dates;this.hedgePro.dates=[new Date(new Date(a[0]).getTime()+e),new Date(new Date(a[1]).getTime()+e)],this.getData3()},getData4:function(){},getData3:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,s,l,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading3=!0,t.klineData=[],a=t.currencys,n=[],i=0;case 5:if(!(i<a.length)){e.next=19;break}return r=a[i],s=void 0,l=void 0,r[r.length-1]>"9"?(s=r,l=r+"1s"):(s=r+"l",l=r+"s"),e.next=11,t.queryKLineFromWS(s,t.hedgePro.period);case 11:return o=e.sent,e.next=14,t.queryKLineFromWS(l,t.hedgePro.period);case 14:c=e.sent,n.push({currency0:s,currency1:l,list0:o,list1:c});case 16:i++,e.next=5;break;case 19:return t.klineData=n,t.loading3=!1,t.calculateDouble1(t.klineData),e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))()},getTimeGap:function(t){var e=1;t.includes("hour")?e=60:t.includes("day")?e=1440:t.includes("mon")&&(e=43200);var a=parseInt(t)*e,n=60*a*1e3;return n},calculateDouble1:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.map((function(t){return e.calculateData2(t)})),f("计算完成",n.length),e.loading2=!1,e.ccData=n,i=c["a"](document.getElementById("main")),e.myChart=i,e.myChart.setOption(e.option),setTimeout((function(){e.renderCharts()}),100);case 8:case"end":return a.stop()}}),a)})))()},renderCharts:function(){var t=this;this.ccData.forEach((function(e,a){var n=c["a"](document.getElementById("main"+a)),i=["rise0","rise1","rise"],r=[e.rises.map((function(t){return t.time}))],s=[e.rises.map((function(t){return t.rise0})),e.rises.map((function(t){return t.rise1})),e.rises.map((function(t){return t.rise}))],l=t.getOption(e.currency0+"-"+e.currency1,i,r,i,s);n.setOption(l)}))},getOption:function(t,e,a,n,i){return{title:{text:t},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:e},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:a.map((function(t){return{type:"category",boundaryGap:!1,data:t.map((function(t){return t}))}})),yAxis:[{type:"value"}],series:i.map((function(t,e){return{name:n[e],type:"line",areaStyle:{},emphasis:{focus:"series"},data:t.map((function(t){return t}))}})),dataZoom:[{show:!0,type:"inside",realtime:!0,start:0,end:100},{show:!0,type:"slider",realtime:!0,start:0,end:100}]}},calculateData2:function(t){var e=t.list0,a=t.list1,n=[];e.some((function(t,i){var r=e[i],s=a[i],l=(r.close-e[0].open)/e[0].open,o=(s.close-a[0].open)/a[0].open,c=l+o;n.push({time:d(1e3*t.id),rise:c,rise0:l,rise1:o})}));var i={currency0:t.currency0,currency1:t.currency1,rises:n};return i},initWS:function(){var t=this,e=new WebSocket("wss://api.huobi.pro/ws");this.ws=e,e.onopen=function(e){f("Connection open ..."),t.disabled3=!1},e.onmessage=function(n){var i=n.data,r=new FileReader;r.readAsArrayBuffer(i);r.onload=function(){i=r.result;var n=a("d7ac"),s=n.inflate(i),l=h(s),o=JSON.parse(l);if(o.ping){var c=JSON.stringify({pong:o.ping});e.send(c)}else(o.id=t.loadingTag)?t.getWSData1(o):f("ext data",o);"error"==o.status&&(t.$message.error(o["err-msg"]),t.loading3=!1)}},e.onclose=function(e){f("Connection closed."),t.disabled3=!0,t.loadingTag=null,setTimeout((function(){t.initWS()}),1e3)}}}});function d(t){return a("5a0c")(t).format("YYYY-MM-DD HH:mm:ss")}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}function f(){var t;(t=console).log.apply(t,[d()].concat(Array.prototype.slice.call(arguments)))}function h(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(t[a]);return e}var g=u,m=(a("2b3d2"),a("2877")),v=Object(m["a"])(g,n,i,!1,null,null,null);e["default"]=v.exports},"56d7":function(t,e,a){"use strict";a.r(e);var n,i,r=a("5530"),s=a("2909"),l=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("99af"),a("b64b"),a("2b0e")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],u=a("1da1"),d=(a("96cf"),a("d81d"),a("2f62")),p={cacheKey:"CacheSP"},f={computed:Object(r["a"])({},Object(d["c"])({state:function(t){return t}})),watch:{state:{deep:!0,handler:function(t){this.saveData()}},$route:function(t){this.checkRoute(t)}},created:function(){this.loadData()},onHide:function(){},methods:Object(r["a"])(Object(r["a"])({},Object(d["b"])({setState:"setState"})),{},{saveData:function(){var t=this,e={};this.$store.state.saveKeys.map((function(a){e[a]=t.$store.state[a]})),localStorage[p.cacheKey]=JSON.stringify(e)},loadData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{a=JSON.parse(localStorage[p.cacheKey]),a?t.setState(a):t.saveData()}catch(n){console.log("初始化数据读取错误")}case 1:case"end":return e.stop()}}),e)})))()},checkRoute:function(t){}})},h=f,g=a("2877"),m=Object(g["a"])(h,n,i,!1,null,null,null),v=m.exports,b={mixins:[v]},y=b,D=Object(g["a"])(y,o,c,!1,null,null,null),w=D.exports,k=(a("d3b7"),a("ddb0"),a("3ca3"),a("8c4f")),_=a("bb51");l["default"].use(k["a"]);var x=a("c321"),C=x.keys().map((function(t){return{path:"/"+t.replaceAll("./","").replaceAll(".vue",""),component:x(t).default||x(t)}})),S=[].concat(Object(s["a"])(C),[{path:"/",name:"Home",component:_["default"]},{path:"/double",name:"double",component:function(){return Promise.resolve().then(a.bind(null,"8b12"))}},{path:"/about",name:"About",component:function(){return Promise.resolve().then(a.bind(null,"f820"))}}]),P=new k["a"]({routes:S}),O=P;a("159b"),a("caad"),a("2532");l["default"].use(d["a"]);var $=new d["a"].Store({state:{saveKeys:["config1","config2","config3","hedgePro","klineData2","calculateData","accounts","crossPro"],config1:{currencys:"btc,eth",period:"1min,5min",size:"2000",assetsAll:1e4,assetsSplit:10,assetsScale:1.2,riseKey:.005,gas:.002,filterRise:.05,dates:[],timeGap:500},config2:{currencys:"btc,eth",period:"1min,5min",size:"2000",assetsAll:1e4,assetsSplit:10,assetsScale:1.2,riseKey:.005,gas:.002,filterRise:.05,dates:[],timeGap:500},config3:{currencys:"btc,eth",period:"1min,5min",size:"2000",assetsAll:1e4,assetsSplit:10,assetsScale:1.2,riseKey:.005,gas:.002,filterRise:.05,dates:[],timeGap:500},hedgePro:{currencys:"btc,eth",period:"1min",size:"899",dates:[],timeGap:500,klineData:[]},crossPro:{currencys:"btc,eth",period:"1min",size:"899",dates:[],timeGap:500,klineData:[]},klineData:[],calculateData:[],ccData:[],urls:{klineUrl:"https://api.huobi.pro/market/history/kline",accounts:"https://api.huobi.pro/v1/account/accounts",place:"https://api.huobi.pro/v1/order/orders/place"},accessKey:"ghjrgrft5g-dbcef6d9-e41da3d2-24be7",secretKey:"24459726-0c2a2874-4431e7f2-5f420",accounts:[]},mutations:{setState:function(t,e){Object.keys(e).forEach((function(a){t.saveKeys.includes(a)&&(t[a]=e[a])}))}},actions:{},modules:{}}),j=a("5c96"),T=a.n(j),A=(a("0fae"),a("8429")),E=a.n(A),K=arguments;l["default"].use(T.a),l["default"].config.productionTip=!1,window.app=new l["default"]({router:O,store:$,render:function(t){return t(w)}}).$mount("#app"),l["default"].prototype.$util={_D:function(t){return a("5a0c")(t).format("YYYY-MM-DD HH:mm:ss")},_N:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)},Log:function(){var t;(t=console).log.apply(t,[l["default"].prototype.$util._D()].concat(Object(s["a"])(K)))},huobiParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",i=a("5a0c")((new Date).getTime()-288e5).format("YYYY-MM-DDTHH:mm:ss"),s=$.state.accessKey,l=$.state.secretKey,o=Object(r["a"])({Timestamp:i,AccessKeyId:s,SignatureMethod:"HmacSHA256",SignatureVersion:"2"},t),c="".concat(n.toUpperCase(),"\napi.huobi.pro\n").concat(e.replaceAll("https://api.huobi.pro",""),"\n"),u="",d=Object.keys(o).sort();for(var p in d){var f=d[p];u+="".concat(u?"&":"").concat(f,"=").concat(encodeURIComponent(o[f]))}var h=c+u;return console.log(h),o.Signature=window.CryptoJS.enc.Base64.stringify(window.CryptoJS.HmacSHA256(h,l)),o}},window.CryptoJS=E.a},6:function(t,e){},"6ca5":function(t,e,a){"use strict";a("3f71")},7:function(t,e){},"7cef":function(t,e,a){},8:function(t,e){},"8b12":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"inputArea"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("币种")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.currencys,callback:function(e){t.$set(t.config2,"currencys",e)},expression:"config2.currencys"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("周期")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.period,callback:function(e){t.$set(t.config2,"period",e)},expression:"config2.period"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("数量")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.size,callback:function(e){t.$set(t.config2,"size",e)},expression:"config2.size"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("范围")]),a("el-date-picker",{attrs:{type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["18:00:00","18:00:00"]},model:{value:t.config2.dates,callback:function(e){t.$set(t.config2,"dates",e)},expression:"config2.dates"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("ws间隙")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.timeGap,callback:function(e){t.$set(t.config2,"timeGap",e)},expression:"config2.timeGap"}})],1)]),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.getData(1)}}},[t._v("获取数据")]),a("el-button",{attrs:{type:"primary",loading:t.loading2},on:{click:function(e){return t.getData(2)}}},[t._v("获取数据2")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.getData3()}}},[t._v("获取数据3")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.testClick()}}},[t._v(t._s(t.spotData.id||"获取账户ID"))]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.testClick()}}},[t._v("测试2")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.$store.state.klineData=[]}}},[t._v("删除网络数据")])],1),a("div",{staticClass:"data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"currency",label:"currency",width:"80"}}),a("el-table-column",{attrs:{prop:"period",label:"period",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"price",width:"80"}}),a("el-table-column",{attrs:{prop:"length",label:"length"}}),a("el-table-column",{attrs:{prop:"start",label:"start",width:"165"}}),a("el-table-column",{attrs:{prop:"end",label:"end",width:"165"}}),a("el-table-column",{attrs:{prop:"time",label:"time",width:"165"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.$store.state.klineData.splice(e.$index,1)}}},[t._v("删除")])]}}])})],1)],1),a("el-divider"),a("div",{staticClass:"inputArea"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("默认U额")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.assetsAll,callback:function(e){t.$set(t.config2,"assetsAll",e)},expression:"config2.assetsAll"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("每笔交易额")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.assetsSplit,callback:function(e){t.$set(t.config2,"assetsSplit",e)},expression:"config2.assetsSplit"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("平衡值")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.assetsScale,callback:function(e){t.$set(t.config2,"assetsScale",e)},expression:"config2.assetsScale"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("交易条件")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.riseKey,callback:function(e){t.$set(t.config2,"riseKey",e)},expression:"config2.riseKey"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("燃料费")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.gas,callback:function(e){t.$set(t.config2,"gas",e)},expression:"config2.gas"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("filterRise")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config2.filterRise,callback:function(e){t.$set(t.config2,"filterRise",e)},expression:"config2.filterRise"}})],1)]),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",loading:t.loading2},on:{click:function(e){return t.calculateDouble(t.klineData)}}},[t._v("计算")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.testClick(t.klineData)}}},[t._v("测试点击")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.$store.state.ccData=[]}}},[t._v("删除计算数据")])],1),a("div",{staticClass:"data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{data:t.ccData,border:""}},[a("el-table-column",{attrs:{prop:"time",label:"time",width:"165"}}),a("el-table-column",{attrs:{prop:"currency",label:"currency",width:"100"}}),a("el-table-column",{attrs:{prop:"period",label:"period"}}),a("el-table-column",{attrs:{prop:"assetsAll",label:"本金"}}),a("el-table-column",{attrs:{prop:"change",label:"change",sortable:""}}),a("el-table-column",{attrs:{prop:"rate",label:"rate",sortable:""}}),a("el-table-column",{attrs:{prop:"assetsSplit",label:"assetsSplit"}}),a("el-table-column",{attrs:{prop:"assetsScale",label:"assetsScale"}}),a("el-table-column",{attrs:{prop:"riseKey",label:"riseKey"}}),a("el-table-column",{attrs:{prop:"assets",label:"assets"}}),a("el-table-column",{attrs:{prop:"assets0",label:"assets0"}}),a("el-table-column",{attrs:{prop:"assets1",label:"assets1"}}),a("el-table-column",{attrs:{prop:"assetsNum0",label:"assetsNum0"}}),a("el-table-column",{attrs:{prop:"assetsNum1",label:"assetsNum1"}}),a("el-table-column",{attrs:{prop:"length",label:"length"}}),a("el-table-column",{attrs:{prop:"buyCount",label:"buyCount"}}),a("el-table-column",{attrs:{prop:"sellCount",label:"sellCount"}}),a("el-table-column",{attrs:{prop:"buyError",label:"buyError"}}),a("el-table-column",{attrs:{prop:"sellError",label:"sellError"}}),a("el-table-column",{attrs:{prop:"gas",label:"gas"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.$store.state.ccData.splice(e.$index,1)}}},[t._v("删除")])]}}])})],1)],1),a("el-divider")],1)},i=[],r=a("1da1"),s=a("2909"),l=a("5530"),o=(a("96cf"),a("4de4"),a("ac1f"),a("1276"),a("d81d"),a("99af"),a("a434"),a("159b"),a("d3b7"),a("3ca3"),a("ddb0"),a("fb6a"),a("fdab")),c=a("2f62"),u=(a("8429"),a("bc3a")),d={components:{HelloWorld:o["a"]},data:function(){return{input:"",loading:!1,loading2:!1,loading3:!1,disabled3:!0,ws:null}},computed:Object(l["a"])(Object(l["a"])({},Object(c["c"])({config2:function(t){return t.config2},urls:function(t){return t.urls},klineData:function(t){return t.klineData},calculateData:function(t){return t.calculateData},ccData:function(t){return t.ccData},spotData:function(t){return t.accounts.filter((function(t){return"spot"==t.type}))[0]||{}}})),{},{currencys:function(){return this.config2.currencys.split(",")},periods:function(){return this.config2.period.split(",")},tableData:function(){return this.klineData.map((function(t){return{currency:t.currency,period:t.period,price:t.price,length:t.list.length,start:h(t.list.length?1e3*t.list[0].id:0),end:h(t.list.length?1e3*t.list[t.list.length-1].id:0),time:h()}}))}}),created:function(){var t=this,e=new WebSocket("wss://api.huobi.pro/ws");this.ws=e,e.onopen=function(e){v("Connection open ..."),t.disabled3=!1},e.onmessage=function(n){var i=n.data,r=new FileReader;r.readAsArrayBuffer(i);r.onload=function(){i=r.result;var n=a("d7ac"),s=n.inflate(i),l=b(s),o=JSON.parse(l);if(o.ping){var c=JSON.stringify({pong:o.ping});e.send(c)}else t.getWSData(o);"error"==o.status&&(t.$message.error(o["err-msg"]),t.loading3=!1)}},e.onclose=function(e){v("Connection closed."),t.disabled3=!0}},destroyed:function(){this.ws.close()},methods:{getWSData:function(t){var e=this;if(t&&"ok"==t.status){if(t=t.data,this.wsParams.index<this.klineData.length)this.klineData[this.wsParams.index].list=[].concat(Object(s["a"])(this.klineData[this.wsParams.index].list),Object(s["a"])(t)),this.wsParams.arr[this.wsParams.index].index++;else{var a=this.wsParams.arr[this.wsParams.index];this.klineData.push({currency:a.currency,period:a.period,list:t,price:"-"}),this.wsParams.arr[this.wsParams.index].index++}var n=this.wsParams.arr[this.wsParams.index];if(n.index>=n.list.length&&this.wsParams.index++,this.wsParams.index>=this.klineData.length&&n.index>=n.length)return void(this.loading3=!1);setTimeout((function(){e.queryKLineFromWS()}),this.config2.timeGap)}else v("getWSData",JSON.stringify(t))},queryKLineFromWS:function(){if(this.wsParams.index<this.wsParams.arr.length){var t=this.wsParams.arr[this.wsParams.index],e=t.currency,a=t.period,n=t.list[t.index],i=n.from,r=n.to;return v(e,a,h(1e3*i),h(1e3*r)),void this.ws.send(JSON.stringify({req:"market.".concat(e,"usdt.kline.").concat(a),to:r,from:i}))}v("queryKLineFromWS end"),this.loading3=!1},testClick:function(t){var e=this;if(2==t.length){var a=t[0].list,n=t[1].list;for(var i in a)if(a[i].id!=n[i].id)return void this.$message.error("数据对时间异常"+i);this.loading2=!0;var r=[this.config2.assetsAll,this.config2.assetsSplit,this.config2.assetsScale,this.config2.riseKey,this.config2.gas].map((function(t){var e=[],a=String(t).split("-");if(a.length>1){var n=a[1].split("."),i=1;n.length>1&&(i=Math.pow(10,-n[1].length));var r=parseFloat(a[0]),s=r;e.push(r);while(parseFloat(e[e.length-1])<parseFloat(a[1]))s=m(e[e.length-1]+i,1==i?0:n[1].length),e.push(s)}else e=a;return e})),s=new Worker("./work.js");s.postMessage({data:r,klineData:t}),s.onmessage=function(t){e.loading2=!1;var a=t.data;v("计算完成",a.length),e.$store.state.ccData=a,s.terminate()}}else this.$message.error("请选择一对数据")},testClick2:function(){},handleClick:function(t,e){1==e?this.$store.state.calculateData=[].concat(Object(s["a"])(this.calculate1([this.klineData[t.$index]])),Object(s["a"])(this.$store.state.calculateData)):2==e&&this.$store.state.calculateData.splice(t.$index,1,this.calculate1([this.calculateData[t.$index].item])[0])},getData3:function(){this.loading3=!0,this.$store.state.klineData=[];var t=this.currencys,e=this.periods,a=parseInt(this.config2.size),n=new Date(this.config2.dates[0]),i=new Date(this.config2.dates[1]),r=[];t.forEach((function(t){e.forEach((function(e){var s=parseInt(e),l=s*a*60,o=n.getTime()/1e3,c=[];while(o<i.getTime()/1e3){var u={from:o,to:o+l>i.getTime()/1e3?i.getTime()/1e3:o+l};u.fromT=h(1e3*u.from),u.toT=h(1e3*u.to),c.push(u),o+=l+60*s}r.push({currency:t,period:e,list:c,index:0})}))})),this.wsParams={arr:r,index:0},this.queryKLineFromWS()},getData:function(t){var e=this,a=this.currencys,n=this.periods,i=[],r=[];a.forEach((function(a){n.forEach((function(n){i.push(1==t?p(a,n,e.config2,e.urls.klineUrl):f(a,n,e.config2,"http://localhost:8888/",e.config2.dates)),r.push({currency:a,period:n,list:[],price:0})}))})),console.log(a),console.log(n),this.loading=!0,Promise.all(i).then((function(t){e.loading=!1,t.forEach((function(t,e){r[e].list=Object(s["a"])(t).reverse(),r[e].price=r[e].list.length?r[e].list[0].close:0})),e.$store.state.klineData=[].concat(r);var a=e.$store.state.klineData[0].list,n=e.$store.state.klineData[1].list;a[0].id<n[0].id&&a.some((function(t,e){t.id==n[0].id&&a.splice(0,e)})),a[0].id>n[0].id&&n.some((function(t,e){t.id==a[0].id&&n.splice(0,e)})),a.length>n.length&&a.splice(n.length,a.length-n.length),n.length>a.length&&n.splice(a.length,n.length-a.length)})).catch((function(t){console.log(t)}))},calculateDouble:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:2==t.length?(n=t[0].list,i=t[1].list,n.some((function(t,a){if(n[a].id!=i[a].id)return e.$message.error("数据对时间异常"+a),!0})),e.loading2=!0,r=[e.config2.assetsAll,e.config2.assetsSplit,e.config2.assetsScale,e.config2.riseKey,e.config2.gas].map((function(t){var e=[],a=String(t).split("-");if(a.length>1){var n=a[1].split("."),i=1;n.length>1&&(i=Math.pow(10,-n[1].length));var r=parseFloat(a[0]),s=r;e.push(r);while(parseFloat(e[e.length-1])<parseFloat(a[1]))s=m(e[e.length-1]+i,1==i?0:n[1].length),e.push(s)}else e=a;return e})),s=[],r[0].forEach((function(t){r[1].forEach((function(e){r[2].forEach((function(a){r[3].forEach((function(n){r[4].forEach((function(i){s.push([t,e,a,n,i])}))}))}))}))})),l=[],s.forEach((function(a){l.push(e.calculateDouble2(t,a[0],a[1],a[2],a[3],a[4]))})),v("计算完成",l.length),e.loading2=!1,e.$store.state.ccData=l.filter((function(t){return t.rate>parseFloat(e.config2.filterRise)}))):e.$message.error("请选择一对数据");case 1:case"end":return a.stop()}}),a)})))()},calculateDouble2:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.005,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.002;n=parseFloat(n),i=parseFloat(i),r=parseFloat(r),s=parseFloat(s);var o={buyCount:0,sellCount:0,buyError:0,sellError:0,assets:parseFloat(a),assetsNum0:a/t[0].list[0].close,assetsNum1:a/t[1].list[0].close};t[0].list.forEach((function(t,l){e.calculateDouble3(t,"assetsNum0",o,a,n,i,r,s)}));var c=Object(l["a"])(Object(l["a"])({currency:t[0].currency+","+t[1].currency,period:t[0].period,length:t[0].list.length,assets0:g(o.assetsNum0*t[0].list[t[0].list.length-1].close,2),assets1:g(o.assetsNum1*t[1].list[t[1].list.length-1].close,2),assetsAll:a,assetsSplit:n,assetsScale:i,riseKey:r,gas:s},o),{},{time:h(),assets:g(o.assets,2)});c.change=g(c.assets+c.assets0+c.assets1-3*a,2);var u=(t[0].list[t[0].list.length-1].id-t[0].list[0].id)/86400;return c.rate=c.change/(3*parseFloat(a))/u,c},calculateDouble3:function(t,e,a,n,i,r,s,l){var o=i*r,c=a[e]*t.close,u=(t.close-t.open)/t.open;if(Math.abs(u)>parseFloat(s))if(u>0){var d=c>a.assets?o:i,p=parseFloat(d)/t.close;a[e]>p?(a.assets+=parseFloat(d)*(1-parseFloat(l)),a[e]-=parseFloat(d)/t.close,a.sellCount++):a.sellError++}else{var f=c>a.assets?i:o;a.assets>f?(a.assets-=f,a[e]+=f/t.close*(1-parseFloat(l)),a.buyCount++):a.buyError++}}}};function p(t,e,a,n){var i=a.size,r={symbol:(t+"usdt").toLowerCase(),period:e,size:i};return new Promise((function(t,e){u({method:"get",url:n,params:r}).then((function(e){if("error"!=e.data.status){var a=e.data.data;t(a)}else v("错误:GetRecords1",e),t([])})).catch((function(e){v("错误:GetRecords",e),t([])}))}))}function f(t,e,a,n,i){var r=a.size,s={currency:t,period:e,size:r,dates:JSON.stringify(i)};return new Promise((function(t,e){u({method:"get",url:n,params:s}).then((function(e){t(e.data)})).catch((function(e){v("错误:GetRecords",e),t([])}))}))}function h(t){return a("5a0c")(t).format("YYYY-MM-DD HH:mm:ss")}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function v(){var t;(t=console).log.apply(t,[h()].concat(Array.prototype.slice.call(arguments)))}function b(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(t[a]);return e}var y=d,D=(a("1ddb"),a("2877")),w=Object(D["a"])(y,n,i,!1,null,null,null);e["default"]=w.exports},"8d91":function(t,e,a){},9:function(t,e){},b2c8:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"inputArea"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("币种")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config3.currencys,callback:function(e){t.$set(t.config3,"currencys",e)},expression:"config3.currencys"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("周期")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config3.period,callback:function(e){t.$set(t.config3,"period",e)},expression:"config3.period"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("数量")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config3.size,callback:function(e){t.$set(t.config3,"size",e)},expression:"config3.size"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("范围")]),a("el-date-picker",{attrs:{type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","00:00:00"]},on:{change:t.getData3},model:{value:t.config3.dates,callback:function(e){t.$set(t.config3,"dates",e)},expression:"config3.dates"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("ws间隙")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config3.timeGap,callback:function(e){t.$set(t.config3,"timeGap",e)},expression:"config3.timeGap"}})],1),t._l(t.riseShowData,(function(e,n){return a("div",{key:n+Math.random(),staticClass:"item"},[a("div",[t._v(t._s(e.period))]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.currency0+"-"+e.currency1)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.tick0.close+"-"+e.tick1.close)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.rise0+"-"+e.rise1)+" ")]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(e.rise)+" ")])])}))],2),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.daydayday(1)}}},[t._v("上一天")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.getData3()}}},[t._v("获取数据")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.daydayday(2)}}},[t._v("下一天")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.klineData=[]}}},[t._v("删除网络数据")]),a("el-button",{attrs:{type:"primary",loading:t.loading3,disabled:t.disabled3},on:{click:function(e){return t.calculateDouble1(t.klineData)}}},[t._v("计算")])],1),a("div",{staticClass:"data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"currency",label:"currency",width:"80"}}),a("el-table-column",{attrs:{prop:"period",label:"period",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"price",width:"80"}}),a("el-table-column",{attrs:{prop:"length",label:"length"}}),a("el-table-column",{attrs:{prop:"start",label:"start",width:"165"}}),a("el-table-column",{attrs:{prop:"end",label:"end",width:"165"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.klineData.splice(e.$index,1)}}},[t._v("删除")])]}}])})],1)],1),a("el-divider"),a("div",{staticStyle:{height:"500px"},attrs:{id:"main"}})],1)},i=[],r=a("1da1"),s=a("2909"),l=a("5530"),o=(a("96cf"),a("4de4"),a("ac1f"),a("1276"),a("d81d"),a("99af"),a("159b"),a("caad"),a("2532"),a("d3b7"),a("fb6a"),a("fdab")),c=a("2f62"),u=(a("8429"),a("313e")),d=(a("bc3a"),{components:{HelloWorld:o["a"]},data:function(){return{input:"",loading:!1,loading2:!1,loading3:!1,disabled3:!0,ws:null,ccData:[],riseData:{},riseShowData:[],myChart:null,klineData:[]}},computed:Object(l["a"])(Object(l["a"])({},Object(c["c"])({config3:function(t){return t.config3},urls:function(t){return t.urls},calculateData:function(t){return t.calculateData},spotData:function(t){return t.accounts.filter((function(t){return"spot"==t.type}))[0]||{}}})),{},{currencys:function(){return this.config3.currencys.split(",")},periods:function(){return this.config3.period.split(",")},tableData:function(){return this.klineData.map((function(t){return{currency:t.currency,period:t.period,price:t.price,length:t.list.length,start:p(t.list.length?1e3*t.list[0].id:0),end:p(t.list.length?1e3*t.list[t.list.length-1].id:0),time:p()}}))},option:function(){var t=this,e=this.ccData[0];return e?{title:{text:e.currency0+"-"+e.currency1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.ccData.map((function(t){return t.currency0+"-"+t.currency1}))},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:this.ccData.map((function(t){return{type:"category",boundaryGap:!1,data:t.rises.map((function(t){return t.time}))}})),yAxis:[{type:"value"}],series:this.ccData.map((function(e){return{name:t.ccData.map((function(t){return t.currency0+"-"+t.currency1})),type:"line",stack:"总量",areaStyle:{},emphasis:{focus:"series"},data:e.rises.map((function(t){return t.rise}))}})),dataZoom:[{show:!0,realtime:!0,start:0,end:100},{type:"inside",realtime:!0,start:0,end:50}]}:{}}}),created:function(){var t=this,e=new WebSocket("wss://api.huobi.pro/ws");this.ws=e,e.onopen=function(e){g("Connection open ..."),t.disabled3=!1},e.onmessage=function(n){var i=n.data,r=new FileReader;r.readAsArrayBuffer(i);r.onload=function(){i=r.result;var n=a("d7ac"),s=n.inflate(i),l=m(s),o=JSON.parse(l);if(o.ping){var c=JSON.stringify({pong:o.ping});e.send(c)}else(o.id="111")&&t.getWSData1(o),(o.id="222")&&t.getWSData2(o);"error"==o.status&&(t.$message.error(o["err-msg"]),t.loading3=!1)}},e.onclose=function(e){g("Connection closed."),t.disabled3=!0}},mounted:function(){var t=u["a"](document.getElementById("main"));this.myChart=t,t.setOption(this.option)},destroyed:function(){this.ws.close()},methods:{getWSData1:function(t){var e=this;if(t&&"ok"==t.status){if(t=t.data,this.wsParams.index<this.klineData.length)this.klineData[this.wsParams.index].list=[].concat(Object(s["a"])(this.klineData[this.wsParams.index].list),Object(s["a"])(t)),this.wsParams.arr[this.wsParams.index].index++;else{var a=this.wsParams.arr[this.wsParams.index];this.klineData.push({currency:a.currency,period:a.period,list:t,price:"-"}),this.wsParams.arr[this.wsParams.index].index++}var n=this.wsParams.arr[this.wsParams.index];if(n.index>=n.list.length&&this.wsParams.index++,this.wsParams.index>=this.klineData.length&&n.index>=n.length)return void(this.loading3=!1);setTimeout((function(){e.queryKLineFromWS()}),this.config3.timeGap)}},getWSData2:function(t){if(t.ch){this.riseData[t.ch]=t.tick;var e=[],a=this.periods;for(var n in a){var i=a[n],r=this.currencys[0],s=this.currencys[1],l=this.riseData["market.".concat(r,"usdt.kline.").concat(i)]||{},o=this.riseData["market.".concat(s,"usdt.kline.").concat(i)]||{},c={period:i,currency0:r,currency1:s,tick0:l,tick1:o,rise0:(l.close-l.open)/l.open,rise1:(o.close-o.open)/o.open};c.rise=f(c.rise0+c.rise1,4),c.rise0=f(c.rise0,4),c.rise1=f(c.rise1,4),e.push(c)}this.riseShowData=e}},queryKLineFromWS:function(){if(this.wsParams.index<this.wsParams.arr.length){var t=this.wsParams.arr[this.wsParams.index],e=t.currency,a=t.period,n=t.list[t.index],i=n.from,r=n.to;return g(e,a,p(1e3*i),p(1e3*r)),void this.ws.send(JSON.stringify({req:"market.".concat(e,"usdt.kline.").concat(a),to:r,from:i,id:"111"}))}g("queryKLineFromWS end"),this.loading3=!1,this.calculateDouble1(this.klineData)},daydayday:function(t){var e=864e5*(1==t?-1:1),a=this.config3.dates;this.config3.dates=[new Date(new Date(a[0]).getTime()+e),new Date(new Date(a[1]).getTime()+e)],this.getData3()},getData3:function(){this.loading3=!0,this.klineData=[];var t=this.currencys,e=this.periods,a=parseInt(this.config3.size),n=new Date(this.config3.dates[0]),i=new Date(this.config3.dates[1]),r=[];t.forEach((function(t){e.forEach((function(e){var s=1;e.includes("hour")?s=60:e.includes("day")?s=1440:e.includes("mon")&&(s=43200);var l=parseInt(e)*s,o=l*a*60,c=n.getTime()/1e3,u=[];while(c<i.getTime()/1e3){var d={from:c,to:c+o>i.getTime()/1e3?i.getTime()/1e3:c+o};d.fromT=p(1e3*d.from),d.toT=p(1e3*d.to),u.push(d),c+=o+60*l}r.push({currency:t,period:e,list:u,index:0})}))})),this.wsParams={arr:r,index:0},this.queryKLineFromWS()},calculateDouble1:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:2==t.length?(n=t[0].list,i=t[1].list,n.some((function(t,a){if(n[a].id!=i[a].id)return e.$message.error("数据对时间异常"+a),!0})),e.loading2=!0,r=[e.config3.assetsAll,e.config3.assetsSplit,e.config3.assetsScale,e.config3.riseKey,e.config3.gas].map((function(t){var e=[],a=String(t).split("_");if(a.length>1){var n=a[1].split("."),i=1;n.length>1&&(i=Math.pow(10,-n[1].length));var r=parseFloat(a[0]),s=r;e.push(r);while(parseFloat(e[e.length-1])<parseFloat(a[1]))s=h(e[e.length-1]+i,1==i?0:n[1].length),e.push(s)}else e=a;return e})),s=[],r[0].forEach((function(t){r[1].forEach((function(e){r[2].forEach((function(a){r[3].forEach((function(n){r[4].forEach((function(i){s.push([t,e,a,n,i])}))}))}))}))})),l=[],s.forEach((function(a){l.push(e.calculateData2(t,parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])))})),g("计算完成",l.length),e.loading2=!1,e.ccData=l,e.myChart.setOption(e.option)):e.$message.error("请选择一对数据");case 1:case"end":return a.stop()}}),a)})))()},calculateData2:function(t){var e=t[0].list,a=t[1].list,n={asset:0,num0:0,num1:0,count:0,item0:e[0],item1:a[0]},i=[];e.some((function(t,r){var s=e[r],l=a[r],o=(s.high-n.item0.open)/n.item0.open,c=(l.high-n.item1.open)/n.item1.open,u=o+c;i.push({time:p(1e3*t.id),rise:u})}));var r={currency0:t[0].currency,currency1:t[1].currency,rises:i};return r}}});function p(t){return a("5a0c")(t).format("YYYY-MM-DD HH:mm:ss")}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function g(){var t;(t=console).log.apply(t,[p()].concat(Array.prototype.slice.call(arguments)))}function m(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(t[a]);return e}var v=d,b=(a("262c"),a("2877")),y=Object(b["a"])(v,n,i,!1,null,null,null);e["default"]=y.exports},b7c4:function(t,e,a){},bb51:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"inputArea"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("币种")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config1.currencys,callback:function(e){t.$set(t.config1,"currencys",e)},expression:"config1.currencys"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("周期")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config1.period,callback:function(e){t.$set(t.config1,"period",e)},expression:"config1.period"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("数量")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config1.size,callback:function(e){t.$set(t.config1,"size",e)},expression:"config1.size"}})],1)]),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.getData}},[t._v("获取数据")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.testClick()}}},[t._v(t._s(t.spotData.id||"获取账户ID"))]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.testClick2()}}},[t._v("测试2")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.$store.state.klineData=[]}}},[t._v("删除网络数据")])],1),a("div",{staticClass:"data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"currency",label:"currency",width:"80"}}),a("el-table-column",{attrs:{prop:"period",label:"period",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"price",width:"80"}}),a("el-table-column",{attrs:{prop:"start",label:"start",width:"165"}}),a("el-table-column",{attrs:{prop:"end",label:"end",width:"165"}}),a("el-table-column",{attrs:{prop:"time",label:"time",width:"165"}}),a("el-table-column",{attrs:{prop:"length",label:"length"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.handleClick(e,1)}}},[t._v("计算")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.$store.state.klineData.splice(e.$index,1)}}},[t._v("删除")])]}}])})],1)],1),a("el-divider"),a("div",{staticClass:"inputArea"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("每笔交易额")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config1.assetsSplit,callback:function(e){t.$set(t.config1,"assetsSplit",e)},expression:"config1.assetsSplit"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("默认U额")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config1.assetsAll,callback:function(e){t.$set(t.config1,"assetsAll",e)},expression:"config1.assetsAll"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("交易条件")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config1.riseKey,callback:function(e){t.$set(t.config1,"riseKey",e)},expression:"config1.riseKey"}})],1),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("燃料费")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.config1.gas,callback:function(e){t.$set(t.config1,"gas",e)},expression:"config1.gas"}})],1)]),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",loading:t.loading2},on:{click:function(e){return t.calculate(t.klineData)}}},[t._v("开始计算")]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.$store.state.calculateData=[]}}},[t._v("删除计算数据")])],1),a("div",{staticClass:"data"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{data:t.calculateData,border:""}},[a("el-table-column",{attrs:{prop:"currency",label:"currency"}}),a("el-table-column",{attrs:{prop:"period",label:"period"}}),a("el-table-column",{attrs:{prop:"income",label:"income",sortable:"",width:"200"}}),a("el-table-column",{attrs:{prop:"fprice",label:"fprice"}}),a("el-table-column",{attrs:{prop:"price",label:"price"}}),a("el-table-column",{attrs:{prop:"length",label:"length"}}),a("el-table-column",{attrs:{prop:"assetsAll",label:"默认U额"}}),a("el-table-column",{attrs:{prop:"numAll",label:"默认币数"}}),a("el-table-column",{attrs:{prop:"assets",label:"assets"}}),a("el-table-column",{attrs:{prop:"num",label:"num"}}),a("el-table-column",{attrs:{prop:"all1",label:"all1"}}),a("el-table-column",{attrs:{prop:"all2",label:"all2"}}),a("el-table-column",{attrs:{prop:"all3",label:"all3"}}),a("el-table-column",{attrs:{prop:"buyCount",label:"buyCount"}}),a("el-table-column",{attrs:{prop:"sellCount",label:"sellCount"}}),a("el-table-column",{attrs:{prop:"buyError",label:"buyError"}}),a("el-table-column",{attrs:{prop:"sellError",label:"sellError"}}),a("el-table-column",{attrs:{prop:"start",label:"start",width:"165"}}),a("el-table-column",{attrs:{prop:"end",label:"end",width:"165"}}),a("el-table-column",{attrs:{prop:"time",label:"time",width:"165"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.handleClick(e,2)}}},[t._v("计算")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.$store.state.calculateData.splice(e.$index,1)}}},[t._v("删除")])]}}])})],1)],1),a("el-divider")],1)},i=[],r=a("2909"),s=a("5530"),l=(a("4de4"),a("ac1f"),a("1276"),a("d81d"),a("d3b7"),a("caad"),a("99af"),a("a434"),a("159b"),a("3ca3"),a("ddb0"),a("fb6a"),a("fdab")),o=a("2f62"),c=(a("8429"),a("bc3a")),u={name:"Home",components:{HelloWorld:l["a"]},data:function(){return{input:"",loading:!1,loading2:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])({config1:function(t){return t.config1},urls:function(t){return t.urls},klineData:function(t){return t.klineData},calculateData:function(t){return t.calculateData},spotData:function(t){return t.accounts.filter((function(t){return"spot"==t.type}))[0]||{}}})),{},{currencys:function(){return this.config1.currencys.split(",")},periods:function(){return this.config1.period.split(",")},tableData:function(){return this.klineData.map((function(t){return{currency:t.currency,period:t.period,price:t.price,length:t.list.length,start:p(1e3*t.list[0].id),end:p(1e3*t.list[t.list.length-1].id),time:p()}}))}}),methods:{testClick:function(){var t=this,e=this.$util.huobiParams({},this.urls.accounts,"get");return console.log(e),new Promise((function(a,n){c({method:"get",url:t.urls.accounts,params:e}).then((function(e){e.data["err-msg"]?console.log(e.data["err-msg"]):t.$store.state.accounts=e.data.data})).catch((function(t){f("错误:testCLick",t),a([])}))}))},testClick2:function(){var t="https://api.huobi.pro/v1/account/accounts/".concat(this.spotData.id,"/balance"),e=this.$util.huobiParams({},t,"get");return console.log(e),new Promise((function(a,n){c({method:"get",url:t,params:e}).then((function(t){if(t.data["err-msg"])console.log(t.data["err-msg"]);else{var e=t.data.data.list,a=e.filter((function(t){return["usdt","btc3l","btc3s"].includes(t.currency)&&"trade"==t.type}));console.log("arr",a)}})).catch((function(t){f("错误:testCLick",t),a([])}))}))},handleClick:function(t,e){1==e?this.$store.state.calculateData=[].concat(Object(r["a"])(this.calculate1([this.klineData[t.$index]])),Object(r["a"])(this.$store.state.calculateData)):2==e&&this.$store.state.calculateData.splice(t.$index,1,this.calculate1([this.calculateData[t.$index].item])[0])},getData:function(){var t=this,e=this.currencys,a=this.periods,n=[],i=[];e.forEach((function(e){a.forEach((function(a){n.push(d(e,a,t.config1,t.urls.klineUrl)),i.push({currency:e,period:a,list:[],price:0})}))})),console.log(e),console.log(a),this.loading=!0,Promise.all(n).then((function(e){t.loading=!1,e.forEach((function(t,e){i[e].list=Object(r["a"])(t).reverse(),i[e].price=i[e].list[0].close})),t.$store.state.klineData=[].concat(i,Object(r["a"])(t.$store.state.klineData))})).catch((function(t){console.log(t)}))},calculate:function(t){this.loading2=!0,this.$store.state.calculateData=[].concat(Object(r["a"])(this.calculate1(t)),Object(r["a"])(this.$store.state.calculateData)),this.loading2=!1},calculate1:function(t){var e=this;return t.map((function(t){return e.calculate2(t)}))},calculate2:function(t){var e=this,a={buyCount:0,sellCount:0,buyError:0,sellError:0},n=parseFloat(this.config1.assetsAll),i=parseFloat(this.config1.assetsAll)/t.price,r=t.list;r.some((function(t,r){var s=(t.close-t.open)/t.open;if(Math.abs(s)>parseFloat(e.config1.riseKey)){var l=parseFloat(e.config1.assetsSplit)/t.close;s>0?i>l?(n+=parseFloat(e.config1.assetsSplit)*(1-parseFloat(e.config1.gas)),i-=l,a.sellCount++):a.sellError++:n>parseFloat(e.config1.assetsSplit)?(n-=parseFloat(e.config1.assetsSplit),i+=l*(1-parseFloat(e.config1.gas)),a.buyCount++):a.buyError++}}));var l=Object(s["a"])(Object(s["a"])({currency:t.currency,period:t.period,fprice:t.list[0].close,price:t.list[t.list.length-1].close,length:t.list.length,all1:parseFloat(this.config1.assetsAll)+parseFloat(this.config1.assetsAll)/t.price*r[0].close,all2:parseFloat(this.config1.assetsAll)+parseFloat(this.config1.assetsAll)/t.price*r[r.length-1].close,all3:n+i*r[r.length-1].close,start:p(1e3*t.list[0].id),end:p(1e3*t.list[t.list.length-1].id),time:p(),assetsAll:this.config1.assetsAll,numAll:parseFloat(this.config1.assetsAll)/t.price,assets:n,num:i},a),{},{item:t});return l.income=l.all3-l.all1,l}}};function d(t,e,a,n){var i=a.size,r={symbol:(t+"usdt").toLowerCase(),period:e,size:i};return new Promise((function(t,e){c({method:"get",url:n,params:r}).then((function(e){var a=e.data.data;t(a)})).catch((function(e){f("错误:GetRecords",e),t([])}))}))}function p(t){return a("5a0c")(t).format("YYYY-MM-DD HH:mm:ss")}function f(){var t;(t=console).log.apply(t,[p()].concat(Array.prototype.slice.call(arguments)))}var h=u,g=(a("de16"),a("2877")),m=Object(g["a"])(h,n,i,!1,null,null,null);e["default"]=m.exports},c321:function(t,e,a){var n={"./About.vue":"f820","./Double.vue":"8b12","./Home.vue":"bb51","./cross.vue":"3b8f","./hedge.vue":"b2c8","./hedgePro.vue":"532a"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id="c321"},de16:function(t,e,a){"use strict";a("8d91")},f820:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("h1",[t._v("This is an about page")]),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","auto-upload":!1,"on-change":t.fileChange,drag:""}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1)],1)},i=[],r=a("5530"),s=(a("ac1f"),a("1276"),a("d3b7"),a("4de4"),a("159b"),a("5319"),a("caad"),a("2532"),a("b64b"),a("99af"),a("b0c0"),a("3ca3"),a("ddb0"),a("2b3d"),a("fb6a"),a("2f62")),l={data:function(){return{}},created:function(){},computed:Object(r["a"])({},Object(s["c"])({config1:function(t){return t.config1},urls:function(t){return t.urls}})),methods:{fileChange:function(t){console.log("fileChange",t),o(t)},loadData:function(){var t=this,e=this.config1.currencys.split(","),n=this.$util.huobiParams({symbol:e[0]+"usdt",states:"filled","end-time":(new Date).getTime(),"start-time":(new Date).getTime()-8640000.000000002},this.urls.orders,"get");return console.log(n),new Promise((function(e,i){a("bc3a")({method:"get",url:t.urls.orders,params:n}).then((function(e){e.data["err-msg"]?console.log(e.data["err-msg"]):(t.$store.state.accounts=e.data.data,t.spotData=e.data.data.filter((function(t){return"spot"==t.type}))[0])})).catch((function(t){u("错误:testCLick",t),e([])}))}))}}};function o(t){var e=new FileReader;e.readAsText(t.raw),e.onload=function(){var e=this.result,a=new Array,n=new Array;n=e.split("\n");for(var i=0;i<n.length;i++)i>0&&function(){var t=n[0].split(","),e={};n[i]&&n[i].length&&(n[i].split(",").forEach((function(a,n){n<t.length&&(e[t[n].replace('"',"").replace('"',"")]=a)})),e.手续费数量=parseFloat(e["手续费"]),e.手续费单位=e["手续费"].includes("USDT")?"USDT":e.交易对.replace("/USDT",""),e.手续费USDT=e.手续费数量*("USDT"==e.手续费单位?1:e.价格),a.push(e))}();var r="",s=Object.keys(a[0]);s.forEach((function(t,e){r+="".concat(e?",":"").concat(t)})),a.forEach((function(t,e){r+="\n",s.forEach((function(e,a){r+="".concat(a?",":"").concat(t[e])}))}));var l=document.createElement("a");l.download=t.name;var o=new Blob([r]);l.href=URL.createObjectURL(o),document.body.appendChild(l),l.click(),document.body.removeChild(l)}}function c(t){return a("5a0c")(t).format("YYYY-MM-DD HH:mm:ss")}function u(){var t;(t=console).log.apply(t,[c()].concat(Array.prototype.slice.call(arguments)))}var d=l,p=a("2877"),f=Object(p["a"])(d,n,i,!1,null,"532a5734",null);e["default"]=f.exports},fdab:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._m(0),a("h3",[t._v("Installed CLI Plugins")]),t._m(1),a("h3",[t._v("Essential Links")]),t._m(2),a("h3",[t._v("Ecosystem")]),t._m(3)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" For a guide and recipes on how to configure / customize this project,"),a("br"),t._v(" check out the "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(". ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router",target:"_blank",rel:"noopener"}},[t._v("router")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-vuex",target:"_blank",rel:"noopener"}},[t._v("vuex")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],r={name:"HelloWorld",props:{msg:String}},s=r,l=(a("35dc"),a("2877")),o=Object(l["a"])(s,n,i,!1,null,"500f67cc",null);e["a"]=o.exports}});
//# sourceMappingURL=app.d91b96b8.js.map