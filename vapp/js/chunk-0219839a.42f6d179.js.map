{"version":3,"sources":["webpack:///./src/apps/banana/views/minVideo.vue?c853","webpack:///./src/apps/banana/views/minVideo.vue?d592","webpack:///src/apps/banana/views/minVideo.vue","webpack:///./src/apps/banana/views/minVideo.vue?1589","webpack:///./src/apps/banana/views/minVideo.vue","webpack:///./src/apps/banana/js/config.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","currentItem","videoUrl","vodrow","coverpic","options","rows","on","changePage","_l","item","index","key","nativeOn","$event","clickHandler","refInFor","_v","_s","user","nickname","title","updatetime","_e","staticRenderFns","data","current","isShowMask","scrollY","computed","length","created","console","log","loadData","mounted","methods","$axios","document","component","protocol","host","origin","query","device","s_device_id","s_os_version","s_platform","_t","home","Object","assign","Date","valueOf"],"mappings":"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","file":"js/chunk-0219839a.42f6d179.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minVideo.vue?vue&type=style&index=0&id=5c466018&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minVideo.vue?vue&type=style&index=0&id=5c466018&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('video',{ref:\"video\",staticClass:\"video\",attrs:{\"controls\":\"controls\",\"playsinline\":\"\",\"src\":_vm.currentItem && _vm.currentItem.videoUrl,\"poster\":_vm.currentItem && _vm.currentItem.vodrow.coverpic}}),_c('cube-slide',{ref:\"slide\",staticClass:\"swiper\",attrs:{\"direction\":\"direction\",\"autoPlay\":false,\"loop\":false,\"options\":_vm.options,\"data\":_vm.rows},on:{\"change\":_vm.changePage}},_vm._l((_vm.rows),function(item,index){return _c('cube-slide-item',{key:index,staticClass:\"swiperItem\",nativeOn:{\"click\":function($event){return _vm.clickHandler(item, index)}}},[_c('div',{ref:'content' + index,refInFor:true,staticClass:\"content\"},[_c('img',{attrs:{\"src\":item.vodrow.coverpic}})]),(_vm.isShowMask)?_c('div',{staticClass:\"mask\"},[_c('div',[_vm._v(\"@\"+_vm._s(item.user.nickname))]),_c('div',[_vm._v(_vm._s(item.vodrow.title))]),_c('div',[_vm._v(_vm._s(item.vodrow.updatetime))])]):_vm._e()])}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <video\n      class=\"video\"\n      controls=\"controls\"\n      ref=\"video\"\n      playsinline\n      :src=\"currentItem && currentItem.videoUrl\"\n      :poster=\"currentItem && currentItem.vodrow.coverpic\"\n    ></video>\n    <cube-slide\n      class=\"swiper\"\n      ref=\"slide\"\n      direction=\"direction\"\n      :autoPlay=\"false\"\n      :loop=\"false\"\n      :options=\"options\"\n      :data=\"rows\"\n      @change=\"changePage\"\n    >\n      <cube-slide-item\n        class=\"swiperItem\"\n        v-for=\"(item, index) in rows\"\n        :key=\"index\"\n        @click.native=\"clickHandler(item, index)\"\n      >\n        <div class=\"content\" :ref=\"'content' + index\">\n          <img :src=\"item.vodrow.coverpic\">\n        </div>\n        <div class=\"mask\" v-if=\"isShowMask\">\n          <div>@{{item.user.nickname}}</div>\n          <div>{{item.vodrow.title}}</div>\n          <div>{{item.vodrow.updatetime}}</div>\n        </div>\n      </cube-slide-item>\n    </cube-slide>\n  </div>\n</template>\n\n<script>\nimport config from \"../js/config.js\";\nexport default {\n  data() {\n    return {\n      rows: [],\n      current: 0,\n      isShowMask: true,\n      options: {\n        scrollY: true\n      }\n    };\n  },\n  computed: {\n    currentItem() {\n      return this.rows.length > 0 ? this.rows[this.current] : null;\n    }\n  },\n  created() {\n    console.log(\"created banana\");\n    this.loadData(true);\n  },\n  mounted() {\n    //   document.body.appendChild(this.$refs.swiperContainer)\n  },\n  methods: {\n    loadData(isFirst) {\n      this.$axios\n        .request({\n          url: config.origin + \"/minivod/reqlist\",\n          params: config.query(),\n          success: res => {\n            console.log(\"success\", res);\n            if (res.data.retcode == 0) {\n            }\n          },\n          fail(res) {\n            console.log(\"fail\", res);\n          }\n        })\n        .then(res => {\n          console.log(\"success\", res);\n          if (res.status == 200 && res.data.retcode == 0) {\n            var rows = [];\n            res.data.data.rows.map(item => {\n              if (item.vodrow && item.vodrow.vodid) {\n                item.videoUrl = \"\";\n                rows.push(item);\n              }\n            });\n            this.rows = isFirst ? rows : this.rows.concat(rows);\n          } else {\n            weui.topTips(res.data.errmsg || res.statusCode || \"fail\");\n          }\n        })\n        .catch(res => {\n          weui.topTips(res.message || \"fail\");\n        });\n    },\n    clickHandler(item, index) {\n      this.isShowMask = !this.isShowMask;\n      if (!(currentItem && currentItem.videoUrl)) {\n        this.changePage(index);\n      }\n    },\n    changePage(current) {\n      const item = this.rows[current];\n      const vodid = item.vodrow.vodid;\n      console.log(\"swiperChange\", current, item);\n      if (document) {\n        document.title = item.vodrow.title;\n      }\n      this.current = current;\n      this.$axios\n        .request({\n          url: config.origin + \"/minivod/reqplay/\" + vodid,\n          params: config.query()\n        })\n        .then(res => {\n          console.log(\"success\", res);\n          console.log(\"success\", res);\n          var videoUrl = res.data.data.httpurl || res.data.data.httpurl_preview;\n          if (videoUrl) {\n            console.log(videoUrl);\n            this.rows[current].videoUrl = videoUrl;\n            this.$refs[\"content\" + this.current][0].appendChild(\n              this.$refs.video\n            );\n            this.$refs.video.play();\n          } else {\n            weui.topTips(res.data.errmsg || res.statusCode || \"fail\");\n          }\n        })\n        .catch(res => {\n          weui.topTips(res.message || \"fail\");\n        });\n      if (current == this.rows.length - 1) {\n        this.loadData();\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.video {\n  width: 100vw;\n  height: 100vh;\n  position: absolute;\n}\n.swiper {\n  height: 100vh;\n  width: 100vw;\n  .swiperItem {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    .mask {\n      position: absolute;\n      bottom: 70px;\n      left: 0;\n      color: white;\n      padding: 5px 10px 5px 10px;\n      font-size: 12px;\n      z-index: 100;\n      background-color: rgba(0, 0, 0, 0.5);\n      opacity: 0.8;\n      display: inline;\n    }\n    .content {\n      display: flex;\n      align-items: center;\n      height: 100%;\n    }\n    img {\n      height: auto;\n      width: 100%;\n    }\n  }\n}\n.demo-text-1 {\n  background-color: red;\n}\n.demo-text-2 {\n  background-color: green;\n}\n.demo-text-3 {\n  background-color: blue;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./minVideo.vue?vue&type=template&id=5c466018&scoped=true&\"\nimport script from \"./minVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./minVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./minVideo.vue?vue&type=style&index=0&id=5c466018&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c466018\",\n  null\n  \n)\n\nexport default component.exports","const protocol = 'https:'\nconst host = '6jwti3892pf605m004mn.lagoapps.com'\nconst origin = protocol + '//' + host\nconst query = {\n\tdevice: 'iPhone 7 13.4 1.0',\n\ts_device_id: '374B5729-7F3F-4C8F-B6DE-80FF0A333633',\n\ts_os_version: '13.4',\n\ts_platform: 'ios',\n\t_t: '1587401036000'\n}\nexport default {\n\tprotocol,\n\thost,\n\torigin,\n\thome: origin + '/index',\n\tquery : () => Object.assign(query,{_t:new Date().valueOf()})\n}\n\n"],"sourceRoot":""}