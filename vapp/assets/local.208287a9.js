import r from"./axios.2e64cdc3.js";import"./index.99da5c49.js";import d from"./zip.8ddfe773.js";import{m as u}from"./index.3c0beb2f.js";import{n as f}from"./index.9d3e2adf.js";import"./config.56e9fedd.js";import"./pako.esm.f80f5d13.js";var p=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",[i("van-dropdown-menu",[i("van-dropdown-item",{attrs:{options:e.option1},on:{change:e.search},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),i("van-dropdown-item",{attrs:{options:e.option2},on:{change:e.search},model:{value:e.value0,callback:function(t){e.value0=t},expression:"value0"}}),i("van-dropdown-item",{attrs:{options:e.option3},on:{change:e.search},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),i("van-search",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD"},on:{search:e.search},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),i("van-list",{attrs:{finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:function(t){return e.loadData(e.page+1)}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.listV,function(t,s){return i("div",{key:s,staticClass:"item",on:{click:function(n){return e.itemClick(t)}}},[i("div",[t.detail&&t.detail==e.current||t.fileInfo&&e.current&&e.current.src&&t.fileInfo.src==e.current.src?i("video",{staticClass:"video bananaListVideo",attrs:{controls:"controls",playsinline:"",autoplay:"",title:t.title,poster:t.fileInfo.img||t.img,"picture-in-picture-mode":["push","pop"],src:t.fileInfo.src||t.detail.src}}):i("img",{attrs:{src:t.fileInfo.img||t.img}})]),i("div",e._l(t,function(n,l){return i("div",{key:l},[["href","img","detail","fileInfo","viewkey"].includes(l)?e._e():i("span",[e._v(e._s(l)+":"+e._s(n))])])}),0)])}),0)],1)},v=[];const{zip:S,unzip:h}=d,o="http://192.168.123.1:888/Windows8/win11/91",g={data(){return{inputText:"",page:0,pageSize:20,list:[],value1:"Favorites",value0:0,value2:0,option2:[{text:"\u5012\u5E8F",value:0},{text:"\u6B63\u5E8F",value:1}],option3:[{text:"\u5168\u90E8",value:0},{text:"\u5B58\u5728img",value:1},{text:"\u5B58\u5728video",value:2}],refreshing:!1,loading:!1,finished:!1,current:{}}},computed:{listV(){return this.list.map(e=>e)},option1(){let e=[];return this.list.length&&Object.keys(this.list[0]).forEach(a=>{e.includes(a)||e.push(a)}),e.map(a=>({text:a,value:a}))}},watch:{page(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.list=this.getPageList()},100)}},async created(){let e=await r("http://192.168.123.1:81/sf.php");window.nine_file=e.data,this.getSourceData()},methods:{loadData(e){setTimeout(()=>{this.page=e,this.loading=!1},300)},async getSourceData(){let e=await r(`${o}/dataSourceNine.txt`),a=JSON.parse(h(e.data));a=this.addFileInfo(a),window.nine_data=a},addFileInfo(e){return Object.values(e).forEach(a=>{let i=this.existInfo(a,window.nine_file,o);a.fileInfo=i}),e},existInfo(e,a,i){let t=Object.keys(a).find(l=>l.endsWith(e.viewkey)),s=a[t]&&a[t].find(l=>l.endsWith(".jpg")&&!l.startsWith("._")),n=a[t]&&a[t].find(l=>l.endsWith(".m3u8")&&!l.startsWith("._"));return s&&(s=`${o}/video/${e.viewkey}/${s}`),n&&(n=`${o}/video/${e.viewkey}/${n}`),{dir:!!t,img:s,src:n}},search(){this.list=[],setTimeout(()=>{this.page=1,this.list=this.getPageList()},300)},getPageList(){let e=window.nine_data;if(typeof e!="object")return[];let i=Object.keys(e).map(t=>e[t]).filter(t=>this.value2==1?t.fileInfo&&t.fileInfo.img:this.value2==2?t.fileInfo&&t.fileInfo.src:!0).sort((t,s)=>parseFloat(t[this.value1])==t[this.value1]&&parseFloat(s[this.value1])==s[this.value1]?this.value0==0?s[this.value1]-t[this.value1]:t[this.value1]-s[this.value1]:this.value0==0?s[this.value1].localeCompare(t[this.value1]):t[this.value1].localeCompare(s[this.value1])).slice(0,this.page*this.pageSize);return console.log("keys",i.map(t=>t[this.value1]).slice(0,this.pageSize)),i},async itemClick(e){if(!(e.detail||e.fileInfo.src)){let a=weui.loading(),i=await u.axios({params:{uuu:e.href}});a.hide();let t=u.utils.format.all(i.data);this.$set(e,"detail",t.detail)}this.current=e.detai||e.fileInfo}}},c={};var _=f(g,p,v,!1,m,"e3284868",null,null);function m(e){for(let a in c)this[a]=c[a]}var T=function(){return _.exports}();export{T as default};
