import r from"./axios.4c8f7047.js";import"./index.99da5c49.js";import h from"./zip.8ddfe773.js";import{m as u}from"./index.c80c1739.js";import{n as d}from"./index.d6a0a01a.js";import"./config.56e9fedd.js";import"./pako.esm.f80f5d13.js";var f=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",[a("van-dropdown-menu",[a("van-dropdown-item",{attrs:{options:e.option1},on:{change:e.search},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),a("van-dropdown-item",{attrs:{options:e.option2},on:{change:e.search},model:{value:e.value0,callback:function(t){e.value0=t},expression:"value0"}}),a("van-dropdown-item",{attrs:{options:e.option3},on:{change:e.search},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("van-search",{attrs:{placeholder:e.placeholder+""},on:{search:e.search},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),a("van-list",{attrs:{finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:function(t){return e.loadData(e.page+1)}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.listV,function(t,s){return a("div",{key:s,staticClass:"item",on:{click:function(n){return e.itemClick(t)}}},[a("div",[t.detail&&t.detail==e.current||t.fileInfo&&e.current&&e.current.src&&t.fileInfo.src==e.current.src?a("video",{staticClass:"video bananaListVideo",attrs:{controls:"controls",playsinline:"",autoplay:"",title:t.title,poster:t.fileInfo.img||t.img,"picture-in-picture-mode":["push","pop"],src:t.fileInfo.src||t.detail.src}}):a("img",{attrs:{src:t.fileInfo.img||t.img}})]),a("div",e._l(t,function(n,l){return a("div",{key:l},[["href","img","detail","fileInfo","viewkey"].includes(l)?e._e():a("span",[e._v(e._s(l)+":"+e._s(n))])])}),0)])}),0)],1)},p=[];const{zip:S,unzip:v}=h,o="http://192.168.123.1:888/Windows8/win11/91",g={data(){return{inputText:"",page:0,pageSize:20,list:[],value1:"Favorites",value0:0,value2:2,option2:[{text:"\u5012\u5E8F",value:0},{text:"\u6B63\u5E8F",value:1}],option3:[{text:"\u5168\u90E8",value:0},{text:"\u5B58\u5728img",value:1},{text:"\u5B58\u5728video",value:2},{text:"\u5B58\u5728video2",value:3}],refreshing:!1,loading:!1,finished:!1,current:{},placeholder:0}},computed:{listV(){return this.list.map(e=>e)},option1(){let e=[];return this.list.length&&Object.keys(this.list[0]).forEach(i=>{e.includes(i)||e.push(i)}),e.map(i=>({text:i,value:i}))}},watch:{page(){clearTimeout(this.timer),this.timer=setTimeout(()=>{let e=this.getPageList();(this.list.length=e.length&&this.page>1)&&(this.finished=!0),this.list=e},100)}},async created(){let e=await r("http://192.168.123.1:81/sf.php");window.nine_file=e.data,this.getSourceData()},methods:{loadData(e){setTimeout(()=>{this.page=e,this.loading=!1},300)},async getSourceData(){let e=await r(`${o}/dataSourceNine.txt`),i=JSON.parse(v(e.data));i=this.addFileInfo(i),window.nine_data=i},addFileInfo(e){return Object.values(e).forEach(i=>{let a=this.existInfo(i,window.nine_file,o);i.fileInfo=a}),e},existInfo(e,i,a){let t=Object.keys(i).find(l=>l.endsWith(e.viewkey)),s=i[t]&&i[t].find(l=>l.endsWith(".jpg")&&!l.startsWith("._")),n=i[t]&&i[t].find(l=>l.endsWith(".m3u8")&&!l.startsWith("._"));return s&&(s=`${o}/video/${e.viewkey}/${s}`),n&&(n=`${o}/video/${e.viewkey}/${n}`),{dir:!!t,img:s,src:n}},search(){this.list=[],setTimeout(()=>{this.page=1,this.list=this.getPageList()},300)},getPageList(){this.page<=1&&(this.finished=!1);let e=window.nine_data;if(typeof e!="object")return[];let a=Object.keys(e).map(t=>e[t]).filter(t=>{let s=!0;return this.value2==1&&(s=s&&t.fileInfo&&t.fileInfo.img),this.value2==2&&(s=s&&t.fileInfo&&t.fileInfo.src),this.value2==3&&(s=s&&t.fileInfo&&t.fileInfo.src),this.inputText&&(s=s&&[t.title,t[this.value1]].some(n=>(n+"").toLowerCase().includes(this.inputText.toLowerCase()))),s}).sort((t,s)=>parseFloat(t[this.value1])==t[this.value1]&&parseFloat(s[this.value1])==s[this.value1]?this.value0==0?s[this.value1]-t[this.value1]:t[this.value1]-s[this.value1]:this.value0==0?s[this.value1].localeCompare(t[this.value1]):t[this.value1].localeCompare(s[this.value1]));return this.placeholder=a.length,a=a.slice(0,this.page*this.pageSize),console.log("keys",a.map(t=>t[this.value1]).slice(0,this.pageSize)),a},async itemClick(e){if(!(e.detail||e.fileInfo.src)){let i=weui.loading(),a=await u.axios({params:{uuu:e.href}});i.hide();let t=u.utils.format.all(a.data);this.$set(e,"detail",t.detail)}this.current=e.detai||e.fileInfo}}},c={};var _=d(g,f,p,!1,m,"816976d2",null,null);function m(e){for(let i in c)this[i]=c[i]}var T=function(){return _.exports}();export{T as default};
