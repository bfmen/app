import{n as i,_ as l}from"./index.ffe3ee44.js";import"./axios.8276f7d9.js";import"./index.99da5c49.js";import{m as o}from"./index.c5f33142.js";import"./config.56e9fedd.js";var d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-dropdown-menu",[a("van-dropdown-item",{attrs:{options:e.dropdownOptions},model:{value:e.dropdownValue,callback:function(r){e.dropdownValue=r},expression:"dropdownValue"}})],1),a("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(r){e.refreshing=r},expression:"refreshing"}},[a("van-list",{attrs:{finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:function(r){return e.loadData(++e.page)}},model:{value:e.loading,callback:function(r){e.loading=r},expression:"loading"}},[a("ccItem",{attrs:{dataSource:e.listV,showKeys:e.showKeys},on:{open:e.open}})],1)],1)],1)},u=[];const p={components:{ccItem:()=>l(()=>import("./ccItem.65544747.js"),["assets/ccItem.65544747.js","assets/ccItem.b4ec01d8.css","assets/ccImg.f3e36972.js","assets/index.ffe3ee44.js","assets/index.70ce4827.css"])},data(){return{dataSource:{},optionNew:{text:"new",value:""},dropdownValue:"",page:0,refreshing:!1,loading:!1,finished:!1,current:{}}},computed:{listV(){return this.dataSource.listV||[]},submenu(){return this.dataSource.submenu||[]},dropdownOptions(){return[this.optionNew,...this.submenu.map(e=>({text:e.title,value:e.href.split("?")[1]}))]},showKeys(){let e=[{key:"Views",type:"primary"},{key:"From",type:"success"},{key:"Added",type:"danger"},{key:"duration",type:"warning"}];return this.dropdownValue&&e.push({key:this.dropdownValue,type:"primary"}),e}},watch:{dropdownValue(){this.loadData()}},async created(){},methods:{onRefresh(){this.loadData()},async loadData(e=1){let{data:t}=await o.axios({params:{uuu:`/v.php?${this.dropdownValue}&page=${e}`}});if(t){let a=o.utils.format.all(t);this.dataSource=e==1?a:{...a,listV:[...a.listV,...this.dataSource.listV]},this.page=e,this.refreshing=!1,this.loading=!1}},async open(e,t){if(e&&t.href&&!t.detail_src){let a=weui.loading(),r=await o.axios({params:{uuu:t.href}});a.hide();let n=o.utils.format.all(r.data);this.$set(t,"detail_src",n.detail.src)}},async itemClick(e){if(!e.detail){let t=weui.loading(),a=await o.axios({params:{uuu:e.href}});t.hide();let r=o.utils.format.all(a.data);this.$set(e,"detail",r.detail)}this.current=e.detail}}},s={};var c=i(p,d,u,!1,h,"0ce58dea",null,null);function h(e){for(let t in s)this[t]=s[t]}var y=function(){return c.exports}();export{y as default};
