import{c as r}from"./config.959b753b.js";import c from"./list.3f07b617.js";import u from"./tagSelect.33b8e099.js";import{n as d}from"./index.ef983221.js";import"./array-method-has-species-support.d921f7d0.js";var _=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"hot"},[s("div",{staticClass:"weui-tab"},[s("div",{staticClass:"weui-navbar"},t._l(t.items,function(a,i){return s("div",{key:i,staticClass:"weui-navbar__item",class:{"weui-bar__item_on":t.current==i},on:{click:function(p){return t.onClickItem(i)}}},[t._v(" "+t._s(a)+" ")])}),0),s("div",{staticClass:"weui-tab__panel"})]),s("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(i){t.isLoading=i},expression:"isLoading"}},[s("list",{attrs:{dataList:t.list[t.current].items}})],1),s("infinite-loading",{ref:"infiniteLoading",on:{infinite:t.infinite}})],1)},m=[];const f={name:"keepAlive",components:{list:c,tagSelect:u},data(){return{isLoading:!1,list:[{title:"\u63A8\u8350",items:[],src:"/vod/recommend-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u70ED\u70B9",items:[],src:"/vod/hot-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u53D1\u73B0",items:[],src:"/vod/latest-0-0-0-0-0-0-0-0-0-",page:0}],current:1,vodid:""}},onLoad(e){},created(){},computed:{items(){return this.list.map(e=>e.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(e){this.current!==e&&(this.current=e,this.list[this.current].items.length==0&&window.scrollY==0&&this.loadData(1))},loadData(e,t){const n=r.origin+this.list[this.current].src+e,s=e,a=this.current;this.$axios.request({url:n,params:r.query()}).then(i=>{if(console.log("success",i),i.status==200&&i.data.retcode==0){var o=i.data.data.vodrows;this.list[a].items=s==1?o:this.list[a].items.concat(o),this.list[a].page=s}else weui.topTips(i.data.errmsg||i.statusCode||"fail");t&&t.loaded()}).catch(i=>{t&&t.loaded(),weui.topTips(i.message||"fail")}).finally(()=>{this.isLoading=!1})},infinite(e){console.log("onReachBottom"),this.loadData(this.list[this.current].page+1,e)}}},l={};var h=d(f,_,m,!1,v,"64089cdd",null,null);function v(e){for(let t in l)this[t]=l[t]}var b=function(){return h.exports}();export{b as default};
