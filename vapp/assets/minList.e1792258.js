import{c as r}from"./config.73be10ef.js";import c from"./list.51bf3849.js";import{n as u}from"./index.901f2130.js";var d=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"weui-tab"},[e("div",{staticClass:"weui-navbar"},t._l(t.items,function(a,n){return e("div",{key:n,staticClass:"weui-navbar__item",class:{"weui-bar__item_on":t.current==n},on:{click:function(s){return t.onClickItem(n)}}},[t._v(" "+t._s(a)+" ")])}),0),e("div",{staticClass:"weui-tab__panel"})]),e("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(a){t.isLoading=a},expression:"isLoading"}},[e("list",{attrs:{dataList:t.list[t.current].items,isMin:!0}})],1),e("infinite-loading",{ref:"infiniteLoading",attrs:{identifier:t.current},on:{infinite:t.infinite}})],1)},m=[];const f={components:{list:c},data(){return{isLoading:!1,list:[{title:"\u70B9\u8D5E",items:[],src:"/minivod/topzan-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u8BC4\u8BBA",items:[],src:"/minivod/topcomment-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u64AD\u653E",items:[],src:"/minivod/topplay-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6700\u65B0",items:[],src:"/minivod/topnew-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6295\u5E01",items:[],src:"/minivod/topcoin-0-0-0-0-0-0-0-0-0-0-",page:0}],current:0,vodid:""}},onLoad(t){},created(){},computed:{items(){return this.list.map(t=>t.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(t){this.current!==t&&(this.current=t,this.list[this.current].items.length==0&&window.scrollY==0)},loadData(t,i){const e=r.origin+this.list[this.current].src+t,a=t,n=this.current;this.$axios({url:e,params:r.query()}).then(s=>{if(console.log("success",s),s.status==200&&s.data.retcode==0){var o=s.data.data.vodrows;this.list[n].items=a==1?o:this.list[n].items.concat(o),this.list[n].page=a,o.length<16?i&&i.complete():i&&i.loaded()}else weui.topTips(s.data.errmsg||s.statusCode||"fail"),i&&i.loaded()}).catch(s=>{i&&i.loaded(),weui.topTips(s.message||"fail")}).finally(()=>{this.isLoading=!1})},infinite(t){console.log("onReachBottom"),this.loadData(this.list[this.current].page+1,t)}}},l={};var _=u(f,d,m,!1,p,"0a361044",null,null);function p(t){for(let i in l)this[i]=l[i]}var w=function(){return _.exports}();export{w as default};
