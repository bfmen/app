import{c as s}from"./config.b0b2fcdf.js";import r from"./list.e9731879.js";import{n as l}from"./index.67e505c3.js";var c=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"special"},[t("div",{staticClass:"header"},a._l(a.dataSource.actorrows,function(i,o){return t("div",{key:o,staticClass:"item",on:{click:function(v){return a.itemClick(i)}}},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.avatar,expression:"item.avatar"}],staticClass:"image",attrs:{mode:"aspectFill"}}),t("div",{staticClass:"title",domProps:{textContent:a._s(i.spname)}},[a._v(">")])])}),0),t("div",{staticClass:"content"},[t("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:a.onRefresh},model:{value:a.isLoading,callback:function(i){a.isLoading=i},expression:"isLoading"}},a._l(a.dataSource.rows,function(i,o){return t("list",{key:o,attrs:{info:i,title:i.spname+" "+i.itemcount+"\u90E8",dataList:i.vodrows}})}),1),t("infinite-loading",{ref:"infiniteLoading",on:{infinite:a.infinite}})],1)])},d=[];const u={name:"keepAlive",components:{list:r},data(){return{dataSource:{},page:0,isLoading:!1}},computed:{v2sliderows(){let a=[];return this.dataSource.v2sliderows&&this.dataSource.v2sliderows.forEach(e=>{e.scene=="special.detail"&&a.push(e)}),a}},methods:{onRefresh(){this.loadData(1,this.$state)},itemClick(a){a.spid&&this.$router.push({path:"./detail?spid="+a.spid})},infinite(a){console.log("onReachBottom"),this.loadData(this.page+1,a)},loadData(a,e){console.log("config",s,s.query()),this.$axios.request({url:s.origin+"/special/listing-0-0-"+a,params:s.query()}).then(t=>{console.log("success",t),t.status==200&&t.data.retcode==0?(this.page=a,this.page==1?this.dataSource=t.data.data:(this.dataSource.actorrows=t.data.data.actorrows,this.dataSource.rows=this.dataSource.rows.concat(t.data.data.rows)),t.data.data.rows.length<16?e&&e.complete():e&&e.loaded()):(weui.topTips(t.data.errmsg||t.statusCode||"fail"),e.loaded())}).catch(t=>{e&&e.loaded(),weui.topTips(t.message||"fail")}).finally(()=>{this.isLoading=!1})}}},n={};var f=l(u,c,d,!1,p,"35c019b0",null,null);function p(a){for(let e in n)this[e]=n[e]}var g=function(){return f.exports}();export{g as default};
