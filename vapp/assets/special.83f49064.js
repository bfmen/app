import{c as n}from"./config.3d405634.js";import l from"./list.cc3d6f48.js";import{n as c}from"./index.0b15903f.js";import"./array-method-has-species-support.4bbc7ede.js";var d=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"special"},[i("div",{staticClass:"header"},a._l(a.dataSource.actorrows,function(s,o){return i("div",{key:o,staticClass:"item",on:{click:function(h){return a.itemClick(s)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.avatar,expression:"item.avatar"}],staticClass:"image",attrs:{mode:"aspectFill"}}),i("div",{staticClass:"title",domProps:{textContent:a._s(s.spname)}},[a._v(">")])])}),0),i("div",{staticClass:"content"},[i("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:a.onRefresh},model:{value:a.isLoading,callback:function(o){a.isLoading=o},expression:"isLoading"}},a._l(a.dataSource.rows,function(s,o){return i("list",{key:o,attrs:{info:s,title:s.spname+" "+s.itemcount+"\u90E8",dataList:s.vodrows}})}),1),i("infinite-loading",{ref:"infiniteLoading",on:{infinite:a.infinite}})],1)])},u=[];const f={name:"keepAlive",components:{list:l},data(){return{dataSource:{},page:0,isLoading:!1}},computed:{v2sliderows(){let e=[];return this.dataSource.v2sliderows&&this.dataSource.v2sliderows.forEach(a=>{a.scene=="special.detail"&&e.push(a)}),e}},methods:{onRefresh(){this.loadData(1,this.$state)},itemClick(e){e.spid&&this.$router.push({path:"./detail?spid="+e.spid})},infinite(e){console.log("onReachBottom"),this.loadData(this.page+1,e)},loadData(e,a){console.log("config",n,n.query()),this.$axios.request({url:n.origin+"/special/listing-0-0-"+e,params:n.query()}).then(t=>{console.log("success",t),t.status==200&&t.data.retcode==0?(this.page=e,this.page==1?this.dataSource=t.data.data:(this.dataSource.actorrows=t.data.data.actorrows,this.dataSource.rows=this.dataSource.rows.concat(t.data.data.rows)),t.data.data.rows.length<16?a&&a.complete():a&&a.loaded()):(weui.topTips(t.data.errmsg||t.statusCode||"fail"),a.loaded())}).catch(t=>{a&&a.loaded(),weui.topTips(t.message||"fail")}).finally(()=>{this.isLoading=!1})}}},r={};var p=c(f,d,u,!1,v,"35c019b0",null,null);function v(e){for(let a in r)this[a]=r[a]}var C=function(){return p.exports}();export{C as default};
