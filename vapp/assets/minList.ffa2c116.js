import{c as o}from"./config.3d405634.js";import c from"./list.cc3d6f48.js";import{n as u}from"./index.0b15903f.js";import"./array-method-has-species-support.4bbc7ede.js";var d=function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("div",[s("div",{staticClass:"weui-tab"},[s("div",{staticClass:"weui-navbar"},t._l(t.items,function(n,i){return s("div",{key:i,staticClass:"weui-navbar__item",class:{"weui-bar__item_on":t.current==i},on:{click:function(h){return t.onClickItem(i)}}},[t._v(" "+t._s(n)+" ")])}),0),s("div",{staticClass:"weui-tab__panel"})]),s("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(i){t.isLoading=i},expression:"isLoading"}},[s("list",{attrs:{dataList:t.list[t.current].items,isMin:!0}}),s("list",{attrs:{dataList:t.list[t.current].items}})],1),s("infinite-loading",{ref:"infiniteLoading",attrs:{identifier:t.current},on:{infinite:t.infinite}})],1)},m=[];const _={components:{list:c},data(){return{isLoading:!1,list:[{title:"\u70B9\u8D5E",items:[],src:"/minivod/topzan-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u8BC4\u8BBA",items:[],src:"/minivod/topcomment-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u64AD\u653E",items:[],src:"/minivod/topplay-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6700\u65B0",items:[],src:"/minivod/topnew-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6295\u5E01",items:[],src:"/minivod/topcoin-0-0-0-0-0-0-0-0-0-0-",page:0}],current:0,vodid:""}},onLoad(e){},created(){},computed:{items(){return this.list.map(e=>e.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(e){this.current!==e&&(this.current=e,this.list[this.current].items.length==0&&window.scrollY==0)},loadData(e,t){const r=o.origin+this.list[this.current].src+e,s=e,n=this.current;this.$axios({url:r,params:o.query()}).then(i=>{if(console.log("success",i),i.status==200&&i.data.retcode==0){var a=i.data.data.vodrows;this.list[n].items=s==1?a:this.list[n].items.concat(a),this.list[n].page=s,a.length<16?t&&t.complete():t&&t.loaded()}else weui.topTips(i.data.errmsg||i.statusCode||"fail"),t&&t.loaded()}).catch(i=>{t&&t.loaded(),weui.topTips(i.message||"fail")}).finally(()=>{this.isLoading=!1})},infinite(e){console.log("onReachBottom"),this.loadData(this.list[this.current].page+1,e)}}},l={};var f=u(_,d,m,!1,p,"6f337c8f",null,null);function p(e){for(let t in l)this[t]=l[t]}var y=function(){return f.exports}();export{y as default};
