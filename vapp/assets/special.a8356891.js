import{c as s}from"./config.959b753b.js";import n from"./list.3680ef69.js";import{n as l}from"./index.f08dcb0d.js";var c=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"special"},[e("div",{staticClass:"header"},a._l(a.dataSource.actorrows,function(i,o){return e("div",{key:o,staticClass:"item",on:{click:function(h){return a.itemClick(i)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.avatar,expression:"item.avatar"}],staticClass:"image",attrs:{mode:"aspectFill"}}),e("div",{staticClass:"title",domProps:{textContent:a._s(i.spname)}},[a._v(">")])])}),0),e("div",{staticClass:"content"},[e("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:a.onRefresh},model:{value:a.isLoading,callback:function(i){a.isLoading=i},expression:"isLoading"}},a._l(a.dataSource.rows,function(i,o){return e("list",{key:o,attrs:{info:i,title:i.spname+" "+i.itemcount+"\u90E8",dataList:i.vodrows}})}),1),e("infinite-loading",{ref:"infiniteLoading",on:{infinite:a.infinite}})],1)])},d=[];const p={name:"keepAlive",components:{list:n},data(){return{dataSource:{},page:0,isLoading:!1}},computed:{v2sliderows(){let a=[];return this.dataSource.v2sliderows&&this.dataSource.v2sliderows.forEach(t=>{t.scene=="special.detail"&&a.push(t)}),a}},methods:{onRefresh(){this.loadData(1,this.$state)},itemClick(a){a.spid&&this.$router.push({path:"./detail?spid="+a.spid})},infinite(a){console.log("onReachBottom"),this.loadData(this.page+1,a)},loadData(a,t){console.log("config",s,s.query()),this.$axios.request({url:s.origin+"/special/listing-0-0-"+a,params:s.query()}).then(e=>{console.log("success",e),e.status==200&&e.data.retcode==0?(this.page=a,this.page==1?this.dataSource=e.data.data:(this.dataSource.actorrows=e.data.data.actorrows,this.dataSource.rows=this.dataSource.rows.concat(e.data.data.rows)),e.data.data.rows.length<16?t&&t.complete():t&&t.loaded()):(weui.topTips(e.data.errmsg||e.statusCode||"fail"),t.loaded())}).catch(e=>{t&&t.loaded(),weui.topTips(e.message||"fail")}).finally(()=>{this.isLoading=!1})}}},r={};var u=l(p,c,d,!1,f,"35c019b0",null,null);function f(a){for(let t in r)this[t]=r[t]}var g=function(){return u.exports}();export{g as default};
