var T=Object.defineProperty,x=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(e,t,i)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,m=(e,t)=>{for(var i in t||(t={}))N.call(t,i)&&I(e,i,t[i]);if(S)for(var i of S(t))U.call(t,i)&&I(e,i,t[i]);return e},C=(e,t)=>x(e,E(t));import{c as y}from"./config.959b753b.js";import{h as $,i as R,j,k as A,b as F,l as G,d as H,_ as J,a as z,m as w,n as D,p as q}from"./array-method-has-species-support.392fce20.js";import{n as W}from"./index.07d49200.js";var O=$,X=j,K=R,Q=O(O.bind),Z=function(e,t){return X(e),t===void 0?e:K?Q(e,t):function(){return e.apply(t,arguments)}},P=Z,Y=$,tt=A,et=F,at=G,it=H,V=Y([].push),s=function(e){var t=e==1,i=e==2,a=e==3,r=e==4,l=e==6,c=e==7,d=e==5||l;return function(v,L,M,k){for(var h=et(v),p=tt(h),B=P(L,M),_=at(p),n=0,g=k||it,u=t?g(v,_):i||c?g(v,0):void 0,o,f;_>n;n++)if((d||n in p)&&(o=p[n],f=B(o,n,h),e))if(t)u[n]=f;else if(f)switch(e){case 3:return!0;case 5:return o;case 6:return n;case 2:V(u,o)}else switch(e){case 4:return!1;case 7:V(u,o)}return l?-1:a||r?r:u}},rt={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)},st=J,nt=rt.filter,ot=z,lt=ot("filter");st({target:"Array",proto:!0,forced:!lt},{filter:function(t){return nt(this,t,arguments.length>1?arguments[1]:void 0)}});var dt=w,ut=D,ct=dt?{}.toString:function(){return"[object "+ut(this)+"]"},vt=w,pt=q,ft=ct;vt||pt(Object.prototype,"toString",ft,{unsafe:!0});var ht=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"list"},[t.title?a("div",{staticClass:"header",on:{click:t.headerClick}},[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),a("span",{staticClass:"more"},[t._v("\u66F4\u591A")])]):t._e(),a("div",{staticClass:"numInfo"},[t._v(" "+t._s(this.dataList.filter(function(r){return r.isvip!=1}).length)+"/"+t._s(t.dataList.length)+" ")]),a("div",{staticClass:"items"},t._l(t.list,function(r,l){return a("div",{key:l+r.vodid,staticClass:"item",class:{itemMin:t.isMin},on:{click:function(d){return t.itemClick(r)}}},[t.vodid==r.vodid&&t.videoUrl?a("video",{ref:"video"+r.vodid,refInFor:!0,staticClass:"video bananaListVideo",class:{videoMin:t.isMin},attrs:{controls:"controls",playsinline:"",autoplay:"",title:r.title,poster:r.coverpic,"picture-in-picture-mode":["push","pop"],src:t.videoUrl}}):a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.coverpic,expression:"item.coverpic"}],staticClass:"image",class:{imagemMin:t.isMin},attrs:{mode:"aspectFit"},on:{load:function(d){return t.loadImage(r,d)}}}),a("span",[t._v(t._s(r.title||r.catename)+" "+t._s(t.showVideoState(r)))]),a("div",{staticClass:"tips"},[r.isvip==1?a("span",{staticClass:"isvip"},[t._v(t._s(r.isvip==1?"vip":""))]):t._e(),r.definition>0?a("span",{staticClass:"definition"},[t._v(t._s(r.definition))]):t._e(),t.isMin?t._e():a("span",{staticClass:"updatetime"},[t._v(t._s(r.updatetime))]),a("span",{staticClass:"upnum"},[t._v(t._s(r.upnum))]),a("span",{staticClass:"scorenum"},[t._v(t._s(r.scorenum))]),a("span",{staticClass:"duration"},[t._v(t._s(r.duration))])])])}),0)])},_t=[];const gt={props:{dataList:{default:()=>[]},info:{default:()=>({})},title:{default:""},isMin:{default:!1}},data(){return{vodid:"",videoUrl:"",loading:"",isLoading:!1}},computed:{list(){return this.dataList.filter(e=>this.$store.state.banana.isVipShow||e.isvip!=1).map(e=>C(m({},e),{url:e.url||this.gerBVInfo()[e.vodid]||""}))}},watch:{},methods:{headerClick(){this.info.spid?this.$router.push({path:"./detail?spid="+this.info.spid}):this.$router.push({path:"./class"})},showVideoState(e){let t=e.author||e.url;return t?t===5?"vip":"ok":".."},loadImage(e,t){let i=t.path[0];i.src&&i.src.startsWith("http")&&this.itemClick(e,!0)},setBVInfo(e,t){let i=t.data.data.httpurl||t.data.data.httpurl_preview||t.data.retcode,a={};try{a=JSON.parse(localStorage.BVInfo)}catch{}a[e.vodid]=i,e.url=i,e.author=i,localStorage.BVInfo=JSON.stringify(a)},gerBVInfo(){try{return JSON.parse(localStorage.BVInfo)}catch{return{}}},itemClick(e,t){let i=e.url;if(i&&String(i).startsWith("http")){t||(this.videoUrl=i,this.vodid=e.vodid,this.hideOtherVideo(),document&&(document.title=e.title));return}else if(i){t||weui.topTips(i);return}t||(this.loading&&this.loading.hide(),this.loading=weui.loading()),e.vodid!=this.vodid&&(this.isLoading=!0,this.$axios({url:y.origin+e.play_url,params:y.query()}).then(a=>{this.isLoading=!1,this.setBVInfo(e,a),t||(this.loading.hide(),console.log("success",a),a.data.data.httpurl?(this.videoUrl=a.data.data.httpurl,this.vodid=e.vodid,this.hideOtherVideo()):a.data.data.httpurl_preview?(this.videoUrl=a.data.data.httpurl_preview,this.vodid=e.vodid,this.hideOtherVideo()):weui.topTips(a.data.errmsg||"fail"),document&&(document.title=e.title))}).catch(a=>{t||weui.topTips(a.message||"fail")}))},hideOtherVideo(){setTimeout(()=>{this.$refs["video"+this.vodid][0].play();let e=new Array(...document.querySelectorAll(".bananaListVideo")).filter(t=>t.src!=this.videoUrl).forEach(t=>{t.pause(),t.parentElement.parentElement.parentElement.__vue__.vodid="",t.parentElement.parentElement.parentElement.__vue__.videoUrl=""});console.log(e)})}}},b={};var St=W(gt,ht,_t,!1,It,"870f8a9c",null,null);function It(e){for(let t in b)this[t]=b[t]}var Vt=function(){return St.exports}();export{Vt as default};
