import{n as c,_ as d}from"./index.e18ac360.js";import p from"./axios.72ea6409.js";import"./index.99da5c49.js";import v from"./zip.918657eb.js";import{m as u}from"./index.36978b4d.js";import"./config.56e9fedd.js";import"./pako.esm.f80f5d13.js";var g=function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",[s("van-dropdown-menu",[s("van-dropdown-item",{attrs:{options:e.option1},on:{change:e.search},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),s("van-dropdown-item",{attrs:{options:e.option2},on:{change:e.search},model:{value:e.value0,callback:function(t){e.value0=t},expression:"value0"}}),s("van-dropdown-item",{attrs:{options:e.option3},on:{change:e.search},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),s("van-search",{attrs:{placeholder:e.placeholder+""},on:{search:e.search},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),s("van-list",{attrs:{finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:function(t){return e.loadData(e.page+1)}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[s("ccItem",{attrs:{dataSource:e.listV,showKeys:e.showKeys},on:{open:e.open}})],1)],1)},m=[];const{zip:W,unzip:f}=v,o="http://192.168.123.1:888/Windows8/win11/91",_={components:{ccItem:()=>d(()=>import("./ccItem.c53827e0.js"),["assets/ccItem.c53827e0.js","assets/ccItem.b4ec01d8.css","assets/ccImg.fa1aec18.js","assets/index.e18ac360.js","assets/index.70ce4827.css"])},data(){return{inputText:"",page:0,pageSize:20,list:[],value1:"Favorites",value0:0,value2:2,option2:[{text:"\u5012\u5E8F",value:0},{text:"\u6B63\u5E8F",value:1}],option3:[{text:"\u5168\u90E8",value:0},{text:"\u5B58\u5728img",value:1},{text:"\u5B58\u5728video",value:2},{text:"\u5B58\u5728video2",value:3}],refreshing:!1,loading:!1,finished:!1,current:{},placeholder:0}},computed:{listV(){return this.list.map(e=>e)},option1(){let e=[];return this.list.length&&Object.keys(this.list[0]).forEach(i=>{e.includes(i)||e.push(i)}),e.map(i=>({text:i,value:i}))},showKeys(){let e=[{key:"Views",type:"primary"},{key:"From",type:"success"},{key:"Added",type:"danger"},{key:"duration",type:"warning"}];return this.value1&&e.push({key:this.value1,type:"primary"}),e}},watch:{page(){clearTimeout(this.timer),this.timer=setTimeout(()=>{let e=this.getPageList();(this.list.length=e.length&&this.page>1)&&(this.finished=!0),this.list=e},100)}},async created(){let e=await p({url:`${o}/filenames.gzip`,responseType:"arraybuffer",responseEncoding:"utf8"}),i=JSON.parse(f(e.data));window.nine_file=i,this.getSourceData()},methods:{loadData(e){setTimeout(()=>{this.page=e,this.loading=!1},300)},async getSourceData(){let e=await p({url:`${o}/dataSourceNine.txt`,responseType:"arraybuffer",responseEncoding:"utf8"}),i=JSON.parse(f(e.data));i=this.addFileInfo(i),window.nine_data=i},addFileInfo(e){return window.nine_file.forEach(i=>{this.existInfoPath(e,i)}),e},existInfoPath(e,i){let s=i.split("/").reverse()[1],t=i.split("/").pop();if(t.split(".")[0],t&&e[s]){if(t.endsWith(".jpg")&&!t.startsWith("._")){let a=`${o}/video/${s}/${i.split("/").pop()}`;e[s].fileInfo={...e[s].fileInfo,img:a}}else if(t.endsWith(".m3u8")&&!t.startsWith("._")){let a=`${o}/video/${s}/${i.split("/").pop()}`;e[s].fileInfo={...e[s].fileInfo,src:a}}}},existInfo(e,i,s){let t=e.img.split("/").pop(),a=t.split(".")[0],l=i.find(n=>n.endsWith(t)&&!n.startsWith("._")),r=i.find(n=>n.endsWith(a+".m3u8")&&!n.startsWith("._"));return l&&(l=`${o}/video/${e.viewkey}/${l.split("/").pop()}`),r&&(r=`${o}/video/${e.viewkey}/${r.split("/").pop()}`),{img:l,src:r}},search(){this.list=[],setTimeout(()=>{this.page=1,this.list=this.getPageList()},300)},getPageList(){this.page<=1&&(this.finished=!1);let e=window.nine_data;if(typeof e!="object")return[];let s=Object.keys(e).map(t=>(e[t].fileInfo&&(e[t].img=e[t].fileInfo.img,e[t].fileInfo_src=e[t].fileInfo.src),e[t])).filter(t=>{let a=!0;return this.value2==1&&(a=a&&t.fileInfo&&t.fileInfo.img),this.value2==2&&(a=a&&t.fileInfo&&t.fileInfo.src),this.value2==3&&(a=a&&t.fileInfo&&t.fileInfo.src),this.inputText&&(a=a&&[t.title,t[this.value1]].some(l=>(l+"").toLowerCase().includes(this.inputText.toLowerCase()))),a}).sort((t,a)=>parseFloat(t[this.value1])==t[this.value1]&&parseFloat(a[this.value1])==a[this.value1]?this.value0==0?a[this.value1]-t[this.value1]:t[this.value1]-a[this.value1]:this.value0==0?a[this.value1].localeCompare(t[this.value1]):t[this.value1].localeCompare(a[this.value1]));return this.placeholder=s.length,s=s.slice(0,this.page*this.pageSize),console.log("keys",s.map(t=>t[this.value1]).slice(0,this.pageSize)),s},async open(e,i){if(e&&i.href&&!i.detail_src&&!i.fileInfo_src){let s=weui.loading(),t=await u.axios({params:{uuu:i.href}});s.hide();let a=u.utils.format.all(t.data);this.$set(i,"detail_src",a.detail.src)}},async itemClick(e){if(!(e.detail||e.fileInfo.src)){let i=weui.loading(),s=await u.axios({params:{uuu:e.href}});i.hide();let t=u.utils.format.all(s.data);this.$set(e,"detail",t.detail)}this.current=e.detai||e.fileInfo}}},h={};var w=c(_,g,m,!1,y,"8e92a6e2",null,null);function y(e){for(let i in h)this[i]=h[i]}var z=function(){return w.exports}();export{z as default};
