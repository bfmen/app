import"./axios.75fd9c9c.js";import"./index.99da5c49.js";import{m as i}from"./index.31e471f2.js";import{n as d}from"./index.6a330b06.js";import"./config.56e9fedd.js";var u=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("van-dropdown-menu",[t("van-dropdown-item",{attrs:{options:e.dropdownOptions},model:{value:e.dropdownValue,callback:function(a){e.dropdownValue=a},expression:"dropdownValue"}})],1),t("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(a){e.refreshing=a},expression:"refreshing"}},[t("van-list",{attrs:{finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:function(a){return e.loadData(++e.page)}},model:{value:e.loading,callback:function(a){e.loading=a},expression:"loading"}},e._l(e.listV,function(a,l){return t("div",{key:l,staticClass:"item",on:{click:function(s){return e.itemClick(a)}}},[t("div",[a.detail&&a.detail==e.current?t("video",{staticClass:"video bananaListVideo",attrs:{controls:"controls",playsinline:"",autoplay:"",title:a.title,poster:a.img,"picture-in-picture-mode":["push","pop"],src:a.detail.src}}):t("img",{attrs:{src:a.img}})]),t("div",e._l(a,function(s,r){return t("div",{key:r},[["href","img","detail","fileInfo","viewkey"].includes(r)?e._e():t("span",[e._v(e._s(r)+":"+e._s(s))])])}),0)])}),0)],1)],1)},c=[];const p={data(){return{dataSource:{},optionNew:{text:"new",value:""},dropdownValue:"",page:0,refreshing:!1,loading:!1,finished:!1,current:{}}},computed:{listV(){return this.dataSource.listV||[]},submenu(){return this.dataSource.submenu||[]},dropdownOptions(){return[this.optionNew,...this.submenu.map(e=>({text:e.title,value:e.href.split("?")[1]}))]}},watch:{dropdownValue(){this.loadData()}},async created(){},methods:{onRefresh(){this.loadData()},async loadData(e=1){let{data:n}=await i.axios({params:{uuu:`/v.php?${this.dropdownValue}&page=${e}`}});if(n){let t=i.utils.format.all(n);this.dataSource=e==1?t:{...t,listV:[...t.listV,...this.dataSource.listV]},this.page=e,this.refreshing=!1,this.loading=!1}},async itemClick(e){if(!e.detail){let n=weui.loading(),t=await i.axios({params:{uuu:e.href}});n.hide();let a=i.utils.format.all(t.data);this.$set(e,"detail",a.detail)}this.current=e.detail}}},o={};var f=d(p,u,c,!1,h,"a39f4fe4",null,null);function h(e){for(let n in o)this[n]=o[n]}var V=function(){return f.exports}();export{V as default};
