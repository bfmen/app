import{n as c,_ as d}from"./index.67e505c3.js";import u from"./axios.3ec19ac3.js";import"./index.99da5c49.js";import f from"./zip.918657eb.js";import{m as n}from"./index.4d42a9b3.js";import"./config.56e9fedd.js";import"./pako.esm.f80f5d13.js";var p=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("van-dropdown-menu",[s("van-dropdown-item",{attrs:{options:e.option1},on:{change:e.search},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),s("van-dropdown-item",{attrs:{options:e.option2},on:{change:e.search},model:{value:e.value0,callback:function(t){e.value0=t},expression:"value0"}}),s("van-dropdown-item",{attrs:{options:e.option3},on:{change:e.search},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),s("van-search",{attrs:{placeholder:e.placeholder+""},on:{search:e.search},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),s("van-list",{attrs:{finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:function(t){return e.loadData(e.page+1)}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[s("ccItem",{attrs:{dataSource:e.listV,showKeys:e.showKeys},on:{open:e.open}})],1)],1)},v=[];const{zip:$,unzip:g}=f,r="http://192.168.123.1:888/Windows8/win11/91",_={components:{ccItem:()=>d(()=>import("./ccItem.6acbbbab.js"),["assets/ccItem.6acbbbab.js","assets/ccItem.2cbfb4ff.css","assets/index.67e505c3.js","assets/index.70ce4827.css"])},data(){return{inputText:"",page:0,pageSize:20,list:[],value1:"Favorites",value0:0,value2:2,option2:[{text:"\u5012\u5E8F",value:0},{text:"\u6B63\u5E8F",value:1}],option3:[{text:"\u5168\u90E8",value:0},{text:"\u5B58\u5728img",value:1},{text:"\u5B58\u5728video",value:2},{text:"\u5B58\u5728video2",value:3}],refreshing:!1,loading:!1,finished:!1,current:{},placeholder:0}},computed:{listV(){return this.list.map(e=>e)},option1(){let e=[];return this.list.length&&Object.keys(this.list[0]).forEach(a=>{e.includes(a)||e.push(a)}),e.map(a=>({text:a,value:a}))},showKeys(){let e=[{key:"Views",type:"primary"},{key:"From",type:"success"},{key:"Added",type:"danger"},{key:"duration",type:"warning"}];return this.value1&&e.push({key:this.value1,type:"primary"}),e}},watch:{page(){clearTimeout(this.timer),this.timer=setTimeout(()=>{let e=this.getPageList();(this.list.length=e.length&&this.page>1)&&(this.finished=!0),this.list=e},100)}},async created(){let e=await u("http://192.168.123.1:81/sf.php");window.nine_file=e.data,this.getSourceData()},methods:{loadData(e){setTimeout(()=>{this.page=e,this.loading=!1},300)},async getSourceData(){let e=await u({url:`${r}/dataSourceNine.txt`,responseType:"arraybuffer",responseEncoding:"utf8"}),a=JSON.parse(g(e.data));a=this.addFileInfo(a),window.nine_data=a},addFileInfo(e){return Object.values(e).forEach(a=>{let s=this.existInfo(a,window.nine_file,r);a.fileInfo=s}),e},existInfo(e,a,s){let t=Object.keys(a).find(l=>l.endsWith(e.viewkey)),i=a[t]&&a[t].find(l=>l.endsWith(".jpg")&&!l.startsWith("._")),o=a[t]&&a[t].find(l=>l.endsWith(".m3u8")&&!l.startsWith("._"));return i&&(i=`${r}/video/${e.viewkey}/${i}`),o&&(o=`${r}/video/${e.viewkey}/${o}`),{dir:!!t,img:i,src:o}},search(){this.list=[],setTimeout(()=>{this.page=1,this.list=this.getPageList()},300)},getPageList(){this.page<=1&&(this.finished=!1);let e=window.nine_data;if(typeof e!="object")return[];let s=Object.keys(e).map(t=>(e[t].fileInfo&&e[t].fileInfo.src&&(e[t].fileInfo_src=e[t].fileInfo.src),e[t])).filter(t=>{let i=!0;return this.value2==1&&(i=i&&t.fileInfo&&t.fileInfo.img),this.value2==2&&(i=i&&t.fileInfo&&t.fileInfo.src),this.value2==3&&(i=i&&t.fileInfo&&t.fileInfo.src),this.inputText&&(i=i&&[t.title,t[this.value1]].some(o=>(o+"").toLowerCase().includes(this.inputText.toLowerCase()))),i}).sort((t,i)=>parseFloat(t[this.value1])==t[this.value1]&&parseFloat(i[this.value1])==i[this.value1]?this.value0==0?i[this.value1]-t[this.value1]:t[this.value1]-i[this.value1]:this.value0==0?i[this.value1].localeCompare(t[this.value1]):t[this.value1].localeCompare(i[this.value1]));return this.placeholder=s.length,s=s.slice(0,this.page*this.pageSize),console.log("keys",s.map(t=>t[this.value1]).slice(0,this.pageSize)),s},async open(e,a){if(e&&a.href&&!a.detail_src&&!a.fileInfo_src){let s=weui.loading(),t=await n.axios({params:{uuu:a.href}});s.hide();let i=n.utils.format.all(t.data);this.$set(a,"detail_src",i.detail.src)}},async itemClick(e){if(!(e.detail||e.fileInfo.src)){let a=weui.loading(),s=await n.axios({params:{uuu:e.href}});a.hide();let t=n.utils.format.all(s.data);this.$set(e,"detail",t.detail)}this.current=e.detai||e.fileInfo}}},h={};var m=c(_,p,v,!1,w,"2605c1c6",null,null);function w(e){for(let a in h)this[a]=h[a]}var z=function(){return m.exports}();export{z as default};
