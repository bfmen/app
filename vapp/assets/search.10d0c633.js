import{c as x}from"./config.de2c21fa.js";import oe from"./list.3d48896a.js";import{g as m,n as le,q as y,r as $,s as ce,u as Z,v as ue,w as ve,o as de,x as fe,y as pe,z as he,A as ge,B as xe,C as A,h as ee,D as me,E as ye,_ as _e,F as be,p as Ee,G as we,H as Te,I as $e,J as Ce,K as Ie}from"./array-method-has-species-support.d9f1e248.js";import{n as Oe}from"./index.186fa470.js";var Se=m,Re=le,Pe=Se.String,re=function(r){if(Re(r)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Pe(r)},je=y,ke=function(){var r=je(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.sticky&&(e+="y"),e},B=$,De=m,K=De.RegExp,U=B(function(){var r=K("a","y");return r.lastIndex=2,r.exec("abcd")!=null}),Ne=U||B(function(){return!K("a","y").sticky}),Ae=U||B(function(){var r=K("^r","gy");return r.lastIndex=2,r.exec("str")!=null}),Be={BROKEN_CARET:Ae,MISSED_STICKY:Ne,UNSUPPORTED_Y:U},ae={},Ke=ce,Ue=Z,Le=Object.keys||function(e){return Ke(e,Ue)},Me=ue,qe=ve,Fe=de,Ge=y,Ve=fe,We=Le;ae.f=Me&&!qe?Object.defineProperties:function(e,t){Ge(e);for(var a=Ve(t),n=We(t),i=n.length,l=0,c;i>l;)Fe.f(e,c=n[l++],a[c]);return e};var Ye=pe,He=Ye("document","documentElement"),ze=y,Je=ae,M=Z,Xe=he,Qe=He,Ze=xe,er=ge,q=">",F="<",P="prototype",j="script",te=er("IE_PROTO"),O=function(){},ne=function(r){return F+j+q+r+F+"/"+j+q},G=function(r){r.write(ne("")),r.close();var e=r.parentWindow.Object;return r=null,e},rr=function(){var r=Ze("iframe"),e="java"+j+":",t;return r.style.display="none",Qe.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(ne("document.F=Object")),t.close(),t.F},E,w=function(){try{E=new ActiveXObject("htmlfile")}catch{}w=typeof document!="undefined"?document.domain&&E?G(E):rr():G(E);for(var r=M.length;r--;)delete w[P][M[r]];return w()};Xe[te]=!0;var ar=Object.create||function(e,t){var a;return e!==null?(O[P]=ze(e),a=new O,O[P]=null,a[te]=e):a=w(),t===void 0?a:Je.f(a,t)},tr=$,nr=m,ir=nr.RegExp,sr=tr(function(){var r=ir(".","s");return!(r.dotAll&&r.exec(`
`)&&r.flags==="s")}),or=$,lr=m,cr=lr.RegExp,ur=or(function(){var r=cr("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),f=A,C=ee,vr=re,dr=ke,fr=Be,pr=me.exports,hr=ar,gr=ye.get,xr=sr,mr=ur,yr=pr("native-string-replace",String.prototype.replace),T=RegExp.prototype.exec,k=T,_r=C("".charAt),br=C("".indexOf),Er=C("".replace),S=C("".slice),D=function(){var r=/a/,e=/b*/g;return f(T,r,"a"),f(T,e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),ie=fr.BROKEN_CARET,N=/()??/.exec("")[1]!==void 0,wr=D||N||ie||xr||mr;wr&&(k=function(e){var t=this,a=gr(t),n=vr(e),i=a.raw,l,c,v,s,o,p,d;if(i)return i.lastIndex=t.lastIndex,l=f(k,i,n),t.lastIndex=i.lastIndex,l;var h=a.groups,g=ie&&t.sticky,u=f(dr,t),_=t.source,I=0,b=n;if(g&&(u=Er(u,"y",""),br(u,"g")===-1&&(u+="g"),b=S(n,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&_r(n,t.lastIndex-1)!==`
`)&&(_="(?: "+_+")",b=" "+b,I++),c=new RegExp("^(?:"+_+")",u)),N&&(c=new RegExp("^"+_+"$(?!\\s)",u)),D&&(v=t.lastIndex),s=f(T,g?c:t,b),g?s?(s.input=S(s.input,I),s[0]=S(s[0],I),s.index=t.lastIndex,t.lastIndex+=s[0].length):t.lastIndex=0:D&&s&&(t.lastIndex=t.global?s.index+s[0].length:v),N&&s&&s.length>1&&f(yr,s[0],c,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===void 0&&(s[o]=void 0)}),s&&h)for(s.groups=p=hr(null),o=0;o<h.length;o++)d=h[o],p[d[0]]=s[d[1]];return s});var L=k,Tr=_e,V=L;Tr({target:"RegExp",proto:!0,forced:/./.exec!==V},{exec:V});var W=ee,Y=Ee,$r=L,H=$,se=be,Cr=we,Ir=se("species"),R=RegExp.prototype,Or=function(r,e,t,a){var n=se(r),i=!H(function(){var s={};return s[n]=function(){return 7},""[r](s)!=7}),l=i&&!H(function(){var s=!1,o=/a/;return r==="split"&&(o={},o.constructor={},o.constructor[Ir]=function(){return o},o.flags="",o[n]=/./[n]),o.exec=function(){return s=!0,null},o[n](""),!s});if(!i||!l||t){var c=W(/./[n]),v=e(n,""[r],function(s,o,p,d,h){var g=W(s),u=o.exec;return u===$r||u===R.exec?i&&!h?{done:!0,value:c(o,p,d)}:{done:!0,value:g(p,o,d)}:{done:!1}});Y(String.prototype,r,v[0]),Y(R,n,v[1])}a&&Cr(R[n],"sham",!0)},Sr=Object.is||function(e,t){return e===t?e!==0||1/e===1/t:e!=e&&t!=t},Rr=m,z=A,Pr=y,jr=Te,kr=$e,Dr=L,Nr=Rr.TypeError,Ar=function(r,e){var t=r.exec;if(jr(t)){var a=z(t,r,e);return a!==null&&Pr(a),a}if(kr(r)==="RegExp")return z(Dr,r,e);throw Nr("RegExp#exec called on incompatible receiver")},Br=A,Kr=Or,Ur=y,Lr=Ce,J=Sr,X=re,Mr=Ie,qr=Ar;Kr("search",function(r,e,t){return[function(n){var i=Lr(this),l=n==null?void 0:Mr(n,r);return l?Br(l,n,i):new RegExp(n)[r](X(i))},function(a){var n=Ur(this),i=X(a),l=t(e,n,i);if(l.done)return l.value;var c=n.lastIndex;J(c,0)||(n.lastIndex=0);var v=qr(n,i);return J(n.lastIndex,c)||(n.lastIndex=c),v===null?-1:v.index}]});var Fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special"},[a("div",{staticClass:"weui-search-bar",class:{"weui-search-bar_focusing":e.isTyping},attrs:{id:"searchBar"}},[a("form",{staticClass:"weui-search-bar__form",attrs:{\u03BFnsubmit:"return false;"}},[a("div",{staticClass:"weui-search-bar__box"},[a("i",{staticClass:"weui-icon-search"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],ref:"searchInput",staticClass:"weui-search-bar__input",attrs:{type:"search",id:"searchInput",placeholder:"\u641C\u7D22",required:""},domProps:{value:e.inputText},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.search.apply(null,arguments)},input:function(i){i.target.composing||(e.inputText=i.target.value)}}}),a("input",{staticStyle:{display:"none"}}),a("a",{staticClass:"weui-icon-clear",attrs:{href:"javascript:",id:"searchClear"},on:{click:function(i){e.inputText=""}}})]),a("label",{ref:"searchText",staticClass:"weui-search-bar__label",attrs:{id:"searchText"},on:{click:e.searchTextClick}},[a("i",{staticClass:"weui-icon-search"}),a("span",[e._v("\u641C\u7D22")])])]),a("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:",id:"searchCancel"},on:{click:function(i){e.isTyping=!1}}},[e._v("\u53D6\u6D88")])]),a("div",{staticClass:"items"},e._l(e.hotwords,function(n,i){return a("div",{key:i,staticClass:"item",on:{click:function(c){return e.itemClick(n)}}},[e._v(e._s(n.dspwd))])}),0),a("list",{attrs:{dataList:e.vodrows.length>0?e.vodrows:e.hotrows}}),e.page>0?a("infinite-loading",{ref:"infiniteLoading",attrs:{identifier:e.identifier},on:{infinite:e.infinite}}):e._e()],1)},Gr=[];const Vr={name:"keepAlive",components:{list:oe},data(){return{hotwords:[],hotrows:[],vodrows:[],page:0,inputText:"",isTyping:!1,identifier:""}},computed:{},created(){},mounted(){this.loadData(1)},methods:{searchTextClick(){this.isTyping=!0,this.$refs.searchInput.focus()},search(r){console.log("search",r),this.loadData(1)},itemClick(r){this.inputText=r.dspwd,this.isTyping=!0,this.loadData(1)},infinite(r){console.log("onReachBottom"),this.loadData(this.page+1,r)},loadData(r,e){console.log("config",x,x.query()),r===1&&(this.page=0,this.identifier=new Date().valueOf());let t=x.query();t.page=r,this.inputText&&(t.wd=this.inputText),this.$axios.request({url:x.origin+"/search",params:x.query()}).then(a=>{console.log("success",a),a.status==200&&a.data.retcode==0?(this.page=r,a.data.data.hotwords&&(this.hotwords=a.data.data.hotwords),a.data.data.hotrows?this.hotrows=a.data.data.hotrows:(this.page==1?this.vodrows=a.data.data.vodrows:this.vodrows=this.vodrows.concat(a.data.data.vodrows),a.data.data.vodrows.length==0&&(weui.topTips("\u6CA1\u4E86"),e&&e.complete())),e&&e.loaded()):weui.topTips(a.data.errmsg||a.statusCode||"fail")}).catch(a=>{e&&e.loaded(),weui.topTips(a.message||"fail")})}},watch:{inputText:{handler:function(r,e){},immediate:!1}}},Q={};var Wr=Oe(Vr,Fr,Gr,!1,Yr,"407ae272",null,null);function Yr(r){for(let e in Q)this[e]=Q[e]}var Qr=function(){return Wr.exports}();export{Qr as default};
