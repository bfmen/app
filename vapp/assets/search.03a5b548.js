import{c as _}from"./config.959b753b.js";import oe from"./list.88ba7bc3.js";import{n as le,q as g,r as T,s as N,u as ce,v as Z,w as ue,x as ve,o as de,y as fe,z as pe,A as he,B as xe,C as ge,D as A,h as ee,E as me,F as ye,_ as _e,G as be,p as we,H as Ee,I as Te,J as Ce,K as Ie,L as $e}from"./array-method-has-species-support.f33995b6.js";import{n as Oe}from"./index.aec38414.js";var Se=le,Re=String,re=function(r){if(Se(r)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Re(r)},Pe=g,je=function(){var r=Pe(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.sticky&&(e+="y"),e},B=T,ke=N,K=ke.RegExp,U=B(function(){var r=K("a","y");return r.lastIndex=2,r.exec("abcd")!=null}),De=U||B(function(){return!K("a","y").sticky}),Ne=U||B(function(){var r=K("^r","gy");return r.lastIndex=2,r.exec("str")!=null}),Ae={BROKEN_CARET:Ne,MISSED_STICKY:De,UNSUPPORTED_Y:U},ae={},Be=ce,Ke=Z,Ue=Object.keys||function(e){return Be(e,Ke)},Le=ue,Me=ve,qe=de,Fe=g,Ge=fe,Ve=Ue;ae.f=Le&&!Me?Object.defineProperties:function(e,a){Fe(e);for(var t=Ge(a),n=Ve(a),i=n.length,l=0,c;i>l;)qe.f(e,c=n[l++],t[c]);return e};var ze=pe,We=ze("document","documentElement"),Ye=g,He=ae,M=Z,Je=xe,Xe=We,Qe=ge,Ze=he,q=">",F="<",R="prototype",P="script",te=Ze("IE_PROTO"),$=function(){},ne=function(r){return F+P+q+r+F+"/"+P+q},G=function(r){r.write(ne("")),r.close();var e=r.parentWindow.Object;return r=null,e},er=function(){var r=Qe("iframe"),e="java"+P+":",a;return r.style.display="none",Xe.appendChild(r),r.src=String(e),a=r.contentWindow.document,a.open(),a.write(ne("document.F=Object")),a.close(),a.F},b,w=function(){try{b=new ActiveXObject("htmlfile")}catch{}w=typeof document!="undefined"?document.domain&&b?G(b):er():G(b);for(var r=M.length;r--;)delete w[R][M[r]];return w()};Je[te]=!0;var rr=Object.create||function(e,a){var t;return e!==null?($[R]=Ye(e),t=new $,$[R]=null,t[te]=e):t=w(),a===void 0?t:He.f(t,a)},ar=T,tr=N,nr=tr.RegExp,ir=ar(function(){var r=nr(".","s");return!(r.dotAll&&r.exec(`
`)&&r.flags==="s")}),sr=T,or=N,lr=or.RegExp,cr=sr(function(){var r=lr("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),f=A,C=ee,ur=re,vr=je,dr=Ae,fr=me.exports,pr=rr,hr=ye.get,xr=ir,gr=cr,mr=fr("native-string-replace",String.prototype.replace),E=RegExp.prototype.exec,j=E,yr=C("".charAt),_r=C("".indexOf),br=C("".replace),O=C("".slice),k=function(){var r=/a/,e=/b*/g;return f(E,r,"a"),f(E,e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),ie=dr.BROKEN_CARET,D=/()??/.exec("")[1]!==void 0,wr=k||D||ie||xr||gr;wr&&(j=function(e){var a=this,t=hr(a),n=ur(e),i=t.raw,l,c,v,s,o,p,d;if(i)return i.lastIndex=a.lastIndex,l=f(j,i,n),a.lastIndex=i.lastIndex,l;var h=t.groups,x=ie&&a.sticky,u=f(vr,a),m=a.source,I=0,y=n;if(x&&(u=br(u,"y",""),_r(u,"g")===-1&&(u+="g"),y=O(n,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&yr(n,a.lastIndex-1)!==`
`)&&(m="(?: "+m+")",y=" "+y,I++),c=new RegExp("^(?:"+m+")",u)),D&&(c=new RegExp("^"+m+"$(?!\\s)",u)),k&&(v=a.lastIndex),s=f(E,x?c:a,y),x?s?(s.input=O(s.input,I),s[0]=O(s[0],I),s.index=a.lastIndex,a.lastIndex+=s[0].length):a.lastIndex=0:k&&s&&(a.lastIndex=a.global?s.index+s[0].length:v),D&&s&&s.length>1&&f(mr,s[0],c,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===void 0&&(s[o]=void 0)}),s&&h)for(s.groups=p=pr(null),o=0;o<h.length;o++)d=h[o],p[d[0]]=s[d[1]];return s});var L=j,Er=_e,V=L;Er({target:"RegExp",proto:!0,forced:/./.exec!==V},{exec:V});var z=ee,W=we,Tr=L,Y=T,se=be,Cr=Ee,Ir=se("species"),S=RegExp.prototype,$r=function(r,e,a,t){var n=se(r),i=!Y(function(){var s={};return s[n]=function(){return 7},""[r](s)!=7}),l=i&&!Y(function(){var s=!1,o=/a/;return r==="split"&&(o={},o.constructor={},o.constructor[Ir]=function(){return o},o.flags="",o[n]=/./[n]),o.exec=function(){return s=!0,null},o[n](""),!s});if(!i||!l||a){var c=z(/./[n]),v=e(n,""[r],function(s,o,p,d,h){var x=z(s),u=o.exec;return u===Tr||u===S.exec?i&&!h?{done:!0,value:c(o,p,d)}:{done:!0,value:x(p,o,d)}:{done:!1}});W(String.prototype,r,v[0]),W(S,n,v[1])}t&&Cr(S[n],"sham",!0)},Or=Object.is||function(e,a){return e===a?e!==0||1/e===1/a:e!=e&&a!=a},H=A,Sr=g,Rr=Te,Pr=Ce,jr=L,kr=TypeError,Dr=function(r,e){var a=r.exec;if(Rr(a)){var t=H(a,r,e);return t!==null&&Sr(t),t}if(Pr(r)==="RegExp")return H(jr,r,e);throw kr("RegExp#exec called on incompatible receiver")},Nr=A,Ar=$r,Br=g,Kr=Ie,J=Or,X=re,Ur=$e,Lr=Dr;Ar("search",function(r,e,a){return[function(n){var i=Kr(this),l=n==null?void 0:Ur(n,r);return l?Nr(l,n,i):new RegExp(n)[r](X(i))},function(t){var n=Br(this),i=X(t),l=a(e,n,i);if(l.done)return l.value;var c=n.lastIndex;J(c,0)||(n.lastIndex=0);var v=Lr(n,i);return J(n.lastIndex,c)||(n.lastIndex=c),v===null?-1:v.index}]});var Mr=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"special"},[t("div",{staticClass:"weui-search-bar",class:{"weui-search-bar_focusing":e.isTyping},attrs:{id:"searchBar"}},[t("form",{staticClass:"weui-search-bar__form",attrs:{\u03BFnsubmit:"return false;"}},[t("div",{staticClass:"weui-search-bar__box"},[t("i",{staticClass:"weui-icon-search"}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],ref:"searchInput",staticClass:"weui-search-bar__input",attrs:{type:"search",id:"searchInput",placeholder:"\u641C\u7D22",required:""},domProps:{value:e.inputText},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.search.apply(null,arguments)},input:function(i){i.target.composing||(e.inputText=i.target.value)}}}),t("input",{staticStyle:{display:"none"}}),t("a",{staticClass:"weui-icon-clear",attrs:{href:"javascript:",id:"searchClear"},on:{click:function(i){e.inputText=""}}})]),t("label",{ref:"searchText",staticClass:"weui-search-bar__label",attrs:{id:"searchText"},on:{click:e.searchTextClick}},[t("i",{staticClass:"weui-icon-search"}),t("span",[e._v("\u641C\u7D22")])])]),t("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:",id:"searchCancel"},on:{click:function(i){e.isTyping=!1}}},[e._v("\u53D6\u6D88")])]),t("div",{staticClass:"items"},e._l(e.hotwords,function(n,i){return t("div",{key:i,staticClass:"item",on:{click:function(c){return e.itemClick(n)}}},[e._v(" "+e._s(n.dspwd)+" ")])}),0),t("list",{attrs:{dataList:e.vodrows.length>0?e.vodrows:e.hotrows}}),e.page>0?t("infinite-loading",{ref:"infiniteLoading",attrs:{identifier:e.identifier},on:{infinite:e.infinite}}):e._e()],1)},qr=[];const Fr={name:"keepAlive",components:{list:oe},data(){return{hotwords:[],hotrows:[],vodrows:[],page:0,inputText:"",isTyping:!1,identifier:""}},computed:{},created(){},mounted(){this.loadData(1)},methods:{searchTextClick(){this.isTyping=!0,this.$refs.searchInput.focus()},search(r){console.log("search",r),this.loadData(1)},itemClick(r){this.inputText=r.dspwd,this.isTyping=!0,this.loadData(1)},infinite(r){console.log("onReachBottom"),this.loadData(this.page+1,r)},loadData(r,e){console.log("config",_,_.query()),r===1&&(this.page=0,this.identifier=new Date().valueOf());let a=_.query();a.page=r,this.inputText&&(a.wd=this.inputText),this.$axios.request({url:_.origin+"/search",params:a}).then(t=>{if(console.log("success",t),t.status==200&&t.data.retcode==0){this.page=r,t.data.data.hotwords&&(this.hotwords=t.data.data.hotwords);let n=t.data.data.hotrows||t.data.data.vodrows;n?(this.page==1?this.vodrows=n:this.vodrows=this.vodrows.concat(n),n.length==0&&(weui.topTips("\u6CA1\u4E86"),e&&e.complete())):(weui.topTips("\u6CA1\u4E86"),e&&e.complete()),e&&e.loaded()}else weui.topTips(t.data.errmsg||t.statusCode||"fail")}).catch(t=>{e&&e.loaded(),weui.topTips(t.message||"fail")})}},watch:{inputText:{handler:function(r,e){},immediate:!1}}},Q={};var Gr=Oe(Fr,Mr,qr,!1,Vr,"f14ef39c",null,null);function Vr(r){for(let e in Q)this[e]=Q[e]}var Jr=function(){return Gr.exports}();export{Jr as default};
