import{n as s,_ as l}from"./index.89752cd0.js";import"./axios.d4e4ac5f.js";import"./index.99da5c49.js";import{m as n}from"./index.2a3142de.js";import"./config.56e9fedd.js";var d=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("van-dropdown-menu",[t("van-dropdown-item",{attrs:{options:e.dropdownOptions},model:{value:e.dropdownValue,callback:function(o){e.dropdownValue=o},expression:"dropdownValue"}})],1),t("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(o){e.refreshing=o},expression:"refreshing"}},[t("van-list",{attrs:{finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:function(o){return e.loadData(++e.page)}},model:{value:e.loading,callback:function(o){e.loading=o},expression:"loading"}},[t("ccItem",{attrs:{dataSource:e.listV},on:{open:e.open}})],1)],1)],1)},u=[];const c={components:{ccItem:()=>l(()=>import("./ccItem.4e9b3708.js"),["assets/ccItem.4e9b3708.js","assets/ccItem.2cbfb4ff.css","assets/index.89752cd0.js","assets/index.70ce4827.css"])},data(){return{dataSource:{},optionNew:{text:"new",value:""},dropdownValue:"",page:0,refreshing:!1,loading:!1,finished:!1,current:{}}},computed:{listV(){return this.dataSource.listV||[]},submenu(){return this.dataSource.submenu||[]},dropdownOptions(){return[this.optionNew,...this.submenu.map(e=>({text:e.title,value:e.href.split("?")[1]}))]}},watch:{dropdownValue(){this.loadData()}},async created(){},methods:{onRefresh(){this.loadData()},async loadData(e=1){let{data:a}=await n.axios({params:{uuu:`/v.php?${this.dropdownValue}&page=${e}`}});if(a){let t=n.utils.format.all(a);this.dataSource=e==1?t:{...t,listV:[...t.listV,...this.dataSource.listV]},this.page=e,this.refreshing=!1,this.loading=!1}},async open(e,a){if(e&&a.href){let t=weui.loading(),o=await n.axios({params:{uuu:a.href}});t.hide();let i=n.utils.format.all(o.data);this.$set(a,"detail",i.detail)}},async itemClick(e){if(!e.detail){let a=weui.loading(),t=await n.axios({params:{uuu:e.href}});a.hide();let o=n.utils.format.all(t.data);this.$set(e,"detail",o.detail)}this.current=e.detail}}},r={};var p=s(c,d,u,!1,f,"fdaad32a",null,null);function f(e){for(let a in r)this[a]=r[a]}var g=function(){return p.exports}();export{g as default};
