import{c as b}from"./config.959b753b.js";import oe from"./list.b73aba3b.js";import{g as x,n as le,q as m,r as C,s as ce,u as Z,v as ue,w as ve,o as de,x as fe,y as pe,z as he,A as ge,B as xe,C as A,h as ee,D as me,E as ye,_ as _e,F as be,p as Ee,G as we,H as Te,I as Ce,J as $e,K as Ie}from"./array-method-has-species-support.3d205d52.js";import{n as Oe}from"./index.9fbadcc0.js";var Se=x,Re=le,Pe=Se.String,re=function(r){if(Re(r)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Pe(r)},je=m,ke=function(){var r=je(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.sticky&&(e+="y"),e},B=C,De=x,K=De.RegExp,U=B(function(){var r=K("a","y");return r.lastIndex=2,r.exec("abcd")!=null}),Ne=U||B(function(){return!K("a","y").sticky}),Ae=U||B(function(){var r=K("^r","gy");return r.lastIndex=2,r.exec("str")!=null}),Be={BROKEN_CARET:Ae,MISSED_STICKY:Ne,UNSUPPORTED_Y:U},ae={},Ke=ce,Ue=Z,Le=Object.keys||function(e){return Ke(e,Ue)},Me=ue,qe=ve,Fe=de,Ge=m,Ve=fe,We=Le;ae.f=Me&&!qe?Object.defineProperties:function(e,a){Ge(e);for(var t=Ve(a),n=We(a),i=n.length,l=0,c;i>l;)Fe.f(e,c=n[l++],t[c]);return e};var Ye=pe,He=Ye("document","documentElement"),ze=m,Je=ae,M=Z,Xe=ge,Qe=He,Ze=xe,er=he,q=">",F="<",P="prototype",j="script",te=er("IE_PROTO"),O=function(){},ne=function(r){return F+j+q+r+F+"/"+j+q},G=function(r){r.write(ne("")),r.close();var e=r.parentWindow.Object;return r=null,e},rr=function(){var r=Ze("iframe"),e="java"+j+":",a;return r.style.display="none",Qe.appendChild(r),r.src=String(e),a=r.contentWindow.document,a.open(),a.write(ne("document.F=Object")),a.close(),a.F},E,w=function(){try{E=new ActiveXObject("htmlfile")}catch{}w=typeof document!="undefined"?document.domain&&E?G(E):rr():G(E);for(var r=M.length;r--;)delete w[P][M[r]];return w()};Xe[te]=!0;var ar=Object.create||function(e,a){var t;return e!==null?(O[P]=ze(e),t=new O,O[P]=null,t[te]=e):t=w(),a===void 0?t:Je.f(t,a)},tr=C,nr=x,ir=nr.RegExp,sr=tr(function(){var r=ir(".","s");return!(r.dotAll&&r.exec(`
`)&&r.flags==="s")}),or=C,lr=x,cr=lr.RegExp,ur=or(function(){var r=cr("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),f=A,$=ee,vr=re,dr=ke,fr=Be,pr=me.exports,hr=ar,gr=ye.get,xr=sr,mr=ur,yr=pr("native-string-replace",String.prototype.replace),T=RegExp.prototype.exec,k=T,_r=$("".charAt),br=$("".indexOf),Er=$("".replace),S=$("".slice),D=function(){var r=/a/,e=/b*/g;return f(T,r,"a"),f(T,e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),ie=fr.BROKEN_CARET,N=/()??/.exec("")[1]!==void 0,wr=D||N||ie||xr||mr;wr&&(k=function(e){var a=this,t=gr(a),n=vr(e),i=t.raw,l,c,v,s,o,p,d;if(i)return i.lastIndex=a.lastIndex,l=f(k,i,n),a.lastIndex=i.lastIndex,l;var h=t.groups,g=ie&&a.sticky,u=f(dr,a),y=a.source,I=0,_=n;if(g&&(u=Er(u,"y",""),br(u,"g")===-1&&(u+="g"),_=S(n,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&_r(n,a.lastIndex-1)!==`
`)&&(y="(?: "+y+")",_=" "+_,I++),c=new RegExp("^(?:"+y+")",u)),N&&(c=new RegExp("^"+y+"$(?!\\s)",u)),D&&(v=a.lastIndex),s=f(T,g?c:a,_),g?s?(s.input=S(s.input,I),s[0]=S(s[0],I),s.index=a.lastIndex,a.lastIndex+=s[0].length):a.lastIndex=0:D&&s&&(a.lastIndex=a.global?s.index+s[0].length:v),N&&s&&s.length>1&&f(yr,s[0],c,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===void 0&&(s[o]=void 0)}),s&&h)for(s.groups=p=hr(null),o=0;o<h.length;o++)d=h[o],p[d[0]]=s[d[1]];return s});var L=k,Tr=_e,V=L;Tr({target:"RegExp",proto:!0,forced:/./.exec!==V},{exec:V});var W=ee,Y=Ee,Cr=L,H=C,se=be,$r=we,Ir=se("species"),R=RegExp.prototype,Or=function(r,e,a,t){var n=se(r),i=!H(function(){var s={};return s[n]=function(){return 7},""[r](s)!=7}),l=i&&!H(function(){var s=!1,o=/a/;return r==="split"&&(o={},o.constructor={},o.constructor[Ir]=function(){return o},o.flags="",o[n]=/./[n]),o.exec=function(){return s=!0,null},o[n](""),!s});if(!i||!l||a){var c=W(/./[n]),v=e(n,""[r],function(s,o,p,d,h){var g=W(s),u=o.exec;return u===Cr||u===R.exec?i&&!h?{done:!0,value:c(o,p,d)}:{done:!0,value:g(p,o,d)}:{done:!1}});Y(String.prototype,r,v[0]),Y(R,n,v[1])}t&&$r(R[n],"sham",!0)},Sr=Object.is||function(e,a){return e===a?e!==0||1/e===1/a:e!=e&&a!=a},Rr=x,z=A,Pr=m,jr=Te,kr=Ce,Dr=L,Nr=Rr.TypeError,Ar=function(r,e){var a=r.exec;if(jr(a)){var t=z(a,r,e);return t!==null&&Pr(t),t}if(kr(r)==="RegExp")return z(Dr,r,e);throw Nr("RegExp#exec called on incompatible receiver")},Br=A,Kr=Or,Ur=m,Lr=$e,J=Sr,X=re,Mr=Ie,qr=Ar;Kr("search",function(r,e,a){return[function(n){var i=Lr(this),l=n==null?void 0:Mr(n,r);return l?Br(l,n,i):new RegExp(n)[r](X(i))},function(t){var n=Ur(this),i=X(t),l=a(e,n,i);if(l.done)return l.value;var c=n.lastIndex;J(c,0)||(n.lastIndex=0);var v=qr(n,i);return J(n.lastIndex,c)||(n.lastIndex=c),v===null?-1:v.index}]});var Fr=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"special"},[t("div",{staticClass:"weui-search-bar",class:{"weui-search-bar_focusing":e.isTyping},attrs:{id:"searchBar"}},[t("form",{staticClass:"weui-search-bar__form",attrs:{\u03BFnsubmit:"return false;"}},[t("div",{staticClass:"weui-search-bar__box"},[t("i",{staticClass:"weui-icon-search"}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],ref:"searchInput",staticClass:"weui-search-bar__input",attrs:{type:"search",id:"searchInput",placeholder:"\u641C\u7D22",required:""},domProps:{value:e.inputText},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.search.apply(null,arguments)},input:function(i){i.target.composing||(e.inputText=i.target.value)}}}),t("input",{staticStyle:{display:"none"}}),t("a",{staticClass:"weui-icon-clear",attrs:{href:"javascript:",id:"searchClear"},on:{click:function(i){e.inputText=""}}})]),t("label",{ref:"searchText",staticClass:"weui-search-bar__label",attrs:{id:"searchText"},on:{click:e.searchTextClick}},[t("i",{staticClass:"weui-icon-search"}),t("span",[e._v("\u641C\u7D22")])])]),t("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:",id:"searchCancel"},on:{click:function(i){e.isTyping=!1}}},[e._v("\u53D6\u6D88")])]),t("div",{staticClass:"items"},e._l(e.hotwords,function(n,i){return t("div",{key:i,staticClass:"item",on:{click:function(c){return e.itemClick(n)}}},[e._v(" "+e._s(n.dspwd)+" ")])}),0),t("list",{attrs:{dataList:e.vodrows.length>0?e.vodrows:e.hotrows}}),e.page>0?t("infinite-loading",{ref:"infiniteLoading",attrs:{identifier:e.identifier},on:{infinite:e.infinite}}):e._e()],1)},Gr=[];const Vr={name:"keepAlive",components:{list:oe},data(){return{hotwords:[],hotrows:[],vodrows:[],page:0,inputText:"",isTyping:!1,identifier:""}},computed:{},created(){},mounted(){this.loadData(1)},methods:{searchTextClick(){this.isTyping=!0,this.$refs.searchInput.focus()},search(r){console.log("search",r),this.loadData(1)},itemClick(r){this.inputText=r.dspwd,this.isTyping=!0,this.loadData(1)},infinite(r){console.log("onReachBottom"),this.loadData(this.page+1,r)},loadData(r,e){console.log("config",b,b.query()),r===1&&(this.page=0,this.identifier=new Date().valueOf());let a=b.query();a.page=r,this.inputText&&(a.wd=this.inputText),this.$axios.request({url:b.origin+"/search",params:a}).then(t=>{if(console.log("success",t),t.status==200&&t.data.retcode==0){this.page=r,t.data.data.hotwords&&(this.hotwords=t.data.data.hotwords);let n=t.data.data.hotrows||t.data.data.vodrows;n?(this.page==1?this.vodrows=n:this.vodrows=this.vodrows.concat(n),n.length==0&&(weui.topTips("\u6CA1\u4E86"),e&&e.complete())):(weui.topTips("\u6CA1\u4E86"),e&&e.complete()),e&&e.loaded()}else weui.topTips(t.data.errmsg||t.statusCode||"fail")}).catch(t=>{e&&e.loaded(),weui.topTips(t.message||"fail")})}},watch:{inputText:{handler:function(r,e){},immediate:!1}}},Q={};var Wr=Oe(Vr,Fr,Gr,!1,Yr,"f14ef39c",null,null);function Yr(r){for(let e in Q)this[e]=Q[e]}var Qr=function(){return Wr.exports}();export{Qr as default};
