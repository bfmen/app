import{c as r}from"./config.959b753b.js";import l from"./list.88ba7bc3.js";import{n as c}from"./index.aec38414.js";import"./array-method-has-species-support.f33995b6.js";var d=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"special"},[i("div",{staticClass:"header"},a._l(a.dataSource.actorrows,function(s,o){return i("div",{key:o,staticClass:"item",on:{click:function(_){return a.itemClick(s)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.avatar,expression:"item.avatar"}],staticClass:"image",attrs:{mode:"aspectFill"}}),i("div",{staticClass:"title",domProps:{textContent:a._s(s.spname)}},[a._v(">")])])}),0),i("div",{staticClass:"content"},[i("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:a.onRefresh},model:{value:a.isLoading,callback:function(o){a.isLoading=o},expression:"isLoading"}},a._l(a.dataSource.rows,function(s,o){return i("list",{key:o,attrs:{info:s,title:s.spname+" "+s.itemcount+"\u90E8",dataList:s.vodrows}})}),1),i("infinite-loading",{ref:"infiniteLoading",on:{infinite:a.infinite}})],1)])},p=[];const u={name:"keepAlive",components:{list:l},data(){return{dataSource:{},page:0,isLoading:!1}},computed:{v2sliderows(){let t=[];return this.dataSource.v2sliderows&&this.dataSource.v2sliderows.forEach(a=>{a.scene=="special.detail"&&t.push(a)}),t}},methods:{onRefresh(){this.loadData(1,this.$state)},itemClick(t){t.spid&&this.$router.push({path:"./detail?spid="+t.spid})},infinite(t){console.log("onReachBottom"),this.loadData(this.page+1,t)},loadData(t,a){console.log("config",r,r.query()),this.$axios.request({url:r.origin+"/special/listing-0-0-"+t,params:r.query()}).then(e=>{console.log("success",e),e.status==200&&e.data.retcode==0?(this.page=t,this.page==1?this.dataSource=e.data.data:(this.dataSource.actorrows=e.data.data.actorrows,this.dataSource.rows=this.dataSource.rows.concat(e.data.data.rows)),e.data.data.rows.length<16?a&&a.complete():a&&a.loaded()):(weui.topTips(e.data.errmsg||e.statusCode||"fail"),a.loaded())}).catch(e=>{a&&a.loaded(),weui.topTips(e.message||"fail")}).finally(()=>{this.isLoading=!1})}}},n={};var f=c(u,d,p,!1,h,"35c019b0",null,null);function h(t){for(let a in n)this[a]=n[a]}var y=function(){return f.exports}();export{y as default};
