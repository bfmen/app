import{c as r}from"./config.b0b2fcdf.js";import c from"./list.5113b298.js";import u from"./tagSelect.1ee0a908.js";import{n as d}from"./index.d6a0a01a.js";var m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hot"},[i("div",{staticClass:"weui-tab"},[i("div",{staticClass:"weui-navbar"},t._l(t.items,function(n,a){return i("div",{key:a,staticClass:"weui-navbar__item",class:{"weui-bar__item_on":t.current==a},on:{click:function(s){return t.onClickItem(a)}}},[t._v(" "+t._s(n)+" ")])}),0),i("div",{staticClass:"weui-tab__panel"})]),i("van-pull-refresh",{staticStyle:{overflow:"inherit"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(n){t.isLoading=n},expression:"isLoading"}},[i("list",{attrs:{dataList:t.list[t.current].items}})],1),i("infinite-loading",{ref:"infiniteLoading",on:{infinite:t.infinite}})],1)},f=[];const h={name:"keepAlive",components:{list:c,tagSelect:u},data(){return{isLoading:!1,list:[{title:"\u63A8\u8350",items:[],src:"/vod/recommend-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u70ED\u70B9",items:[],src:"/vod/hot-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u53D1\u73B0",items:[],src:"/vod/latest-0-0-0-0-0-0-0-0-0-",page:0}],current:1,vodid:""}},onLoad(t){},created(){},computed:{items(){return this.list.map(t=>t.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(t){this.current!==t&&(this.current=t,this.list[this.current].items.length==0&&window.scrollY==0&&this.loadData(1))},loadData(t,e){const i=r.origin+this.list[this.current].src+t,n=t,a=this.current;this.$axios.request({url:i,params:r.query()}).then(s=>{if(console.log("success",s),s.status==200&&s.data.retcode==0){var o=s.data.data.vodrows;this.list[a].items=n==1?o:this.list[a].items.concat(o),this.list[a].page=n}else weui.topTips(s.data.errmsg||s.statusCode||"fail");e&&e.loaded()}).catch(s=>{e&&e.loaded(),weui.topTips(s.message||"fail")}).finally(()=>{this.isLoading=!1})},infinite(t){console.log("onReachBottom"),this.loadData(this.list[this.current].page+1,t)}}},l={};var _=d(h,m,f,!1,v,"64089cdd",null,null);function v(t){for(let e in l)this[e]=l[e]}var L=function(){return _.exports}();export{L as default};
