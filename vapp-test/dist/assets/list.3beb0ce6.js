import{c as S}from"./config.63bc69ee.js";import{h as I,i as E,j as T,k,b as L,l as R,d as U,_ as j,a as A,m as O,n as w,r as N}from"./array-method-has-species-support.518ddb83.js";import{n as V}from"./index.47e2b3c9.js";var g=I,F=T,G=E,H=g(g.bind),z=function(e,t){return F(e),t===void 0?e:G?H(e,t):function(){return e.apply(t,arguments)}},B=z,D=I,q=k,J=L,X=R,K=U,C=D([].push),r=function(e){var t=e==1,d=e==2,i=e==3,a=e==4,n=e==6,p=e==7,_=e==5||n;return function(c,b,$,M){for(var f=J(c),u=q(f),x=B(b,$),h=X(u),s=0,m=M||K,l=t?m(c,h):d||p?m(c,0):void 0,o,v;h>s;s++)if((_||s in u)&&(o=u[s],v=x(o,s,f),e))if(t)l[s]=v;else if(v)switch(e){case 3:return!0;case 5:return o;case 6:return s;case 2:C(l,o)}else switch(e){case 4:return!1;case 7:C(l,o)}return n?-1:i||a?a:l}},Q={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterReject:r(7)},W=j,Z=Q.filter,P=A,Y=P("filter");W({target:"Array",proto:!0,forced:!Y},{filter:function(t){return Z(this,t,arguments.length>1?arguments[1]:void 0)}});var tt=O,et=w,at=tt?{}.toString:function(){return"[object "+et(this)+"]"},it=O,rt=N.exports,st=at;it||rt(Object.prototype,"toString",st,{unsafe:!0});var nt=function(){var t=this,d=t.$createElement,i=t._self._c||d;return i("div",{staticClass:"list"},[t.title?i("div",{staticClass:"header",on:{click:t.headerClick}},[i("span",{staticClass:"title"},[t._v(t._s(t.title))]),i("span",{staticClass:"more"},[t._v("\u66F4\u591A")])]):t._e(),i("div",{staticClass:"numInfo"},[t._v(" "+t._s(this.dataList.filter(function(a){return a.isvip!=1}).length)+"/"+t._s(t.dataList.length)+" ")]),i("div",{staticClass:"items"},t._l(t.list,function(a,n){return i("div",{key:n+a.vodid,staticClass:"item",class:{itemMin:t.isMin},on:{click:function(_){return t.itemClick(a,n)}}},[t.vodid==a.vodid&&t.videoUrl?i("video",{ref:"video"+a.vodid,refInFor:!0,staticClass:"video bananaListVideo",class:{videoMin:t.isMin},attrs:{controls:"controls",playsinline:"",autoplay:"",title:a.title,poster:a.coverpic,"picture-in-picture-mode":["push","pop"],src:t.videoUrl}}):i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.coverpic,expression:"item.coverpic"}],staticClass:"image",class:{imagemMin:t.isMin},attrs:{mode:"aspectFit"}}),i("span",[t._v(t._s(a.title||a.catename))]),i("div",{staticClass:"tips"},[a.isvip==1?i("span",{staticClass:"isvip"},[t._v(t._s(a.isvip==1?"vip":""))]):t._e(),a.definition>0?i("span",{staticClass:"definition"},[t._v(t._s(a.definition))]):t._e(),t.isMin?t._e():i("span",{staticClass:"updatetime"},[t._v(t._s(a.updatetime))]),i("span",{staticClass:"upnum"},[t._v(t._s(a.upnum))]),i("span",{staticClass:"scorenum"},[t._v(t._s(a.scorenum))]),i("span",{staticClass:"duration"},[t._v(t._s(a.duration))])])])}),0)])},ot=[];const lt={props:{dataList:{default:()=>[]},info:{default:()=>({})},title:{default:""},isMin:{default:!1}},data(){return{vodid:"",videoUrl:""}},computed:{list(){return this.dataList.filter(e=>this.$store.state.banana.isVipShow||e.isvip!=1)}},methods:{headerClick(){this.info.spid?this.$router.push({path:"./detail?spid="+this.info.spid}):this.$router.push({path:"./class"})},itemClick(e){e.vodid!=this.vodid&&this.$axios({url:S.origin+e.play_url,params:S.query()}).then(t=>{console.log("success",t),t.data.data.httpurl?(this.videoUrl=t.data.data.httpurl,this.vodid=e.vodid,this.hideOtherVideo()):t.data.data.httpurl_preview?(this.videoUrl=t.data.data.httpurl_preview,this.vodid=e.vodid,this.hideOtherVideo()):weui.topTips(t.data.errmsg||"fail"),document&&(document.title=e.title)}).catch(t=>{weui.topTips(t.message||"fail")})},hideOtherVideo(){setTimeout(()=>{this.$refs["video"+this.vodid][0].play();let e=new Array(...document.querySelectorAll(".bananaListVideo")).filter(t=>t.src!=this.videoUrl).forEach(t=>{t.pause(),t.parentElement.parentElement.parentElement.__vue__.vodid="",t.parentElement.parentElement.parentElement.__vue__.videoUrl=""});console.log(e)})}}},y={};var dt=V(lt,nt,ot,!1,ct,"22444fd0",null,null);function ct(e){for(let t in y)this[t]=y[t]}var _t=function(){return dt.exports}();export{_t as default};
