import{_ as L,M as w,o as m,c as f,f as a,w as l,F as k,r as x,a as y}from"./index.f95248ab.2023_02_09_02_42_44.js";import{T as V,a as b}from"./index.fca68d49.js";import{P as C}from"./index.e9759bbd.js";import{L as R}from"./index.57b002c2.js";import{c as h}from"./config.6caa491d.js";import B from"./list.ee819e51.js";import D from"./tagSelect.08c1f32c.js";import{a as I}from"./axios.b9f958b0.js";import"./use-id.942792ff.js";import"./index.456f9c5f.js";const P={name:"keepAlive",components:{list:B,tagSelect:D},data(){return{isLoading:!1,loading:!1,finished:!1,list:[{title:"\u63A8\u8350",items:[],src:"/vod/recommend-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u70ED\u70B9",items:[],src:"/vod/hot-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u53D1\u73B0",items:[],src:"/vod/latest-0-0-0-0-0-0-0-0-0-",page:0}],current:1,vodid:""}},onLoad(i){},created(){},computed:{items(){return this.list.map(i=>i.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(i){this.list[this.current].items.length==0&&window.scrollY==0&&this.loadData(1)},loadData(i,s){const c=h.origin+this.list[this.current].src+i,r=i,t=this.current;I.request({url:c,params:h.query()}).then(e=>{if(console.log("success",e),e.status==200&&e.data.retcode==0){var o=e.data.data.vodrows;this.list[t].items=r==1?o:this.list[t].items.concat(o),this.list[t].page=r}else window.$dialog.alert({title:e.data.errmsg||e.statusCode||"fail"})}).catch(e=>{window.$dialog.alert({title:e.message||"fail"})}).finally(()=>{this.isLoading=!1,this.loading=!1})},infinite(){console.log("onReachBottom"),this.loading=!0,this.loadData(this.list[this.current].page+1)}}},T={class:"hot"};function U(i,s,c,r,t,e){const o=w("list"),p=R,_=C,g=V,v=b;return m(),f("div",T,[a(v,{active:t.current,"onUpdate:active":s[2]||(s[2]=n=>t.current=n),onChange:s[3]||(s[3]=n=>e.onClickItem(i.index))},{default:l(()=>[(m(!0),f(k,null,x(e.items,(n,u)=>(m(),y(g,{title:n,name:u,key:u},{default:l(()=>[a(_,{modelValue:t.isLoading,"onUpdate:modelValue":s[1]||(s[1]=d=>t.isLoading=d),onRefresh:e.onRefresh,style:{overflow:"inherit"}},{default:l(()=>[a(p,{modelValue:t.loading,"onUpdate:modelValue":s[0]||(s[0]=d=>t.loading=d),finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e.infinite,style:{"min-height":"50vh"}},{default:l(()=>[a(o,{dataList:t.list[t.current].items},null,8,["dataList"])]),_:1},8,["modelValue","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"])])}const z=L(P,[["render",U],["__scopeId","data-v-e8e1830b"]]);export{z as default};
