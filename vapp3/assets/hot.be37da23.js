import{_ as L,M as w,o as d,c as u,f as a,w as l,F as k,r as x,a as y}from"./index.c3a0b934.2023_02_16_00_46_06.js";import{P as V}from"./index.95ea9eff.js";import{T as C,a as R}from"./index.8c92ccdc.js";import{L as b}from"./index.60e50b8a.js";import{c as f}from"./config.6caa491d.js";import B from"./list.aabc8a46.js";import D from"./tagSelect.ae73181a.js";import{a as I}from"./axios.372962c2.js";import"./use-id.98183891.js";import"./index.c71eea99.js";const P={name:"keepAlive",components:{list:B,tagSelect:D},data(){return{isLoading:!1,loading:!1,finished:!1,list:[{title:"\u63A8\u8350",items:[],src:"/vod/recommend-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u70ED\u70B9",items:[],src:"/vod/hot-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u53D1\u73B0",items:[],src:"/vod/latest-0-0-0-0-0-0-0-0-0-",page:0}],current:1,vodid:""}},onLoad(i){},created(){},computed:{items(){return this.list.map(i=>i.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(i){this.list[this.current].items.length==0&&window.scrollY==0&&this.loadData(1)},loadData(i,s){const m=f.origin+this.list[this.current].src+i,r=i,t=this.current;I.request({url:m,params:f.query()}).then(e=>{if(console.log("success",e),e.status==200&&e.data.retcode==0){var n=e.data.data.vodrows;this.list[t].items=r==1?n:this.list[t].items.concat(n),this.list[t].page=r}else window.$dialog.alert({title:e.data.errmsg||e.statusCode||"fail"})}).catch(e=>{window.$dialog.alert({title:e.message||"fail"})}).finally(()=>{this.isLoading=!1,this.loading=!1})},infinite(){console.log("onReachBottom"),this.loading=!0,this.loadData(this.list[this.current].page+1)}}},T={class:"hot"};function U(i,s,m,r,t,e){const n=w("list"),h=b,p=C,_=R,g=V;return d(),u("div",T,[a(g,{modelValue:t.isLoading,"onUpdate:modelValue":s[3]||(s[3]=o=>t.isLoading=o),onRefresh:e.onRefresh,style:{overflow:"inherit"}},{default:l(()=>[a(_,{active:t.current,"onUpdate:active":s[1]||(s[1]=o=>t.current=o),onChange:s[2]||(s[2]=o=>e.onClickItem(i.index))},{default:l(()=>[(d(!0),u(k,null,x(e.items,(o,c)=>(d(),y(p,{title:o,name:c,key:c},{default:l(()=>[a(h,{modelValue:t.loading,"onUpdate:modelValue":s[0]||(s[0]=v=>t.loading=v),finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e.infinite,style:{"min-height":"50vh"}},{default:l(()=>[a(n,{dataList:t.list[t.current].items},null,8,["dataList"])]),_:1},8,["modelValue","finished","onLoad"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"])]),_:1},8,["modelValue","onRefresh"])])}const z=L(P,[["render",U],["__scopeId","data-v-62721d50"]]);export{z as default};
