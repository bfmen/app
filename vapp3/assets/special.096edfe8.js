import{c as l}from"./config.c00927f2.js";import y from"./list.8aac7141.js";import{a as k}from"./axios.646f38c1.js";import{_ as S,r as f,e as L,o as i,c as n,f as d,F as u,b as h,h as p,w as _,i as V,t as x,a as C}from"./index.d1e0524c.2022_10_30_01_20_49.js";import"./index.65c29790.js";const D={name:"keepAlive",components:{list:y},data(){return{dataSource:{},page:0,isLoading:!1,loading:!1,finished:!1}},computed:{v2sliderows(){let s=[];return this.dataSource.v2sliderows&&this.dataSource.v2sliderows.forEach(e=>{e.scene=="special.detail"&&s.push(e)}),s}},methods:{onRefresh(){this.loadData(1,this.$state)},itemClick(s){s.spid&&this.$router.push({path:"./detail",query:{spid:s.spid}})},infinite(s){console.log("onReachBottom"),this.loadData(this.page+1,s)},loadData(s,e){console.log("config",l,l.query()),k({url:l.origin+"/special/listing-0-0-"+s,params:l.query()}).then(a=>{console.log("success",a),a.status==200&&a.data.retcode==0?(this.page=s,this.page==1?this.dataSource=a.data.data:(this.dataSource.actorrows=a.data.data.actorrows,this.dataSource.rows=this.dataSource.rows.concat(a.data.data.rows)),a.data.data.rows.length<16?e&&e.complete():e&&e.loaded()):(window.$dialog.alert({title:a.data.errmsg||a.statusCode||"fail"}),e.loaded())}).catch(a=>{e&&e.loaded(),window.$dialog.alert({title:a.message||"fail"})}).finally(()=>{this.isLoading=!1,this.loading=!1})}}},B={class:"special"},R={class:"header"},q=["onClick"],F={class:"image",mode:"aspectFill"},z={class:"title"},E={class:"content"};function N(s,e,a,U,t,r){const m=f("list"),g=f("van-list"),v=f("van-pull-refresh"),w=L("lazy");return i(),n("div",B,[d("div",R,[(i(!0),n(u,null,h(t.dataSource.actorrows,(o,c)=>(i(),n("div",{class:"item",key:c,onClick:b=>r.itemClick(o)},[V(d("img",F,null,512),[[w,o.avatar]]),d("div",z,x(o.spname),1)],8,q))),128))]),d("div",E,[p(v,{modelValue:t.isLoading,"onUpdate:modelValue":e[1]||(e[1]=o=>t.isLoading=o),onRefresh:r.onRefresh,style:{overflow:"inherit"}},{default:_(()=>[p(g,{modelValue:t.loading,"onUpdate:modelValue":e[0]||(e[0]=o=>t.loading=o),finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:r.infinite,style:{"min-height":"50vh"}},{default:_(()=>[(i(!0),n(u,null,h(t.dataSource.rows,(o,c)=>(i(),C(m,{info:o,key:c,title:o.spname+" "+o.itemcount+"\u90E8",dataList:o.vodrows},null,8,["info","title","dataList"]))),128))]),_:1},8,["modelValue","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])])}const J=S(D,[["render",N],["__scopeId","data-v-1f4eed86"]]);export{J as default};
