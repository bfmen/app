import{b as E,t as P,n as _,T as A,E as N,e as z,U as S,ak as K,V as B,af as $,aI as H,$ as J,f as s,J as M,k as U,a0 as Z,aJ as j,D as q,u as D,a4 as F,at as L,Z as Y,aK as G,q as Q,v as X,P as ee,ah as te,I as oe,g as V}from"./index.60d2c820.2024_04_03_04_20_21.js";import{C as ne}from"./index.28ffb25b.js";import{u as ae}from"./use-id.3ab2d7ab.js";const[W,C]=E("dropdown-menu"),se={overlay:P,zIndex:_,duration:A(.2),direction:N("down"),activeColor:String,closeOnClickOutside:P,closeOnClickOverlay:P},R=Symbol(W);var le=z({name:W,props:se,setup(t,{slots:c}){const d=ae(),o=S(),l=S(),p=S(0),{children:r,linkChildren:y}=K(R),g=B(o),f=$(()=>r.some(e=>e.state.showWrapper)),k=$(()=>{if(f.value&&U(t.zIndex))return{zIndex:+t.zIndex+1}}),b=()=>{t.closeOnClickOutside&&r.forEach(e=>{e.toggle(!1)})},v=()=>{if(l.value){const e=Z(l);t.direction==="down"?p.value=e.bottom:p.value=j.value-e.top}},O=()=>{f.value&&v()},x=e=>{r.forEach((n,a)=>{a===e?(v(),n.toggle()):n.state.showPopup&&n.toggle(!1,{immediate:!0})})},m=(e,n)=>{const{showPopup:a}=e.state,{disabled:i,titleClass:u}=e;return s("div",{id:`${d}-${n}`,role:"button",tabindex:i?void 0:0,class:[C("item",{disabled:i}),{[M]:!i}],onClick:()=>{i||x(n)}},[s("span",{class:[C("title",{down:a===(t.direction==="down"),active:a}),u],style:{color:a?t.activeColor:""}},[s("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return y({id:d,props:t,offset:p}),H(o,b),J("scroll",O,{target:g,passive:!0}),()=>{var e;return s("div",{ref:o,class:C()},[s("div",{ref:l,style:k.value,class:C("bar",{opened:f.value})},[r.map(m)]),(e=c.default)==null?void 0:e.call(c)])}}});const[re,h]=E("dropdown-item"),ie={title:String,options:q(),disabled:Boolean,teleport:[String,Object],lazyRender:P,modelValue:D,titleClass:D};var ce=z({name:re,props:ie,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:c,slots:d}){const o=F({showPopup:!1,transition:!0,showWrapper:!1}),{parent:l,index:p}=L(R);if(!l)return;const r=e=>()=>c(e),y=r("open"),g=r("close"),f=r("opened"),k=()=>{o.showWrapper=!1,c("closed")},b=e=>{t.teleport&&e.stopPropagation()},v=(e=!o.showPopup,n={})=>{e!==o.showPopup&&(o.showPopup=e,o.transition=!n.immediate,e&&(o.showWrapper=!0))},O=()=>{if(d.title)return d.title();if(t.title)return t.title;const e=t.options.find(n=>n.value===t.modelValue);return e?e.text:""},x=e=>{const{activeColor:n}=l.props,a=e.value===t.modelValue,i=()=>{o.showPopup=!1,e.value!==t.modelValue&&(c("update:modelValue",e.value),c("change",e.value))},u=()=>{if(a)return s(oe,{class:h("icon"),color:n,name:"success"},null)};return s(ne,{role:"menuitem",key:e.value,icon:e.icon,title:e.text,class:h("option",{active:a}),style:{color:a?n:""},tabindex:a?0:-1,clickable:!0,onClick:i},{value:u})},m=()=>{const{offset:e}=l,{zIndex:n,overlay:a,duration:i,direction:u,closeOnClickOverlay:T}=l.props,I=te(n);return u==="down"?I.top=`${e.value}px`:I.bottom=`${e.value}px`,Q(s("div",{style:I,class:h([u]),onClick:b},[s(ee,{show:o.showPopup,"onUpdate:show":w=>o.showPopup=w,role:"menu",class:h("content"),overlay:a,position:u==="down"?"top":"bottom",duration:o.transition?i:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${l.id}-${p.value}`,closeOnClickOverlay:T,onOpen:y,onClose:g,onOpened:f,onClosed:k},{default:()=>{var w;return[t.options.map(x),(w=d.default)==null?void 0:w.call(d)]}})]),[[X,o.showWrapper]])};return Y({state:o,toggle:v,renderTitle:O}),()=>t.teleport?s(G,{to:t.teleport},{default:()=>[m()]}):m()}});const fe=V(ce),ve=V(le);export{fe as D,ve as a};
