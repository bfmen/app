import{_ as w,o as y,c as I,f as u,w as d}from"./index.c3a0b934.2023_02_16_00_46_06.js";import{L as x}from"./index.60e50b8a.js";import{_ as m}from"./ccItem.0d389956.js";import"./index.16440a63.js";import{S}from"./index.106378a7.js";import{D as V,a as C}from"./index.eed96014.js";import h from"./axios.d2425812.js";import"./index.97a84a53.js";import T from"./zip.eb0771b5.js";import{m as f}from"./index.28b41021.js";import"./ccImg.f5584d95.js";import"./index.1b9f23e2.js";import"./use-id.98183891.js";import"./axios.372962c2.js";import"./config.56e9fedd.js";import"./pako.esm.45930777.js";const{zip:G,unzip:c}=T,p="http://192.168.123.1:888/Windows8/win11/91",k={components:{ccItem:m},data(){return{inputText:"",page:0,pageSize:20,list:[],value1:"Favorites",value0:0,value2:2,option2:[{text:"\u5012\u5E8F",value:0},{text:"\u6B63\u5E8F",value:1}],option3:[{text:"\u5168\u90E8",value:0},{text:"\u5B58\u5728img",value:1},{text:"\u5B58\u5728video",value:2},{text:"\u5B58\u5728video2",value:3}],refreshing:!1,loading:!1,finished:!1,current:{},placeholder:0}},computed:{listV(){return this.list.map(e=>e)},option1(){let e=[];return this.list.length&&Object.keys(this.list[0]).forEach(t=>{e.includes(t)||e.push(t)}),e.map(t=>({text:t,value:t}))},showKeys(){let e=[{key:"Views",type:"primary"},{key:"From",type:"success"},{key:"Added",type:"danger"},{key:"duration",type:"warning"}];return this.value1&&e.push({key:this.value1,type:"primary"}),e}},watch:{page(){clearTimeout(this.timer),this.timer=setTimeout(()=>{let e=this.getPageList();(this.list.length=e.length&&this.page>1)&&(this.finished=!0),this.list=e},100)}},async created(){let e=await h({url:`${p}/filenames.gzip`,responseType:"arraybuffer",responseEncoding:"utf8"}),t=JSON.parse(c(e.data));window.nine_file=t,this.getSourceData()},methods:{loadData(e){setTimeout(()=>{this.page=e,this.loading=!1},300)},async getSourceData(){let e=await h({url:`${p}/dataSourceNine.txt`,responseType:"arraybuffer",responseEncoding:"utf8"}),t=JSON.parse(c(e.data));t=this.addFileInfo(t),window.nine_data=t},addFileInfo(e){return window.nine_file.forEach(t=>{this.existInfoPath(e,t)}),e},existInfoPath(e,t){let o=t.split("/").reverse()[1],l=t.split("/").pop();if(l.split(".")[0],l&&e[o]){if(l.endsWith(".jpg")&&!l.startsWith("._")){let i=`${p}/video/${o}/${t.split("/").pop()}`;e[o].fileInfo={...e[o].fileInfo,img:i}}else if(l.endsWith(".m3u8")&&!l.startsWith("._")){let i=`${p}/video/${o}/${t.split("/").pop()}`;e[o].fileInfo={...e[o].fileInfo,src:i}}}},existInfo(e,t,o){let l=e.img.split("/").pop(),i=l.split(".")[0],s=t.find(r=>r.endsWith(l)&&!r.startsWith("._")),n=t.find(r=>r.endsWith(i+".m3u8")&&!r.startsWith("._"));return s&&(s=`${p}/video/${e.viewkey}/${s.split("/").pop()}`),n&&(n=`${p}/video/${e.viewkey}/${n.split("/").pop()}`),{img:s,src:n}},search(){this.list=[],setTimeout(()=>{this.page=1,this.list=this.getPageList()},300)},getPageList(){this.page<=1&&(this.finished=!1);let e=window.nine_data;if(typeof e!="object")return[];let o=Object.keys(e).map(l=>(e[l].fileInfo&&(e[l].img=e[l].fileInfo.img,e[l].fileInfo_src=e[l].fileInfo.src),e[l])).filter(l=>{let i=!0;return this.value2==1&&(i=i&&l.fileInfo&&l.fileInfo.img),this.value2==2&&(i=i&&l.fileInfo&&l.fileInfo.src),this.value2==3&&(i=i&&l.fileInfo&&l.fileInfo.src),this.inputText&&(i=i&&[l.title,l[this.value1]].some(s=>(s+"").toLowerCase().includes(this.inputText.toLowerCase()))),i}).sort((l,i)=>parseFloat(l[this.value1])==l[this.value1]&&parseFloat(i[this.value1])==i[this.value1]?this.value0==0?i[this.value1]-l[this.value1]:l[this.value1]-i[this.value1]:this.value0==0?String(i[this.value1]).localeCompare(String(l[this.value1])):String(l[this.value1]).localeCompare(String(i[this.value1])));return this.placeholder=o.length,o=o.slice(0,this.page*this.pageSize),console.log("keys",o.map(l=>l[this.value1]).slice(0,this.pageSize)),o},async open(e,t){if(e&&t.href&&!t.detail_src&&!t.fileInfo_src){let o=window.$toast.loading({duration:0}),l=await f.axios({params:{uuu:t.href}});o.clear();let i=f.utils.format.all(l.data);t.detail_src=i.detail.src}},async itemClick(e){if(!(e.detail||e.fileInfo.src)){let t=window.$toast.loading({duration:0}),o=await f.axios({params:{uuu:e.href}});t.clear();let l=f.utils.format.all(o.data);e.detail=l.detail}this.current=e.detai||e.fileInfo}}};function W(e,t,o,l,i,s){const n=V,r=C,g=S,v=m,_=x;return y(),I("div",null,[u(r,null,{default:d(()=>[u(n,{modelValue:i.value1,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value1=a),options:s.option1,onChange:s.search},null,8,["modelValue","options","onChange"]),u(n,{modelValue:i.value0,"onUpdate:modelValue":t[1]||(t[1]=a=>i.value0=a),options:i.option2,onChange:s.search},null,8,["modelValue","options","onChange"]),u(n,{modelValue:i.value2,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value2=a),options:i.option3,onChange:s.search},null,8,["modelValue","options","onChange"])]),_:1}),u(g,{modelValue:i.inputText,"onUpdate:modelValue":t[3]||(t[3]=a=>i.inputText=a),placeholder:i.placeholder+"",onSearch:s.search},null,8,["modelValue","placeholder","onSearch"]),u(_,{modelValue:i.loading,"onUpdate:modelValue":t[4]||(t[4]=a=>i.loading=a),finished:i.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:t[5]||(t[5]=a=>s.loadData(i.page+1))},{default:d(()=>[u(v,{dataSource:s.listV,onOpen:s.open,showKeys:s.showKeys},null,8,["dataSource","onOpen","showKeys"])]),_:1},8,["modelValue","finished"])])}const H=w(k,[["render",W],["__scopeId","data-v-2d5d62ef"]]);export{H as default};
