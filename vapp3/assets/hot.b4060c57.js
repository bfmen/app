import{c as h}from"./config.c00927f2.js";import L from"./list.7000cb68.js";import b from"./tagSelect.7868deb0.js";import{a as k}from"./axios.646f38c1.js";import{_ as x,r as o,o as m,c as p,h as l,w as r,F as y,b as V,a as C}from"./index.19fbe68c.2022_11_02_04_17_53.js";import"./index.2ceb81bb.js";const R={name:"keepAlive",components:{list:L,tagSelect:b},data(){return{isLoading:!1,loading:!1,finished:!1,list:[{title:"\u63A8\u8350",items:[],src:"/vod/recommend-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u70ED\u70B9",items:[],src:"/vod/hot-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u53D1\u73B0",items:[],src:"/vod/latest-0-0-0-0-0-0-0-0-0-",page:0}],current:1,vodid:""}},onLoad(i){},created(){},computed:{items(){return this.list.map(i=>i.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(i){this.list[this.current].items.length==0&&window.scrollY==0&&this.loadData(1)},loadData(i,s){const u=h.origin+this.list[this.current].src+i,d=i,t=this.current;k.request({url:u,params:h.query()}).then(e=>{if(console.log("success",e),e.status==200&&e.data.retcode==0){var n=e.data.data.vodrows;this.list[t].items=d==1?n:this.list[t].items.concat(n),this.list[t].page=d}else window.$dialog.alert({title:e.data.errmsg||e.statusCode||"fail"})}).catch(e=>{window.$dialog.alert({title:e.message||"fail"})}).finally(()=>{this.isLoading=!1,this.loading=!1})},infinite(){console.log("onReachBottom"),this.loading=!0,this.loadData(this.list[this.current].page+1)}}},B={class:"hot"};function D(i,s,u,d,t,e){const n=o("list"),_=o("van-list"),g=o("van-pull-refresh"),v=o("van-tab"),w=o("van-tabs");return m(),p("div",B,[l(w,{active:t.current,"onUpdate:active":s[2]||(s[2]=a=>t.current=a),onChange:s[3]||(s[3]=a=>e.onClickItem(i.index))},{default:r(()=>[(m(!0),p(y,null,V(e.items,(a,f)=>(m(),C(v,{title:a,name:f,key:f},{default:r(()=>[l(g,{modelValue:t.isLoading,"onUpdate:modelValue":s[1]||(s[1]=c=>t.isLoading=c),onRefresh:e.onRefresh,style:{overflow:"inherit"}},{default:r(()=>[l(_,{modelValue:t.loading,"onUpdate:modelValue":s[0]||(s[0]=c=>t.loading=c),finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e.infinite,style:{"min-height":"50vh"}},{default:r(()=>[l(n,{dataList:t.list[t.current].items},null,8,["dataList"])]),_:1},8,["modelValue","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"])])}const H=x(R,[["render",D],["__scopeId","data-v-e8e1830b"]]);export{H as default};
