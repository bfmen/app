import{_ as w,M as y,y as L,o as i,c as l,z as n,F as f,r as u,f as h,w as p,E as k,A as S,a as V}from"./index.c209ee9e.2022_11_09_01_53_08.js";import{P as x}from"./index.9927699f.js";import{L as C}from"./index.b5af19f4.js";import{c as d}from"./config.c00927f2.js";import D from"./list.07e700ea.js";import{a as R}from"./axios.646f38c1.js";import"./index.92daa177.js";const B={name:"keepAlive",components:{list:D},data(){return{dataSource:{},page:0,isLoading:!1,loading:!1,finished:!1}},computed:{v2sliderows(){let a=[];return this.dataSource.v2sliderows&&this.dataSource.v2sliderows.forEach(e=>{e.scene=="special.detail"&&a.push(e)}),a}},methods:{onRefresh(){this.loadData(1,this.$state)},itemClick(a){a.spid&&this.$router.push({path:"./detail",query:{spid:a.spid}})},infinite(a){console.log("onReachBottom"),this.loadData(this.page+1,a)},loadData(a,e){console.log("config",d,d.query()),R({url:d.origin+"/special/listing-0-0-"+a,params:d.query()}).then(o=>{console.log("success",o),o.status==200&&o.data.retcode==0?(this.page=a,this.page==1?this.dataSource=o.data.data:(this.dataSource.actorrows=o.data.data.actorrows,this.dataSource.rows=this.dataSource.rows.concat(o.data.data.rows)),o.data.data.rows.length<16?e&&e.complete():e&&e.loaded()):(window.$dialog.alert({title:o.data.errmsg||o.statusCode||"fail"}),e.loaded())}).catch(o=>{e&&e.loaded(),window.$dialog.alert({title:o.message||"fail"})}).finally(()=>{this.isLoading=!1,this.loading=!1})}}},q={class:"special"},z={class:"header"},E=["onClick"],F={class:"image",mode:"aspectFill"},A={class:"title"},N={class:"content"};function P(a,e,o,U,t,r){const _=y("list"),m=C,g=x,v=L("lazy");return i(),l("div",q,[n("div",z,[(i(!0),l(f,null,u(t.dataSource.actorrows,(s,c)=>(i(),l("div",{class:"item",key:c,onClick:I=>r.itemClick(s)},[k(n("img",F,null,512),[[v,s.avatar]]),n("div",A,S(s.spname),1)],8,E))),128))]),n("div",N,[h(g,{modelValue:t.isLoading,"onUpdate:modelValue":e[1]||(e[1]=s=>t.isLoading=s),onRefresh:r.onRefresh,style:{overflow:"inherit"}},{default:p(()=>[h(m,{modelValue:t.loading,"onUpdate:modelValue":e[0]||(e[0]=s=>t.loading=s),finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:r.infinite,style:{"min-height":"50vh"}},{default:p(()=>[(i(!0),l(f,null,u(t.dataSource.rows,(s,c)=>(i(),V(_,{info:s,key:c,title:s.spname+" "+s.itemcount+"\u90E8",dataList:s.vodrows},null,8,["info","title","dataList"]))),128))]),_:1},8,["modelValue","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])])}const O=w(B,[["render",P],["__scopeId","data-v-1f4eed86"]]);export{O as default};
