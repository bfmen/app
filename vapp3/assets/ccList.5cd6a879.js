import{c as V}from"./ccItem.a9fc3319.js";import{_ as y,r as n,o as l,c,a as u,w as d,F as S,b as w,g as k,h as i}from"./index.89adf607.2022_10_28_16_19_51.js";const L={components:{ccItem:V},props:{dataSource:{default:[]},itemKey:{},showKeys:{},params:{default:{title:"",page:1,size:20,text:"",menus:[]}}},data(){return{refreshing:!1,loading:!1,finished:!1,error:!1,text:"",menus:[{value:"",options:this.options1},{value:"desc",options:[{text:"\u6B63\u5E8F",value:"ase"},{text:"\u5012\u5E8F",value:"desc"}]}]}},computed:{options1(){return Object.keys(this.dataSource.reduce((t,e)=>({...t,...e}),{})).map(t=>({text:t,value:t}))}},watch:{text(){this.params.text=this.text}},created(){this.text=this.params.text},methods:{onConfirm(){},onRefresh(){this.loadData({page:1})},loadNextPage(){this.loading||(console.log("loadNextPage"),this.loadData({page:this.dataSource.length===0?1:this.params.page+1}))},loadData(t){t={...this.params,...t,order:"desc",sort:""},this.loading=!0,this.$emit("loadData",{...t,callback:e=>{Array.isArray(e)?e.length==0?this.finished=!0:(this.params.page=t.page,t.page===1?(this.finished=!1,this.dataSource.splice(0,this.dataSource.length,...e)):this.dataSource.splice(this.dataSource.length,0,...e)):this.error=!0,this.loading=!1,this.refreshing=!1,this.error=!1}})},open(){this.$emit("open",...arguments)}}},b={class:"ccList"};function K(t,e,s,N,o,r){const h=n("van-dropdown-item"),m=n("van-dropdown-menu"),p=n("van-search"),f=n("ccItem"),_=n("van-list"),g=n("van-pull-refresh");return l(),c("div",b,[s.params.menus&&s.params.menus.length?(l(),u(m,{key:0},{default:d(()=>[(l(!0),c(S,null,w(s.params.menus,(a,v)=>(l(),u(h,{key:v,modelValue:a.value,"onUpdate:modelValue":x=>a.value=x,options:a.options},null,8,["modelValue","onUpdate:modelValue","options"]))),128))]),_:1})):k("",!0),i(p,{modelValue:o.text,"onUpdate:modelValue":e[0]||(e[0]=a=>o.text=a),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:r.onRefresh},null,8,["modelValue","onSearch"]),i(g,{modelValue:o.refreshing,"onUpdate:modelValue":e[2]||(e[2]=a=>o.refreshing=a),onRefresh:r.onRefresh},{default:d(()=>[i(_,{modelValue:o.loading,"onUpdate:modelValue":e[1]||(e[1]=a=>o.loading=a),finished:o.finished,error:o.error,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:r.loadNextPage,style:{"min-height":"50vh"}},{default:d(()=>[i(f,{title:s.params.title,dataSource:s.dataSource,onOpen:r.open,showKeys:s.params.showKeys},null,8,["title","dataSource","onOpen","showKeys"])]),_:1},8,["modelValue","finished","error","onLoad"])]),_:1},8,["modelValue","onRefresh"])])}const C=y(L,[["render",K],["__scopeId","data-v-6be7e675"]]);export{C as c};
