import{b as I,t as N,q as Y,e as P,f as r,aP as G,H as W,I as X,g as E,af as Z,V as D,B as $,h as ee,n as te,Q as V,ao as ae,aa as R,aQ as ne,S as le,ar as oe,v as L,m as ce,E as H,aq as U,x as se,a2 as re,_ as ie,M as de,o as v,c as h,w as _,z as x,A as b,F as w,r as K,a as B,aR as z,aE as A}from"./index.877ae1f5.2022_11_02_07_45_22.js";import{c as F,C as J}from"./index.99090443.js";import{c as M}from"./ccImg.4bb1432a.js";import{J as ue}from"./index.6d480108.js";const[me,j]=I("tag"),fe={size:String,mark:Boolean,show:N,type:Y("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var ve=P({name:me,props:fe,emits:["close"],setup(a,{slots:c,emit:e}){const S=i=>{i.stopPropagation(),e("close",i)},m=()=>a.plain?{color:a.textColor||a.color,borderColor:a.color}:{color:a.textColor,background:a.color},l=()=>{var i;const{type:d,mark:y,plain:n,round:f,size:s,closeable:t}=a,o={mark:y,plain:n,round:f};s&&(o[s]=s);const g=t&&r(X,{name:"cross",class:[j("close"),W],onClick:S},null);return r("span",{style:m(),class:j([o,d])},[(i=c.default)==null?void 0:i.call(c),g])};return()=>r(G,{name:a.closeable?"van-fade":void 0},{default:()=>[a.show?l():null]})}});const _e=E(ve),[q,ye]=I("collapse"),Q=Symbol(q),he={border:N,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var ge=P({name:q,props:he,emits:["change","update:modelValue"],setup(a,{emit:c,slots:e}){const{linkChildren:S,children:m}=Z(Q),l=n=>{c("change",n),c("update:modelValue",n)},i=(n,f)=>{const{accordion:s,modelValue:t}=a;l(s?n===t?"":n:f?t.concat(n):t.filter(o=>o!==n))},d=(n={})=>{if(a.accordion)return;typeof n=="boolean"&&(n={expanded:n});const{expanded:f,skipDisabled:s}=n,o=m.filter(g=>g.disabled&&s?g.expanded.value:f??!g.expanded.value).map(g=>g.itemName.value);l(o)},y=n=>{const{accordion:f,modelValue:s}=a;return f?s===n:s.includes(n)};return D({toggleAll:d}),S({toggle:i,isExpanded:y}),()=>{var n;return r("div",{class:[ye(),{[$]:a.border}]},[(n=e.default)==null?void 0:n.call(e)])}}});const Se=E(ge),[be,O]=I("collapse-item"),ke=["icon","title","value","label","right-icon"],xe=ee({},F,{name:te,isLink:N,disabled:Boolean,readonly:Boolean,lazyRender:N});var Ce=P({name:be,props:xe,setup(a,{slots:c}){const e=V(),S=V(),{parent:m,index:l}=ae(Q);if(!m)return;const i=R(()=>{var u;return(u=a.name)!=null?u:l.value}),d=R(()=>m.isExpanded(i.value)),y=V(d.value),n=ne(()=>y.value||!a.lazyRender),f=()=>{d.value?e.value&&(e.value.style.height=""):y.value=!1};le(d,(u,C)=>{if(C===null)return;u&&(y.value=!0),(u?se:re)(()=>{if(!S.value||!e.value)return;const{offsetHeight:k}=S.value;if(k){const p=`${k}px`;e.value.style.height=u?"0":p,oe(()=>{e.value&&(e.value.style.height=u?p:"0")})}else f()})});const s=(u=!d.value)=>{m.toggle(i.value,u)},t=()=>{!a.disabled&&!a.readonly&&s()},o=()=>{const{border:u,disabled:C,readonly:T}=a,k=L(a,Object.keys(F));return T&&(k.isLink=!1),(C||T)&&(k.clickable=!1),r(J,ce({role:"button",class:O("title",{disabled:C,expanded:d.value,borderless:!u}),"aria-expanded":String(d.value),onClick:t},k),L(c,ke))},g=n(()=>{var u;return H(r("div",{ref:e,class:O("wrapper"),onTransitionend:f},[r("div",{ref:S,class:O("content")},[(u=c.default)==null?void 0:u.call(c)])]),[[U,y.value]])});return D({toggle:s,expanded:d,itemName:i}),()=>r("div",{class:[O({border:l.value&&a.border})]},[o(),g()])}});const we=E(Ce);const Ke={components:{ccImg:M},name:"cc-item",props:{dataSource:{},itemKey:{},showKeys:{},title:{}},computed:{$util(){return ue.util}},data(){return{activeNames:[]}},watch:{activeNames(){this.$emit("open",!!this.activeNames.length,this.dataSource)}},created(){this.itemKey===void 0&&(this.activeNames=["1"])},methods:{getObjectTitle(a,c){let e=a.title||a.id||c;return e===void 0&&(e="ROOT"),e},open(){this.$emit("open",...arguments)}}},Oe={class:"ccItem"},Ne={key:0},Te={key:1},Ve=["src"];function Be(a,c,e,S,m,l){const i=de("cc-item",!0),d=we,y=Se,n=M,f=_e,s=J;return v(),h("div",Oe,[l.$util.isArray(e.dataSource)?(v(),h("div",Ne,[r(y,{modelValue:m.activeNames,"onUpdate:modelValue":c[0]||(c[0]=t=>m.activeNames=t)},{default:_(()=>[r(d,{name:"1"},{title:_(()=>[x("div",null,b(e.itemKey||e.title||"ROOT"),1)]),value:_(()=>[x("div",null,"["+b(e.dataSource.length)+"]",1)]),default:_(()=>[(v(!0),h(w,null,K(e.dataSource,(t,o)=>(v(),h("div",{key:o},[(v(),B(i,{key:t.id||t.title||JSON.stringify(t),dataSource:t,itemKey:o,showKeys:e.showKeys,onOpen:l.open},null,8,["dataSource","itemKey","showKeys","onOpen"]))]))),128))]),_:1})]),_:1},8,["modelValue"])])):e.dataSource&&l.$util.isObject(e.dataSource)?(v(),h("div",Te,[r(y,{modelValue:m.activeNames,"onUpdate:modelValue":c[1]||(c[1]=t=>m.activeNames=t)},{default:_(()=>[r(d,{name:"1"},z({title:_(()=>[x("div",null,b(l.getObjectTitle(e.dataSource,e.itemKey)),1),(v(!0),h(w,null,K(l.$util.getImgKeys(e.dataSource),(t,o)=>(v(),h("div",{key:o},[r(n,{style:{width:"100%"},src:e.dataSource[t]},null,8,["src"])]))),128)),(v(!0),h(w,null,K(e.showKeys,(t,o)=>H((v(),B(f,{key:o,type:t.type},{default:_(()=>[A(b(e.dataSource[t.key]),1)]),_:2},1032,["type"])),[[U,e.dataSource[t.key]!==void 0]])),128))]),value:_(()=>[x("div",null,b("{"+Object.keys(e.dataSource).length+"}"),1)]),_:2},[m.activeNames.length?{name:"default",fn:_(()=>[(v(!0),h(w,null,K(l.$util.sortMediaKeys(e.dataSource),(t,o)=>(v(),h("div",{key:t+o},[r(i,{dataSource:e.dataSource[t],itemKey:t,showKeys:e.showKeys,onOpen:l.open},null,8,["dataSource","itemKey","showKeys","onOpen"])]))),128))]),key:"0"}:void 0]),1024)]),_:1},8,["modelValue"])])):(v(),B(s,{key:2,title:e.itemKey+"",label:e.dataSource+""},z({_:2},[l.$util.isVideoUrl(e.dataSource)?{name:"label",fn:_(()=>[x("video",{style:{width:"100%"},controls:"controls",playsinline:"","picture-in-picture-mode":["push","pop"],autoplay:!1,poster:"",src:e.dataSource},null,8,Ve)]),key:"0"}:l.$util.isImgUrl(e.dataSource)?{name:"label",fn:_(()=>[x("div",null,b(e.dataSource),1),r(n,{style:{width:"100%"},src:e.dataSource},null,8,["src"])]),key:"1"}:{name:"label",fn:_(()=>[A(b(e.dataSource),1)]),key:"2"}]),1032,["title","label"]))])}const Re=ie(Ke,[["render",Be],["__scopeId","data-v-26ad0370"]]);export{Re as _};
