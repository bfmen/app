import{b as I,t as T,E as W,e as p,f as r,aR as Y,J as Z,I as Q,g as P,ak as X,Z as D,B as $,h as ee,n as te,U as B,at as ae,af as E,aS as ne,W as le,av as oe,H as L,m as ce,q as U,v as H,K as se,a9 as re,_ as ie,R as de,o as f,c as h,w as _,l as x,p as b,F as w,r as K,a as V,aT as z,aG as A}from"./index.eb291360.2024_03_13_00_56_51.js";import{c as J,C as F}from"./index.744c0b8d.js";import{c as M}from"./ccImg.0c8307c2.js";import{J as ue}from"./index.a58c9b43.js";const[me,j]=I("tag"),ve={size:String,mark:Boolean,show:T,type:W("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var fe=p({name:me,props:ve,emits:["close"],setup(a,{slots:c,emit:e}){const S=i=>{i.stopPropagation(),e("close",i)},m=()=>a.plain?{color:a.textColor||a.color,borderColor:a.color}:{color:a.textColor,background:a.color},l=()=>{var i;const{type:d,mark:y,plain:n,round:v,size:s,closeable:t}=a,o={mark:y,plain:n,round:v};s&&(o[s]=s);const g=t&&r(Q,{name:"cross",class:[j("close"),Z],onClick:S},null);return r("span",{style:m(),class:j([o,d])},[(i=c.default)==null?void 0:i.call(c),g])};return()=>r(Y,{name:a.closeable?"van-fade":void 0},{default:()=>[a.show?l():null]})}});const _e=P(fe),[q,ye]=I("collapse"),G=Symbol(q),he={border:T,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var ge=p({name:q,props:he,emits:["change","update:modelValue"],setup(a,{emit:c,slots:e}){const{linkChildren:S,children:m}=X(G),l=n=>{c("change",n),c("update:modelValue",n)},i=(n,v)=>{const{accordion:s,modelValue:t}=a;l(s?n===t?"":n:v?t.concat(n):t.filter(o=>o!==n))},d=(n={})=>{if(a.accordion)return;typeof n=="boolean"&&(n={expanded:n});const{expanded:v,skipDisabled:s}=n,o=m.filter(g=>g.disabled&&s?g.expanded.value:v??!g.expanded.value).map(g=>g.itemName.value);l(o)},y=n=>{const{accordion:v,modelValue:s}=a;return v?s===n:s.includes(n)};return D({toggleAll:d}),S({toggle:i,isExpanded:y}),()=>{var n;return r("div",{class:[ye(),{[$]:a.border}]},[(n=e.default)==null?void 0:n.call(e)])}}});const Se=P(ge),[be,O]=I("collapse-item"),ke=["icon","title","value","label","right-icon"],xe=ee({},J,{name:te,isLink:T,disabled:Boolean,readonly:Boolean,lazyRender:T});var Ce=p({name:be,props:xe,setup(a,{slots:c}){const e=B(),S=B(),{parent:m,index:l}=ae(G);if(!m)return;const i=E(()=>{var u;return(u=a.name)!=null?u:l.value}),d=E(()=>m.isExpanded(i.value)),y=B(d.value),n=ne(()=>y.value||!a.lazyRender),v=()=>{d.value?e.value&&(e.value.style.height=""):y.value=!1};le(d,(u,C)=>{if(C===null)return;u&&(y.value=!0),(u?se:re)(()=>{if(!S.value||!e.value)return;const{offsetHeight:k}=S.value;if(k){const R=`${k}px`;e.value.style.height=u?"0":R,oe(()=>{e.value&&(e.value.style.height=u?R:"0")})}else v()})});const s=(u=!d.value)=>{m.toggle(i.value,u)},t=()=>{!a.disabled&&!a.readonly&&s()},o=()=>{const{border:u,disabled:C,readonly:N}=a,k=L(a,Object.keys(J));return N&&(k.isLink=!1),(C||N)&&(k.clickable=!1),r(F,ce({role:"button",class:O("title",{disabled:C,expanded:d.value,borderless:!u}),"aria-expanded":String(d.value),onClick:t},k),L(c,ke))},g=n(()=>{var u;return U(r("div",{ref:e,class:O("wrapper"),onTransitionend:v},[r("div",{ref:S,class:O("content")},[(u=c.default)==null?void 0:u.call(c)])]),[[H,y.value]])});return D({toggle:s,expanded:d,itemName:i}),()=>r("div",{class:[O({border:l.value&&a.border})]},[o(),g()])}});const we=P(Ce);const Ke={components:{ccImg:M},name:"cc-item",props:{dataSource:{},itemKey:{},showKeys:{},title:{}},computed:{$util(){return ue.util}},data(){return{activeNames:[]}},watch:{activeNames(){this.$emit("open",!!this.activeNames.length,this.dataSource)}},created(){this.itemKey===void 0&&(this.activeNames=["1"])},methods:{getObjectTitle(a,c){let e=a.title||a.id||c;return e===void 0&&(e="ROOT"),e},open(){this.$emit("open",...arguments)}}},Oe={class:"ccItem"},Te={key:0},Ne={key:1},Be=["src"];function Ve(a,c,e,S,m,l){const i=de("cc-item",!0),d=we,y=Se,n=M,v=_e,s=F;return f(),h("div",Oe,[l.$util.isArray(e.dataSource)?(f(),h("div",Te,[r(y,{modelValue:m.activeNames,"onUpdate:modelValue":c[0]||(c[0]=t=>m.activeNames=t)},{default:_(()=>[r(d,{name:"1"},{title:_(()=>[x("div",null,b(e.itemKey||e.title||"ROOT"),1)]),value:_(()=>[x("div",null,"["+b(e.dataSource.length)+"]",1)]),default:_(()=>[(f(!0),h(w,null,K(e.dataSource,(t,o)=>(f(),h("div",{key:o},[(f(),V(i,{key:t.id||t.title||JSON.stringify(t),dataSource:t,itemKey:o,showKeys:e.showKeys,onOpen:l.open},null,8,["dataSource","itemKey","showKeys","onOpen"]))]))),128))]),_:1})]),_:1},8,["modelValue"])])):e.dataSource&&l.$util.isObject(e.dataSource)?(f(),h("div",Ne,[r(y,{modelValue:m.activeNames,"onUpdate:modelValue":c[1]||(c[1]=t=>m.activeNames=t)},{default:_(()=>[r(d,{name:"1"},z({title:_(()=>[x("div",null,b(l.getObjectTitle(e.dataSource,e.itemKey)),1),(f(!0),h(w,null,K(l.$util.getImgKeys(e.dataSource),(t,o)=>(f(),h("div",{key:o},[r(n,{style:{width:"100%"},src:e.dataSource[t]},null,8,["src"])]))),128)),(f(!0),h(w,null,K(e.showKeys,(t,o)=>U((f(),V(v,{key:o,type:t.type},{default:_(()=>[A(b(e.dataSource[t.key]),1)]),_:2},1032,["type"])),[[H,e.dataSource[t.key]!==void 0]])),128))]),value:_(()=>[x("div",null,b("{"+Object.keys(e.dataSource).length+"}"),1)]),_:2},[m.activeNames.length?{name:"default",fn:_(()=>[(f(!0),h(w,null,K(l.$util.sortMediaKeys(e.dataSource),(t,o)=>(f(),h("div",{key:t+o},[r(i,{dataSource:e.dataSource[t],itemKey:t,showKeys:e.showKeys,onOpen:l.open},null,8,["dataSource","itemKey","showKeys","onOpen"])]))),128))]),key:"0"}:void 0]),1024)]),_:1},8,["modelValue"])])):(f(),V(s,{key:2,title:e.itemKey+"",label:e.dataSource+""},z({_:2},[l.$util.isVideoUrl(e.dataSource)?{name:"label",fn:_(()=>[x("video",{style:{width:"100%"},controls:"controls",playsinline:"","picture-in-picture-mode":["push","pop"],autoplay:!1,poster:"",src:e.dataSource},null,8,Be)]),key:"0"}:l.$util.isImgUrl(e.dataSource)?{name:"label",fn:_(()=>[x("div",null,b(e.dataSource),1),r(n,{style:{width:"100%"},src:e.dataSource},null,8,["src"])]),key:"1"}:{name:"label",fn:_(()=>[A(b(e.dataSource),1)]),key:"2"}]),1032,["title","label"]))])}const Ee=ie(Ke,[["render",Ve],["__scopeId","data-v-26ad0370"]]);export{Ee as _};
