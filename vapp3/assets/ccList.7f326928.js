import{c as V}from"./ccItem.cd0c517c.js";import{_ as y,r as n,o as l,c,a as u,w as d,F as S,b as w,g as k,h as i}from"./index.95c45d46.2022_10_28_16_17_23.js";const L={components:{ccItem:V},props:{dataSource:{default:[]},itemKey:{},showKeys:{},params:{default:{title:"",page:1,size:20,text:"",menus:[]}}},data(){return{refreshing:!1,loading:!1,finished:!1,error:!1,menus:[{value:"",options:this.options1},{value:"desc",options:[{text:"\u6B63\u5E8F",value:"ase"},{text:"\u5012\u5E8F",value:"desc"}]}]}},computed:{options1(){return Object.keys(this.dataSource.reduce((e,t)=>({...e,...t}),{})).map(e=>({text:e,value:e}))}},watch:{text(){this.params.text=this.text}},created(){this.text=this.params.text},methods:{onConfirm(){},onRefresh(){this.loadData({page:1})},loadNextPage(){this.loading||(console.log("loadNextPage"),this.loadData({page:this.dataSource.length===0?1:this.params.page+1}))},loadData(e){e={...this.params,...e,order:"desc",sort:""},this.loading=!0,this.$emit("loadData",{...e,callback:t=>{Array.isArray(t)?t.length==0?this.finished=!0:(this.params.page=e.page,e.page===1?(this.finished=!1,this.dataSource.splice(0,this.dataSource.length,...t)):this.dataSource.splice(this.dataSource.length,0,...t)):this.error=!0,this.loading=!1,this.refreshing=!1,this.error=!1}})},open(){this.$emit("open",...arguments)}}},K={class:"ccList"};function N(e,t,o,R,s,r){const h=n("van-dropdown-item"),m=n("van-dropdown-menu"),p=n("van-search"),f=n("ccItem"),_=n("van-list"),g=n("van-pull-refresh");return l(),c("div",K,[o.params.menus&&o.params.menus.length?(l(),u(m,{key:0},{default:d(()=>[(l(!0),c(S,null,w(o.params.menus,(a,v)=>(l(),u(h,{key:v,modelValue:a.value,"onUpdate:modelValue":x=>a.value=x,options:a.options},null,8,["modelValue","onUpdate:modelValue","options"]))),128))]),_:1})):k("",!0),i(p,{modelValue:e.text,"onUpdate:modelValue":t[0]||(t[0]=a=>e.text=a),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:r.onRefresh},null,8,["modelValue","onSearch"]),i(g,{modelValue:s.refreshing,"onUpdate:modelValue":t[2]||(t[2]=a=>s.refreshing=a),onRefresh:r.onRefresh},{default:d(()=>[i(_,{modelValue:s.loading,"onUpdate:modelValue":t[1]||(t[1]=a=>s.loading=a),finished:s.finished,error:s.error,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:r.loadNextPage,style:{"min-height":"50vh"}},{default:d(()=>[i(f,{title:o.params.title,dataSource:o.dataSource,onOpen:r.open,showKeys:o.params.showKeys},null,8,["title","dataSource","onOpen","showKeys"])]),_:1},8,["modelValue","finished","error","onLoad"])]),_:1},8,["modelValue","onRefresh"])])}const D=y(L,[["render",N],["__scopeId","data-v-2713d3c1"]]);export{D as c};
