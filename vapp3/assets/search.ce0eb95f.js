import{c}from"./config.c00927f2.js";import w from"./list.169cd1ee.js";import{_ as m,r as u,o as l,c as h,b as o,w as g,m as v,q as T,n as x,F as y,e as k,f as C,i as b,d as I,t as D,p as q,h as B}from"./index.4c4a9a49.2022_10_27_03_16_14.js";const V={name:"keepAlive",components:{list:w},data(){return{hotwords:[],hotrows:[],vodrows:[],page:0,inputText:"",isTyping:!1,identifier:""}},computed:{},created(){},mounted(){this.loadData(1)},methods:{searchTextClick(){this.isTyping=!0,this.$refs.searchInput.focus()},search(i){console.log("search",i),this.loadData(1)},itemClick(i){this.inputText=i.dspwd,this.isTyping=!0,this.loadData(1)},infinite(i){console.log("onReachBottom"),this.loadData(this.page+1,i)},loadData(i,e){console.log("config",c,c.query()),i===1&&(this.page=0,this.identifier=new Date().valueOf());let r=c.query();r.page=i,this.inputText&&(r.wd=this.inputText),this.$axios.request({url:c.origin+"/search",params:r}).then(t=>{if(console.log("success",t),t.status==200&&t.data.retcode==0){this.page=i,t.data.data.hotwords&&(this.hotwords=t.data.data.hotwords);let s=t.data.data.hotrows||t.data.data.vodrows;s?(this.page==1?this.vodrows=s:this.vodrows=this.vodrows.concat(s),s.length==0&&(weui.topTips("\u6CA1\u4E86"),e&&e.complete())):(weui.topTips("\u6CA1\u4E86"),e&&e.complete()),e&&e.loaded()}else weui.topTips(t.data.errmsg||t.statusCode||"fail")}).catch(t=>{e&&e.loaded(),weui.topTips(t.message||"fail")})}},watch:{inputText:{handler:function(i,e){},immediate:!1}}},d=i=>(q("data-v-c7d12d82"),i=i(),B(),i),L={class:"special"},S={class:"weui-search-bar__form",\u03BFnsubmit:"return false;"},N={class:"weui-search-bar__box"},j=d(()=>o("i",{class:"weui-icon-search"},null,-1)),F=d(()=>o("input",{style:{display:"none"}},null,-1)),K=d(()=>o("i",{class:"weui-icon-search"},null,-1)),z=d(()=>o("span",null,"\u641C\u7D22",-1)),A=[K,z],E={class:"items"},M=["onClick"];function O(i,e,r,t,s,n){const p=u("list"),f=u("infinite-loading");return l(),h("div",L,[o("div",{class:x(["weui-search-bar",{"weui-search-bar_focusing":s.isTyping}]),id:"searchBar"},[o("form",S,[o("div",N,[j,g(o("input",{type:"search","onUpdate:modelValue":e[0]||(e[0]=a=>s.inputText=a),class:"weui-search-bar__input",id:"searchInput",placeholder:"\u641C\u7D22",required:"",ref:"searchInput",onKeyup:e[1]||(e[1]=T((...a)=>n.search&&n.search(...a),["enter"]))},null,544),[[v,s.inputText]]),F,o("a",{href:"javascript:",class:"weui-icon-clear",id:"searchClear",onClick:e[2]||(e[2]=a=>s.inputText="")})]),o("label",{class:"weui-search-bar__label",id:"searchText",ref:"searchText",onClick:e[3]||(e[3]=(...a)=>n.searchTextClick&&n.searchTextClick(...a))},A,512)]),o("a",{href:"javascript:",class:"weui-search-bar__cancel-btn",id:"searchCancel",onClick:e[4]||(e[4]=a=>s.isTyping=!1)},"\u53D6\u6D88")],2),o("div",E,[(l(!0),h(y,null,k(s.hotwords,(a,_)=>(l(),h("div",{class:"item",key:_,onClick:R=>n.itemClick(a)},D(a.dspwd),9,M))),128))]),C(p,{dataList:s.vodrows.length>0?s.vodrows:s.hotrows},null,8,["dataList"]),s.page>0?(l(),b(f,{key:0,identifier:s.identifier,onInfinite:n.infinite,ref:"infiniteLoading"},null,8,["identifier","onInfinite"])):I("",!0)])}const J=m(V,[["render",O],["__scopeId","data-v-c7d12d82"]]);export{J as default};
