import"./axios.1b521d90.js";import"./index.b805869b.js";import{m as r}from"./index.1e3f7711.js";import{c as _}from"./ccItem.7ba0fe7e.js";import"./index.f810b158.js";import{_ as w}from"./data.b7fb80b9.js";import{_ as V,r as l,o as y,c as g,h as i,w as u}from"./index.887148b5.2022_10_28_11_07_35.js";import"./axios.91e25212.js";import"./config.56e9fedd.js";import"./ccImg.39411c21.js";const v={mixins:[w],components:{ccItem:_},data(){return{dataSource:{},optionNew:{text:"new",value:""},dropdownValue:"",page:0,refreshing:!1,loading:!1,finished:!1,current:{}}},computed:{listV(){return this.dataSource.listV||[]},submenu(){return this.dataSource.submenu||[]},dropdownOptions(){return[this.optionNew,...this.submenu.map(t=>({text:t.title,value:t.href.split("?")[1]}))]},showKeys(){let t=[{key:"Views",type:"primary"},{key:"From",type:"success"},{key:"Added",type:"danger"},{key:"duration",type:"warning"}];return this.dropdownValue&&t.push({key:this.dropdownValue,type:"primary"}),t}},watch:{dropdownValue(){this.loadData()}},async created(){},methods:{onRefresh(){this.loadData()},async loadData(t=1){let{data:e}=await r.axios({params:{uuu:`/v.php?${this.dropdownValue}&page=${t}`}});if(e){let a=r.utils.format.all(e);this.dataSource=t==1?a:{...a,listV:[...a.listV,...this.dataSource.listV]},this.page=t,this.refreshing=!1,this.loading=!1}},async open(t,e){if(t&&e.href&&!e.detail_src){let a=window.$toast.loading({duration:0}),d=await r.axios({params:{uuu:e.href}});a.clear();let o=r.utils.format.all(d.data);e.detail_src=o.detail.src}},async itemClick(t){if(!t.detail){let e=window.$toast.loading({duration:0}),a=await r.axios({params:{uuu:t.href}});e.clear();let d=r.utils.format.all(a.data);t.detail=d.detail}this.current=t.detail}}};function x(t,e,a,d,o,n){const p=l("van-dropdown-item"),m=l("van-dropdown-menu"),c=l("ccItem"),f=l("van-list"),h=l("van-pull-refresh");return y(),g("div",null,[i(m,null,{default:u(()=>[i(p,{modelValue:o.dropdownValue,"onUpdate:modelValue":e[0]||(e[0]=s=>o.dropdownValue=s),options:n.dropdownOptions},null,8,["modelValue","options"])]),_:1}),i(h,{modelValue:o.refreshing,"onUpdate:modelValue":e[3]||(e[3]=s=>o.refreshing=s),onRefresh:n.onRefresh},{default:u(()=>[i(f,{modelValue:o.loading,"onUpdate:modelValue":e[1]||(e[1]=s=>o.loading=s),finished:o.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e[2]||(e[2]=s=>n.loadData(++o.page))},{default:u(()=>[i(c,{dataSource:n.listV,onOpen:n.open,showKeys:n.showKeys},null,8,["dataSource","onOpen","showKeys"])]),_:1},8,["modelValue","finished"])]),_:1},8,["modelValue","onRefresh"])])}const U=V(v,[["render",x],["__scopeId","data-v-04f4913c"]]);export{U as default};
