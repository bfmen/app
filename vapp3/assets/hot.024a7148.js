import{c as m}from"./config.c00927f2.js";import g from"./list.c883171d.js";import v from"./tagSelect.1c870462.js";import{_ as w,r as l,o as c,c as d,f as _,F as L,b as k,h as u,w as C,n as I,t as y,p as b,k as D}from"./index.7d095a7f.2022_10_27_10_42_17.js";const R={name:"keepAlive",components:{list:g,tagSelect:v},data(){return{isLoading:!1,list:[{title:"\u63A8\u8350",items:[],src:"/vod/recommend-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u70ED\u70B9",items:[],src:"/vod/hot-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u53D1\u73B0",items:[],src:"/vod/latest-0-0-0-0-0-0-0-0-0-",page:0}],current:1,vodid:""}},onLoad(t){},created(){},computed:{items(){return this.list.map(t=>t.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(t){this.current!==t&&(this.current=t,this.list[this.current].items.length==0&&window.scrollY==0&&this.loadData(1))},loadData(t,i){const h=m.origin+this.list[this.current].src+t,n=t,s=this.current;this.$axios.request({url:h,params:m.query()}).then(e=>{if(console.log("success",e),e.status==200&&e.data.retcode==0){var o=e.data.data.vodrows;this.list[s].items=n==1?o:this.list[s].items.concat(o),this.list[s].page=n}else weui.topTips(e.data.errmsg||e.statusCode||"fail");i&&i.loaded()}).catch(e=>{i&&i.loaded(),weui.topTips(e.message||"fail")}).finally(()=>{this.isLoading=!1})},infinite(t){console.log("onReachBottom"),this.loadData(this.list[this.current].page+1,t)}}},S=t=>(b("data-v-42d37a71"),t=t(),D(),t),V={class:"hot"},B={class:"weui-tab"},x={class:"weui-navbar"},q=["onClick"],F=S(()=>_("div",{class:"weui-tab__panel"},null,-1));function N(t,i,h,n,s,e){const o=l("list"),p=l("van-pull-refresh"),f=l("infinite-loading");return c(),d("div",V,[_("div",B,[_("div",x,[(c(!0),d(L,null,k(e.items,(a,r)=>(c(),d("div",{class:I(["weui-navbar__item",{"weui-bar__item_on":s.current==r}]),key:r,onClick:T=>e.onClickItem(r)},y(a),11,q))),128))]),F]),u(p,{modelValue:s.isLoading,"onUpdate:modelValue":i[0]||(i[0]=a=>s.isLoading=a),onRefresh:e.onRefresh,style:{overflow:"inherit"}},{default:C(()=>[u(o,{dataList:s.list[s.current].items},null,8,["dataList"])]),_:1},8,["modelValue","onRefresh"]),u(f,{onInfinite:e.infinite,ref:"infiniteLoading"},null,8,["onInfinite"])])}const P=w(R,[["render",N],["__scopeId","data-v-42d37a71"]]);export{P as default};
