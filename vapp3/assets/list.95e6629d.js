import"./axios.1b521d90.js";import"./index.b805869b.js";import{m as l}from"./index.98aef24f.js";import{c as _}from"./ccItem.1af610ce.js";import"./ccImg.9b9f03f2.js";import{_ as w,r,o as V,c as y,e as d,w as u}from"./index.795f4ad3.2022_10_26_08_21_32.js";import"./axios.91e25212.js";import"./config.56e9fedd.js";const g={components:{ccItem:_},data(){return{dataSource:{},optionNew:{text:"new",value:""},dropdownValue:"",page:0,refreshing:!1,loading:!1,finished:!1,current:{}}},computed:{listV(){return this.dataSource.listV||[]},submenu(){return this.dataSource.submenu||[]},dropdownOptions(){return[this.optionNew,...this.submenu.map(t=>({text:t.title,value:t.href.split("?")[1]}))]},showKeys(){let t=[{key:"Views",type:"primary"},{key:"From",type:"success"},{key:"Added",type:"danger"},{key:"duration",type:"warning"}];return this.dropdownValue&&t.push({key:this.dropdownValue,type:"primary"}),t}},watch:{dropdownValue(){this.loadData()}},async created(){},methods:{onRefresh(){this.loadData()},async loadData(t=1){let{data:e}=await l.axios({params:{uuu:`/v.php?${this.dropdownValue}&page=${t}`}});if(e){let a=l.utils.format.all(e);this.dataSource=t==1?a:{...a,listV:[...a.listV,...this.dataSource.listV]},this.page=t,this.refreshing=!1,this.loading=!1}},async open(t,e){if(t&&e.href&&!e.detail_src){let a=weui.loading(),i=await l.axios({params:{uuu:e.href}});a.hide();let o=l.utils.format.all(i.data);this.$set(e,"detail_src",o.detail.src)}},async itemClick(t){if(!t.detail){let e=weui.loading(),a=await l.axios({params:{uuu:t.href}});e.hide();let i=l.utils.format.all(a.data);this.$set(t,"detail",i.detail)}this.current=t.detail}}};function v(t,e,a,i,o,s){const p=r("van-dropdown-item"),m=r("van-dropdown-menu"),c=r("ccItem"),f=r("van-list"),h=r("van-pull-refresh");return V(),y("div",null,[d(m,null,{default:u(()=>[d(p,{modelValue:o.dropdownValue,"onUpdate:modelValue":e[0]||(e[0]=n=>o.dropdownValue=n),options:s.dropdownOptions},null,8,["modelValue","options"])]),_:1}),d(h,{modelValue:o.refreshing,"onUpdate:modelValue":e[3]||(e[3]=n=>o.refreshing=n),onRefresh:s.onRefresh},{default:u(()=>[d(f,{modelValue:o.loading,"onUpdate:modelValue":e[1]||(e[1]=n=>o.loading=n),finished:o.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e[2]||(e[2]=n=>s.loadData(++o.page))},{default:u(()=>[d(c,{dataSource:s.listV,onOpen:s.open,showKeys:s.showKeys},null,8,["dataSource","onOpen","showKeys"])]),_:1},8,["modelValue","finished"])]),_:1},8,["modelValue","onRefresh"])])}const R=w(g,[["render",v],["__scopeId","data-v-c9e4073f"]]);export{R as default};
