import{c as _}from"./config.c00927f2.js";import g from"./list.bb85fb99.js";import{_ as v,r,o as c,c as d,f as m,F as w,b as L,h as u,w as k,n as y,t as C,p as I,k as b}from"./index.bdd1db7f.2022_10_27_04_28_54.js";const R={components:{list:g},data(){return{isLoading:!1,list:[{title:"\u70B9\u8D5E",items:[],src:"/minivod/topzan-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u8BC4\u8BBA",items:[],src:"/minivod/topcomment-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u64AD\u653E",items:[],src:"/minivod/topplay-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6700\u65B0",items:[],src:"/minivod/topnew-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6295\u5E01",items:[],src:"/minivod/topcoin-0-0-0-0-0-0-0-0-0-0-",page:0}],current:0,vodid:""}},onLoad(t){},created(){},computed:{items(){return this.list.map(t=>t.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(t){this.current!==t&&(this.current=t,this.list[this.current].items.length==0&&window.scrollY==0)},loadData(t,i){const p=_.origin+this.list[this.current].src+t,o=t,s=this.current;this.$axios({url:p,params:_.query()}).then(e=>{if(console.log("success",e),e.status==200&&e.data.retcode==0){var n=e.data.data.vodrows;this.list[s].items=o==1?n:this.list[s].items.concat(n),this.list[s].page=o,n.length<16?i&&i.complete():i&&i.loaded()}else weui.topTips(e.data.errmsg||e.statusCode||"fail"),i&&i.loaded()}).catch(e=>{i&&i.loaded(),weui.topTips(e.message||"fail")}).finally(()=>{this.isLoading=!1})},infinite(t){console.log("onReachBottom"),this.loadData(this.list[this.current].page+1,t)}}},V=t=>(I("data-v-ed9c4980"),t=t(),b(),t),B={class:"weui-tab"},D={class:"weui-navbar"},S=["onClick"],x=V(()=>m("div",{class:"weui-tab__panel"},null,-1));function z(t,i,p,o,s,e){const n=r("list"),f=r("van-pull-refresh"),h=r("infinite-loading");return c(),d("div",null,[m("div",B,[m("div",D,[(c(!0),d(w,null,L(e.items,(a,l)=>(c(),d("div",{class:y(["weui-navbar__item",{"weui-bar__item_on":s.current==l}]),key:l,onClick:F=>e.onClickItem(l)},C(a),11,S))),128))]),x]),u(f,{modelValue:s.isLoading,"onUpdate:modelValue":i[0]||(i[0]=a=>s.isLoading=a),onRefresh:e.onRefresh,style:{overflow:"inherit"}},{default:k(()=>[u(n,{dataList:s.list[s.current].items,isMin:!0},null,8,["dataList"])]),_:1},8,["modelValue","onRefresh"]),u(h,{identifier:s.current,onInfinite:e.infinite,ref:"infiniteLoading"},null,8,["identifier","onInfinite"])])}const E=v(R,[["render",z],["__scopeId","data-v-ed9c4980"]]);export{E as default};
