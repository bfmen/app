import{b as z,t as P,n as A,O as T,q as H,e as D,Q as S,af as N,R as q,aa as $,k as B,aG as K,W as M,f as s,H as j,X as F,aH as G,l as L,u as E,a9 as Q,ao as U,V as X,aI as Y,E as Z,aq as J,P as ee,ac as te,I as oe,g as V}from"./index.f95248ab.2023_02_09_02_42_44.js";import{C as ne}from"./index.7147b44b.js";import{u as ae}from"./use-id.942792ff.js";const[W,C]=z("dropdown-menu"),se={overlay:P,zIndex:A,duration:T(.2),direction:H("down"),activeColor:String,closeOnClickOutside:P,closeOnClickOverlay:P},R=Symbol(W);var le=D({name:W,props:se,setup(t,{slots:c}){const d=ae(),o=S(),l=S(),p=S(0),{children:r,linkChildren:y}=N(R),g=q(o),f=$(()=>r.some(e=>e.state.showWrapper)),b=$(()=>{if(f.value&&B(t.zIndex))return{zIndex:+t.zIndex+1}}),k=()=>{t.closeOnClickOutside&&r.forEach(e=>{e.toggle(!1)})},v=()=>{if(l.value){const e=F(l);t.direction==="down"?p.value=e.bottom:p.value=G.value-e.top}},O=()=>{f.value&&v()},x=e=>{r.forEach((n,a)=>{a===e?(v(),n.toggle()):n.state.showPopup&&n.toggle(!1,{immediate:!0})})},m=(e,n)=>{const{showPopup:a}=e.state,{disabled:i,titleClass:u}=e;return s("div",{id:`${d}-${n}`,role:"button",tabindex:i?void 0:0,class:[C("item",{disabled:i}),{[j]:!i}],onClick:()=>{i||x(n)}},[s("span",{class:[C("title",{down:a===(t.direction==="down"),active:a}),u],style:{color:a?t.activeColor:""}},[s("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return y({id:d,props:t,offset:p}),K(o,k),M("scroll",O,{target:g,passive:!0}),()=>{var e;return s("div",{ref:o,class:C()},[s("div",{ref:l,style:b.value,class:C("bar",{opened:f.value})},[r.map(m)]),(e=c.default)==null?void 0:e.call(c)])}}});const[re,h]=z("dropdown-item"),ie={title:String,options:L(),disabled:Boolean,teleport:[String,Object],lazyRender:P,modelValue:E,titleClass:E};var ce=D({name:re,props:ie,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:c,slots:d}){const o=Q({showPopup:!1,transition:!0,showWrapper:!1}),{parent:l,index:p}=U(R);if(!l)return;const r=e=>()=>c(e),y=r("open"),g=r("close"),f=r("opened"),b=()=>{o.showWrapper=!1,c("closed")},k=e=>{t.teleport&&e.stopPropagation()},v=(e=!o.showPopup,n={})=>{e!==o.showPopup&&(o.showPopup=e,o.transition=!n.immediate,e&&(o.showWrapper=!0))},O=()=>{if(d.title)return d.title();if(t.title)return t.title;const e=t.options.find(n=>n.value===t.modelValue);return e?e.text:""},x=e=>{const{activeColor:n}=l.props,a=e.value===t.modelValue,i=()=>{o.showPopup=!1,e.value!==t.modelValue&&(c("update:modelValue",e.value),c("change",e.value))},u=()=>{if(a)return s(oe,{class:h("icon"),color:n,name:"success"},null)};return s(ne,{role:"menuitem",key:e.value,icon:e.icon,title:e.text,class:h("option",{active:a}),style:{color:a?n:""},tabindex:a?0:-1,clickable:!0,onClick:i},{value:u})},m=()=>{const{offset:e}=l,{zIndex:n,overlay:a,duration:i,direction:u,closeOnClickOverlay:_}=l.props,I=te(n);return u==="down"?I.top=`${e.value}px`:I.bottom=`${e.value}px`,Z(s("div",{style:I,class:h([u]),onClick:k},[s(ee,{show:o.showPopup,"onUpdate:show":w=>o.showPopup=w,role:"menu",class:h("content"),overlay:a,position:u==="down"?"top":"bottom",duration:o.transition?i:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${l.id}-${p.value}`,closeOnClickOverlay:_,onOpen:y,onClose:g,onOpened:f,onClosed:b},{default:()=>{var w;return[t.options.map(x),(w=d.default)==null?void 0:w.call(d)]}})]),[[J,o.showWrapper]])};return X({state:o,toggle:v,renderTitle:O}),()=>t.teleport?s(Y,{to:t.teleport},{default:()=>[m()]}):m()}});const fe=V(ce),ve=V(le);export{fe as D,ve as a};
