import{c as l}from"./config.c00927f2.js";import w from"./list.8aac7141.js";import{a as v}from"./axios.646f38c1.js";import{_ as x,r as d,o as h,c,h as r,f as y,F as V,b as T,w as f,t as k}from"./index.d1e0524c.2022_10_30_01_20_49.js";import"./index.65c29790.js";const L={name:"keepAlive",components:{list:w},data(){return{hotwords:[],hotrows:[],vodrows:[],page:0,inputText:"",isTyping:!1,identifier:"",isLoading:!1,finished:!1,loading:!1}},computed:{},created(){},mounted(){},methods:{searchTextClick(){this.isTyping=!0,this.$refs.searchInput.focus()},search(o){console.log("search",o),this.loadData(1)},itemClick(o){this.inputText=o.dspwd,this.isTyping=!0,this.loadData(1)},infinite(o){console.log("onReachBottom"),this.loading=!0,this.loadData(this.page+1,o)},loadData(o=1,s){console.log("config",l,l.query()),o===1&&(this.page=0,this.identifier=new Date().valueOf());let i=l.query();i.page=o,this.inputText&&(i.wd=this.inputText),v({url:l.origin+"/search",params:i}).then(t=>{if(this.loading=!1,this.isLoading=!1,console.log("success",t),t.status==200&&t.data.retcode==0){this.page=o,t.data.data.hotwords&&(this.hotwords=t.data.data.hotwords);let e=t.data.data.hotrows||t.data.data.vodrows;e?(this.page==1?this.vodrows=e:this.vodrows=this.vodrows.concat(e),e.length==0&&window.$toast("\u6CA1\u4E86")):window.$toast("\u6CA1\u4E86")}else window.$toast(t.data.errmsg||t.statusCode||"fail")}).catch(t=>{window.$toast(t.message||"fail")})}},watch:{inputText:{handler:function(o,s){},immediate:!1}}},C={class:"special"},D={class:"items"},B=["onClick"];function q(o,s,i,t,e,n){const u=d("van-search"),p=d("list"),m=d("van-list"),_=d("van-pull-refresh");return h(),c("div",C,[r(u,{modelValue:e.inputText,"onUpdate:modelValue":s[0]||(s[0]=a=>e.inputText=a),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:n.search},null,8,["modelValue","onSearch"]),y("div",D,[(h(!0),c(V,null,T(e.hotwords,(a,g)=>(h(),c("div",{class:"item",key:g,onClick:R=>n.itemClick(a)},k(a.dspwd),9,B))),128))]),r(_,{modelValue:e.isLoading,"onUpdate:modelValue":s[2]||(s[2]=a=>e.isLoading=a),onRefresh:n.loadData,style:{overflow:"inherit",flex:"1"}},{default:f(()=>[r(m,{modelValue:e.loading,"onUpdate:modelValue":s[1]||(s[1]=a=>e.loading=a),finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:n.infinite,style:{"min-height":"50vh"}},{default:f(()=>[r(p,{dataList:e.vodrows.length>0?e.vodrows:e.hotrows},null,8,["dataList"])]),_:1},8,["modelValue","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])}const b=x(L,[["render",q],["__scopeId","data-v-8a8f0487"]]);export{b as default};
