import{_ as g,M as w,o as r,c as h,f as l,z as v,F as x,r as y,w as c,A as V}from"./index.c209ee9e.2022_11_09_01_53_08.js";import{P as L}from"./index.9927699f.js";import{L as T}from"./index.b5af19f4.js";import"./index.3bd1ada0.js";import{S as k}from"./index.06d9873a.js";import{c as d}from"./config.c00927f2.js";import C from"./list.07e700ea.js";import{a as D}from"./axios.646f38c1.js";import"./use-id.a203ab78.js";import"./index.92daa177.js";const S={name:"keepAlive",components:{list:C},data(){return{hotwords:[],hotrows:[],vodrows:[],page:0,inputText:"",isTyping:!1,identifier:"",isLoading:!1,finished:!1,loading:!1}},computed:{},created(){},mounted(){},methods:{searchTextClick(){this.isTyping=!0,this.$refs.searchInput.focus()},search(o){console.log("search",o),this.loadData(1)},itemClick(o){this.inputText=o.dspwd,this.isTyping=!0,this.loadData(1)},infinite(o){console.log("onReachBottom"),this.loading=!0,this.loadData(this.page+1,o)},loadData(o=1,s){console.log("config",d,d.query()),o===1&&(this.page=0,this.identifier=new Date().valueOf());let a=d.query();a.page=o,this.inputText&&(a.wd=this.inputText),D({url:d.origin+"/search",params:a}).then(t=>{if(this.loading=!1,this.isLoading=!1,console.log("success",t),t.status==200&&t.data.retcode==0){this.page=o,t.data.data.hotwords&&(this.hotwords=t.data.data.hotwords);let e=t.data.data.hotrows||t.data.data.vodrows;e?(this.page==1?this.vodrows=e:this.vodrows=this.vodrows.concat(e),e.length==0&&window.$toast("\u6CA1\u4E86")):window.$toast("\u6CA1\u4E86")}else window.$toast(t.data.errmsg||t.statusCode||"fail")}).catch(t=>{window.$toast(t.message||"fail")})}},watch:{inputText:{handler:function(o,s){},immediate:!1}}},B={class:"special"},R={class:"items"},q=["onClick"];function U(o,s,a,t,e,n){const f=k,m=w("list"),p=T,u=L;return r(),h("div",B,[l(f,{modelValue:e.inputText,"onUpdate:modelValue":s[0]||(s[0]=i=>e.inputText=i),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:n.search},null,8,["modelValue","onSearch"]),v("div",R,[(r(!0),h(x,null,y(e.hotwords,(i,_)=>(r(),h("div",{class:"item",key:_,onClick:A=>n.itemClick(i)},V(i.dspwd),9,q))),128))]),l(u,{modelValue:e.isLoading,"onUpdate:modelValue":s[2]||(s[2]=i=>e.isLoading=i),onRefresh:n.loadData,style:{overflow:"inherit",flex:"1"}},{default:c(()=>[l(p,{modelValue:e.loading,"onUpdate:modelValue":s[1]||(s[1]=i=>e.loading=i),finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:n.infinite,style:{"min-height":"50vh"}},{default:c(()=>[l(m,{dataList:e.vodrows.length>0?e.vodrows:e.hotrows},null,8,["dataList"])]),_:1},8,["modelValue","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])}const G=g(S,[["render",U],["__scopeId","data-v-8a8f0487"]]);export{G as default};
