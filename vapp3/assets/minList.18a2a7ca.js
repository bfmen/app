import{_ as v,R as L,o as d,c as f,f as a,w as l,F as y,r as w,a as x,aG as V,p as C}from"./index.60d2c820.2024_04_03_04_20_21.js";import{P as R}from"./index.2fcfd625.js";import{L as k}from"./index.9e56f7ef.js";import{T as D,a as b}from"./index.fc1b22fd.js";import{c as u}from"./config.6caa491d.js";import B from"./list.2b7ecf2b.js";import{a as T}from"./axios.8446186b.js";import"./use-id.3ab2d7ab.js";import"./index.7f258ca4.js";const I={components:{list:B},data(){return{isLoading:!1,loading:!1,finished:!1,list:[{title:"\u70B9\u8D5E",items:[],src:"/minivod/topzan-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u8BC4\u8BBA",items:[],src:"/minivod/topcomment-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u64AD\u653E",items:[],src:"/minivod/topplay-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6700\u65B0",items:[],src:"/minivod/topnew-0-0-0-0-0-0-0-0-0-0-",page:0},{title:"\u6295\u5E01",items:[],src:"/minivod/topcoin-0-0-0-0-0-0-0-0-0-0-",page:0}],current:0,vodid:""}},onLoad(i){},created(){},computed:{items(){return this.list.map(i=>i.title)},isH5(){return!!window}},methods:{onRefresh(){this.loadData(1,this.$state)},onClickItem(i){this.loadData(1)},loadData(i,o){const c=u.origin+this.list[this.current].src+i,r=i,t=this.current;T({url:c,params:u.query()}).then(e=>{if(console.log("success",e),e.status==200&&e.data.retcode==0){var n=e.data.data.vodrows;this.list[t].items=r==1?n:this.list[t].items.concat(n),this.list[t].page=r,n.length<16?this.finished=!0:this.loading=!1}else window.$dialog.alert({title:e.data.errmsg||e.statusCode||"fail"}),this.loading=!1}).catch(e=>{this.loading=!1,window.$dialog.alert({title:e.message||"fail"})}).finally(()=>{this.isLoading=!1,this.loading=!1})},infinite(i){console.log("onReachBottom"),this.loading=!0,this.finished=!1,this.loadData(this.list[this.current].page+1)}}};function P(i,o,c,r,t,e){const n=D,p=b,h=L("list"),g=k,_=R;return d(),f("div",null,[a(p,{active:t.current,"onUpdate:active":o[0]||(o[0]=s=>t.current=s),type:"card",onChange:e.onClickItem},{default:l(()=>[(d(!0),f(y,null,w(e.items,(s,m)=>(d(),x(n,{title:s,name:m,key:m},{default:l(()=>[V(C(s),1)]),_:2},1032,["title","name"]))),128))]),_:1},8,["active","onChange"]),a(_,{modelValue:t.isLoading,"onUpdate:modelValue":o[2]||(o[2]=s=>t.isLoading=s),onRefresh:e.onRefresh,style:{overflow:"inherit"}},{default:l(()=>[a(g,{modelValue:t.loading,"onUpdate:modelValue":o[1]||(o[1]=s=>t.loading=s),finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e.infinite,style:{"min-height":"50vh"}},{default:l(()=>[a(h,{dataList:t.list[t.current].items,isMin:!0},null,8,["dataList"])]),_:1},8,["modelValue","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])}const S=v(I,[["render",P],["__scopeId","data-v-7dfce9c4"]]);export{S as default};
