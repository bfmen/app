import{u as c,_ as y,r as p,o as v,c as x,h as d,w as h}from"./index.7d095a7f.2022_10_27_10_42_17.js";import{c as w}from"./ccItem.65ff24aa.js";import{_ as g}from"./data.84552aea.js";import"./ccImg.eeb79db0.js";import"./index.0ae56dc1.js";const _=Object.assign({"./axios.js":()=>c(()=>import("./axios.c4f3359c.js"),["./axios.c4f3359c.js","./axios.91e25212.js","./config.e8ae8f25.js"],import.meta.url),"./config.js":()=>c(()=>import("./config.e8ae8f25.js"),[],import.meta.url),"./utils.js":()=>c(()=>import("./utils.f354cdd4.js"),["./utils.f354cdd4.js","./index.b805869b.js"],import.meta.url)}),i={};for(const t in _){const e=_[t];let a=t.replace("./","").replace(".js","");i[a]=(await e()).default}const V={mixins:[g],components:{ccItem:w},data(){return{page:-1,refreshing:!1,loading:!1,finished:!1,inputText:"",list:[],placeholder:"placeholder",title:""}},computed:{showKeys(){return[{key:"views",type:"primary"},{key:"name",type:"success"},{key:"duration",type:"danger"},{key:"hd",type:"warning"}]}},async created(){},methods:{onRefresh(){this.loadData()},async loadData(t=0){t<0&&(t=0);let e=t===0?i.config.url:`${i.config.url}/new/${t}`;this.inputText&&(e=t===0?`${i.config.url}?k=${this.inputText}`:`${i.config.url}?k=${this.inputText}&p=${this.page}`);let a=await i.axios({params:{uuu:e}}),o=i.utils.format.list(a.data);this.list=t===0?o.list:[...this.list,...o.list],this.title=o.title,this.page=t,this.loading=!1,this.refreshing=!1},async open(t,e){if(t&&e.href&&!e.detail_src){let a=await i.axios({params:{uuu:e.href}}),o=i.utils.format.detail(a.data);this.$set(e,"detail_src",o.src);let l=await i.axios({params:{uuu:o.src}}),r=o.src.split("/");r.pop();let m=r.join("/"),f=l.data.split(`
`).map(s=>[".ts",".m3u8"].some(u=>s.includes(u))?s.startsWith("http")?s:`${m}/${s}`:s).filter(s=>s.includes(".m3u8")).map(s=>({url:s,title:s.split("/videos/")[1].split("/hls-")[1].split("-")[0]})).sort((s,u)=>parseInt(u.title)-parseInt(s.title));this.$set(e,"playList",f)}}}};function k(t,e,a,o,l,r){const m=p("van-search"),f=p("ccItem"),s=p("van-list"),u=p("van-pull-refresh");return v(),x("div",null,[d(u,{modelValue:l.refreshing,"onUpdate:modelValue":e[4]||(e[4]=n=>l.refreshing=n),onRefresh:r.onRefresh},{default:h(()=>[d(m,{modelValue:l.inputText,"onUpdate:modelValue":e[0]||(e[0]=n=>l.inputText=n),placeholder:l.placeholder+"",onSearch:e[1]||(e[1]=n=>r.loadData(0))},null,8,["modelValue","placeholder"]),d(s,{modelValue:l.loading,"onUpdate:modelValue":e[2]||(e[2]=n=>l.loading=n),finished:l.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e[3]||(e[3]=n=>r.loadData(++l.page))},{default:h(()=>[d(f,{title:l.title,dataSource:l.list,onOpen:r.open,showKeys:r.showKeys},null,8,["title","dataSource","onOpen","showKeys"])]),_:1},8,["modelValue","finished"])]),_:1},8,["modelValue","onRefresh"])])}const j=y(V,[["render",k]]);export{j as default};
