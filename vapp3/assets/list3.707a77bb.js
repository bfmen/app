import{a as v}from"./axios.91e25212.js";import{m as u}from"./index.3d31f81c.js";import{c as y}from"./ccItem.dae729d9.js";import{J as _}from"./index.abd1c2df.js";import{_ as w}from"./data.e305fc3c.js";import{_ as x,r,o as g,c as V,h as i,w as p}from"./index.8b60447b.2022_10_27_15_02_16.js";import"./ccImg.2d292a4e.js";const k={mixins:[w],components:{ccItem:y},data(){return{inputText:"",page:0,limit:20,list:[],value1:"Favorites",value0:1,value2:2,option2:[{text:"\u5012\u5E8F",value:1},{text:"\u6B63\u5E8F",value:0}],option3:[{text:"\u5168\u90E8",value:0},{text:"\u5B58\u5728img",value:1},{text:"\u5B58\u5728video",value:2},{text:"\u5B58\u5728video2",value:3}],refreshing:!1,loading:!1,finished:!1,current:{},placeholder:0,dataSource:[]}},computed:{option1(){return _.util.isArray(this.list)?Object.keys(this.list.reduce((o,e)=>({...o,...e}),{})).map(o=>({text:o,value:o})):[]},showKeys(){let o=[{key:"Views",type:"primary"},{key:"From",type:"success"},{key:"Added",type:"danger"},{key:"duration",type:"warning"}];return this.value1&&o.push({key:this.value1,type:"primary"}),o}},watch:{list(){this.dataSource=[{title:this.list.length+"",list:this.list,activeNames:[]}]}},methods:{async loadData(o=1){let{data:e}=await v({url:"https://nine-sit.netlify.app/api/json/dataSourceNine.txt",params:{_page:o,_limit:this.limit,[this.value1+"_like"]:this.inputText,[this.value1+"_order"]:this.value0}});e.forEach(a=>{a.detail&&(a.detail_src=a.detail.src),Object.keys(a).forEach(n=>{let t=a[n];typeof t=="object"&&!Array.isArray(t)&&(Object.keys(t).forEach(l=>{a[`${n}_${l}`]=t[l]}),a.testViewUrl="http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400&fileType=.mp4")})}),o===1?(this.finished=!1,this.list=e):this.list=[...this.list,...e],this.page=o,this.loading=!1,e.length==0&&(this.finished=!0)},search(){this.loadData(1)},async open(o,e){if(o&&e.href&&!e.detail_src){let a=window.$toast.loading({duration:0}),n=await u.axios({params:{uuu:e.href}});a.clear();let t=u.utils.format.all(n.data);e.detail_src=t.detail.src}}}},S={class:"listAll"};function b(o,e,a,n,t,l){const d=r("van-dropdown-item"),c=r("van-dropdown-menu"),h=r("van-search"),f=r("ccItem"),m=r("van-list");return g(),V("div",S,[i(c,null,{default:p(()=>[i(d,{modelValue:t.value1,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value1=s),options:l.option1,onChange:l.search},null,8,["modelValue","options","onChange"]),i(d,{modelValue:t.value0,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value0=s),options:t.option2,onChange:l.search},null,8,["modelValue","options","onChange"]),i(d,{modelValue:t.value2,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value2=s),options:t.option3,onChange:l.search},null,8,["modelValue","options","onChange"])]),_:1}),i(h,{modelValue:t.inputText,"onUpdate:modelValue":e[3]||(e[3]=s=>t.inputText=s),placeholder:t.placeholder+"",onSearch:l.search},null,8,["modelValue","placeholder","onSearch"]),i(m,{modelValue:t.loading,"onUpdate:modelValue":e[4]||(e[4]=s=>t.loading=s),finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:e[5]||(e[5]=s=>l.loadData(t.page+1))},{default:p(()=>[i(f,{dataSource:t.list,showKeys:l.showKeys,onOpen:l.open},null,8,["dataSource","showKeys","onOpen"])]),_:1},8,["modelValue","finished"])])}const E=x(k,[["render",b]]);export{E as default};
